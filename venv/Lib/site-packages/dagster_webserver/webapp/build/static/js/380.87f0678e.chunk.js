"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[380],{97734:function(e,n,t){t.d(n,{a:function(){return c}});var i=t(96234),r=t(78193),o=function(e,n){var t=new Set(Array.from(e.checkedIds));switch(n.type){case"toggle-one":var r=n.payload,o=r.checked,s=r.id;return o?t.add(s):t.delete(s),{lastCheckedId:s,checkedIds:t};case"toggle-slice":var c=n.payload,a=c.checked,l=c.id,d=c.allIds,u=e.lastCheckedId,h=u?d.indexOf(u):-1,x=d.indexOf(l);if(-1===h||-1===x)return e;var p=[h,x].sort(),m=(0,i.Z)(p,2),f=m[0],g=m[1];return d.slice(f,g+1).forEach((function(e){a?t.add(e):t.delete(e)})),{lastCheckedId:l,checkedIds:t};case"toggle-all":var j=n.payload,v=j.checked,y=j.allIds;return{lastCheckedId:null,checkedIds:v?new Set(y):new Set}}},s={checkedIds:new Set,lastCheckedId:null};function c(e){var n=r.useReducer(o,s),t=(0,i.Z)(n,2),c=t[0],a=t[1];return[c,{onToggleFactory:function(n){return function(t){var i=t.checked;t.shiftKey&&c.lastCheckedId?a({type:"toggle-slice",payload:{checked:i,id:n,allIds:e}}):a({type:"toggle-one",payload:{checked:i,id:n}})}},onToggleAll:function(n){a({type:"toggle-all",payload:{checked:n,allIds:e}})}}]}},74492:function(e,n,t){t.d(n,{m:function(){return g}});var i=t(96234),r=t(3077),o=t(47515),s=t(32667),c=t(67888),a=t(45519),l=t(95714),d=t(92555),u=t(61623),h=t(78193),x=t(97412),p=t(20822),m=t(85514),f=t(35936),g=h.memo((function(e){var n=e.assetKeys,t=e.useTags,g=e.modalTitle,j=void 0===g?"Assets in Run":g,v=h.useState(!1),y=(0,i.Z)(v,2),k=y[0],C=y[1];if(!n||!n.length)return null;var w=n.length,b=w<=3?n:[],R=w-b.length,Z=R>0?(0,f.jsxs)(r.Vq,{title:j,onClose:function(){return C(!1)},style:{minWidth:"400px",maxWidth:"80vw",maxHeight:"70vh"},isOpen:k,children:[k?(0,f.jsx)(o.x,{padding:{bottom:12},border:{side:"bottom",color:s.w.KeylineGray,width:1},style:{overflowY:"auto"},background:s.w.White,children:(0,f.jsxs)(c.i,{children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:(0,f.jsx)("th",{children:"Asset key"})})}),(0,f.jsx)("tbody",{children:n.map((function(e,n){return(0,f.jsx)("tr",{children:(0,f.jsx)("td",{children:(0,f.jsx)(x.rU,{to:(0,m.p)(e),children:(0,p.ll)(e)},(0,p.Je)(e))})},"".concat((0,p.Je)(e),"-").concat(n))}))})]})}):null,(0,f.jsx)(r.cN,{children:(0,f.jsx)(a.zx,{intent:"primary",autoFocus:!0,onClick:function(){return C(!1)},children:"OK"})})]}):void 0;return t?(0,f.jsxs)(f.Fragment,{children:[b.map((function(e,n){return(0,f.jsx)(x.rU,{to:(0,m.p)(e),children:(0,f.jsx)(l.V,{intent:"none",interactive:!0,icon:"asset",children:(0,p.ll)(e)})},"".concat((0,p.Je)(e),"-").concat(n))})),R>0&&(0,f.jsx)(d.Z,{onClick:function(){return C(!0)},children:(0,f.jsxs)(l.V,{intent:"none",icon:"asset",children:[R," assets"]})}),Z]}):(0,f.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,f.jsx)(u.JO,{color:s.w.Gray400,name:"asset",size:16,style:{marginTop:2}}),(0,f.jsxs)(o.x,{style:{flex:1},flex:{wrap:"wrap",display:"inline-flex"},children:[b.map((function(e,n){return(0,f.jsx)(x.rU,{to:(0,m.p)(e),style:{marginRight:4},children:"".concat((0,p.ll)(e)).concat(n<b.length-1?",":"")},(0,p.Je)(e))})),R>0&&b.length>0?(0,f.jsx)(d.Z,{onClick:function(){return C(!0)},children:" + ".concat(R," more")}):R>0?(0,f.jsx)(d.Z,{onClick:function(){return C(!0)},children:"".concat(R," assets")}):void 0]}),Z]})}))},8709:function(e,n,t){t.d(n,{Z:function(){return be},A:function(){return we}});var i,r=t(71171),o=t(96234),s=t(60319),c=t(31623),a=t(47515),l=t(67445),d=t(61623),u=t(67888),h=t(17914),x=t(83473),p=t(95714),m=t(32667),f=t(72835),g=t(92555),j=t(3077),v=t(45519),y=t(78193),k=t(97412),C=t(30382),w=t(20822),b=t(97734),R=t(24265),Z=t(85279),N=t(80500),I=t(63167),T=t(74492),P=t(56666),S=t(32723),_=t(34795),O=t(33028),E=t(15541),A=t(44719),z=t(73070),L=t(85357),F=t(44229),M=t(9886),H=t(50032),J=t(33418),D=t(82182),U=t(35740),V=t(22260),B=t(23555),K=t(8686),q=t(48341),G=t(79986),Y=t(92761),Q=t(9089),W=t(80018),$=t(4537),X=t(49675),ee=t(89622),ne=t(35936),te=function(e){if("LaunchRunSuccess"===(null===e||void 0===e?void 0:e.launchPipelineReexecution.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.launchPipelineReexecution},ie=function(e){if(!e)return"Unknown error";switch(e.__typename){case"ConflictingExecutionParamsError":return"Conflicting execution parameters";case"InvalidOutputError":return"Invalid output";case"InvalidStepError":return"Invalid step";case"NoModeProvidedError":return"No mode provided";case"PipelineNotFoundError":return"Job not found in workspace";case"PresetNotFoundError":return"Preset not found";case"PythonError":return e.message;case"RunConfigValidationInvalid":return"Run config invalid";case"RunConflict":return"Run conflict";case"UnauthorizedError":return"Re-execution not authorized";case"InvalidSubsetError":return"Invalid op subset: "+e.message;default:return"Unknown error"}},re=function(e){return{frozenRuns:e,step:"initial",reexecution:{completed:0,errors:{}}}},oe=function(e,n){switch(n.type){case"reset":return re(n.frozenRuns);case"start":return(0,O.Z)((0,O.Z)({},e),{},{step:"reexecuting"});case"reexecution-success":var t=e.reexecution;return(0,O.Z)((0,O.Z)({},e),{},{step:"reexecuting",reexecution:(0,O.Z)((0,O.Z)({},t),{},{completed:t.completed+1})});case"reexecution-error":var i=e.reexecution;return(0,O.Z)((0,O.Z)({},e),{},{step:"reexecuting",reexecution:(0,O.Z)((0,O.Z)({},i),{},{completed:i.completed+1,errors:(0,O.Z)((0,O.Z)({},i.errors),{},(0,P.Z)({},n.id,n.error))})});case"complete":return(0,O.Z)((0,O.Z)({},e),{},{step:"completed"})}},se=function(e){var n=e.isOpen,t=e.onClose,i=e.onComplete,r=e.reexecutionStrategy,s=e.selectedRuns,c=y.useRef(s),a=y.useReducer(oe,c.current,re),l=(0,o.Z)(a,2),u=l[0],h=l[1],p=Object.keys(u.frozenRuns).length;y.useEffect((function(){n&&h({type:"reset",frozenRuns:c.current})}),[n]),y.useEffect((function(){n||(c.current=s)}),[n,s]);var f=(0,E.D)(ee.kO),g=(0,o.Z)(f,1)[0],k=function(){var e=(0,_.Z)((0,S.Z)().mark((function e(){var n,t,o,s,c,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({type:"start"}),n=Object.keys(u.frozenRuns),t=0,o=n;case 3:if(!(t<o.length)){e.next=13;break}return s=o[t],e.next=7,g({variables:{reexecutionParams:{parentRunId:s,strategy:r}}});case 7:c=e.sent,"LaunchRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.launchPipelineReexecution.__typename)?h({type:"reexecution-success"}):h({type:"reexecution-error",id:s,error:te(a)});case 10:t++,e.next=3;break;case 13:h({type:"complete"}),i(u.reexecution);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="reexecuting"!==u.step;return(0,ne.jsxs)(j.Vq,{isOpen:n,title:r===B.hmq.ALL_STEPS?"Re-execute runs":"Re-execute runs from failure",canEscapeKeyClose:C,canOutsideClickClose:C,onClose:t,children:[(0,ne.jsx)(j.a7,{children:(0,ne.jsxs)($.Z,{direction:"column",spacing:24,children:[function(){switch(u.step){case"initial":if(!p)return(0,ne.jsxs)($.Z,{direction:"column",spacing:16,children:[(0,ne.jsx)("div",{children:"No runs selected for re-execution."}),(0,ne.jsx)("div",{children:"The runs you selected may already have finished executing."})]});return(0,ne.jsx)($.Z,{direction:"column",spacing:16,children:(0,ne.jsx)("div",{children:r===B.hmq.ALL_STEPS?(0,ne.jsxs)("span",{children:["".concat(p," ").concat(1===p?"run":"runs"," will be re-executed "),(0,ne.jsx)("strong",{children:"with all steps"}),". Do you wish to continue?"]}):(0,ne.jsxs)("span",{children:["".concat(p," ").concat(1===p?"run":"runs"," will be re-executed "),(0,ne.jsx)("strong",{children:"from failure"}),". Do you wish to continue?"]})})});case"reexecuting":case"completed":var e=p>0?u.reexecution.completed/p:1;return(0,ne.jsxs)($.Z,{direction:"column",spacing:8,children:[(0,ne.jsx)(W.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"reexecuting"===u.step?(0,ne.jsx)(X.c,{message:"Re-execution in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===u.step)return null;if("reexecuting"===u.step)return(0,ne.jsx)("div",{children:"Please do not close the window or navigate away during re-execution."});var e=u.reexecution.errors,n=Object.keys(e).length,t=u.reexecution.completed-n;return(0,ne.jsxs)($.Z,{direction:"column",spacing:8,children:[t?(0,ne.jsxs)($.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,ne.jsx)(d.JO,{name:"check_circle",color:m.w.Green500}),(0,ne.jsx)("div",{children:"Successfully requested re-execution for ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,ne.jsxs)($.Z,{direction:"column",spacing:8,children:[(0,ne.jsxs)($.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,ne.jsx)(d.JO,{name:"warning",color:m.w.Yellow500}),(0,ne.jsx)("div",{children:"Could not request re-execution for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,ne.jsx)("ul",{children:Object.keys(e).map((function(n){return(0,ne.jsx)("li",{children:(0,ne.jsxs)($.Z,{direction:"row",spacing:8,alignItems:"baseline",children:[(0,ne.jsx)(x.fv,{children:n.slice(0,8)}),e[n]?(0,ne.jsx)("div",{children:ie(e[n])}):null]})},n)}))})]}):null]})}()]})}),(0,ne.jsx)(j.cN,{children:function(){switch(u.step){case"initial":return p?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(v.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,ne.jsx)(v.zx,{intent:"primary",onClick:k,children:"Re-execute ".concat("".concat(p," ").concat(1===p?"run":"runs"))})]}):(0,ne.jsx)(v.zx,{intent:"none",onClick:t,children:"OK"});case"reexecuting":return(0,ne.jsx)(v.zx,{intent:"primary",disabled:!0,children:"Re-executing ".concat("".concat(p," ").concat(1===p?"run":"runs","..."))});case"completed":return(0,ne.jsx)(v.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})},ce=t(20967),ae=t(21687),le=t(69654),de=t(37870),ue=y.memo((function(e){var n,t=e.run,i=e.onAddTag,r=e.additionalActionsForRun,s=y.useContext(ee.Lw).refetch,c=y.useState("none"),l=(0,o.Z)(c,2),u=l[0],h=l[1],x=y.useContext(J.I).rootServerURI,p=(0,H.k6)(),m=(0,V.m)(),f=(0,E.D)(ee.kO,{onCompleted:s}),g=(0,o.Z)(f,1)[0],k=(0,A.t)(pe,{variables:{runId:t.id}}),C=(0,o.Z)(k,2),w=C[0],b=C[1],R=b.called,T=b.loading,B=b.data,W=function(){h("none")},$=function(){s()},X="Run"===(null===B||void 0===B||null===(n=B.pipelineRunOrError)||void 0===n?void 0:n.__typename)?null===B||void 0===B?void 0:B.pipelineRunOrError:null,te=null===X||void 0===X?void 0:X.runConfigYaml,ie=(0,N.n)(X),re=(0,de.J)((0,O.Z)((0,O.Z)({},t),{},{parentPipelineSnapshotId:null===X||void 0===X?void 0:X.parentPipelineSnapshotId})),oe=ce.cv.has(t.status),se=!(!ie||!(0,Y.E8)(null===ie||void 0===ie?void 0:ie.match,t.pipelineName)),ue=!!R&&!T,he=y.useMemo((function(){return t.hasReExecutePermission?re?{disabled:re.disabled,message:re.tooltip}:ue?{disabled:!1}:{disabled:!0}:{disabled:!0,message:U.Qr}}),[t.hasReExecutePermission,re,ue]);return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)(v.zH,{children:[(0,ne.jsx)(Z.A,{to:"/runs/".concat(t.id),children:"View run"}),(0,ne.jsx)(z.J,{content:(0,ne.jsxs)(L.v2,{children:[(0,ne.jsx)(L.sN,{tagName:"button",text:T?"Loading configuration...":"View configuration...",disabled:!te,icon:"open_in_new",onClick:function(){return h("config")}}),(0,ne.jsx)(L.sN,{tagName:"button",text:(0,ne.jsxs)("div",{style:{display:"contents"},children:["View all tags",(0,ne.jsx)(a.x,{flex:{justifyContent:"center",alignItems:"center",display:"inline-flex"},padding:{horizontal:8},children:(0,ne.jsx)(me,{children:"t"})})]}),icon:"tag",onClick:function(){return h("tags")}}),t.pipelineSnapshotId?(0,ne.jsx)(fe,{to:(0,q.sS)(t.pipelineName,t.pipelineSnapshotId),children:(0,ne.jsx)(L.sN,{tagName:"button",icon:"job",text:"View snapshot",onClick:function(){return h("tags")}})}):null,(0,ne.jsx)(L.R,{}),(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(F.u,{content:t.hasReExecutePermission?xe:K.U,position:"left",disabled:ue&&t.hasReExecutePermission,targetTagName:"div",children:(0,ne.jsx)(G.U,{text:"Open in Launchpad...",disabled:!ue||!t.hasReExecutePermission,icon:"edit",to:(0,I.$O)({id:t.id,pipelineName:t.pipelineName,repositoryName:null===ie||void 0===ie?void 0:ie.match.repository.name,repositoryLocationName:null===ie||void 0===ie?void 0:ie.match.repositoryLocation.name,isJob:se})})}),(0,ne.jsx)(F.u,{content:he.message||"",position:"left",canShow:he.disabled,targetTagName:"div",children:(0,ne.jsx)(L.sN,{tagName:"button",text:"Re-execute",disabled:he.disabled,icon:"refresh",onClick:(0,_.Z)((0,S.Z)().mark((function e(){var n,i;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie||!te){e.next=5;break}return e.next=3,g({variables:(0,ee.kz)({run:(0,O.Z)((0,O.Z)({},t),{},{runConfigYaml:te}),style:{type:"all"},repositoryLocationName:ie.match.repositoryLocation.name,repositoryName:ie.match.repository.name})});case 3:i=e.sent,(0,ee.lF)(t.pipelineName,null===(n=i.data)||void 0===n?void 0:n.launchPipelineReexecution,p,{behavior:"open"});case 5:case"end":return e.stop()}}),e)})))})}),oe||!t.hasTerminatePermission?null:(0,ne.jsx)(L.sN,{tagName:"button",icon:"cancel",text:"Terminate",onClick:function(){return h("terminate")}}),null===r||void 0===r?void 0:r(t),(0,ne.jsx)(L.R,{})]}),(0,ne.jsx)(L.AL,{text:"Download debug file",icon:"download_for_offline",download:!0,href:"".concat(x,"/download_debug/").concat(t.id)}),t.hasDeletePermission?(0,ne.jsx)(L.sN,{tagName:"button",icon:"delete",text:"Delete",intent:"danger",onClick:function(){return h("delete")}}):null]}),position:"bottom-right",onOpening:function(){R||w()},children:(0,ne.jsx)(v.zx,{icon:(0,ne.jsx)(d.JO,{name:"expand_more"})})})]}),t.hasTerminatePermission?(0,ne.jsx)(le.A,{isOpen:"terminate"===u,onClose:W,onComplete:$,selectedRuns:(0,P.Z)({},t.id,t.canTerminate)}):null,t.hasDeletePermission?(0,ne.jsx)(Q.N,{isOpen:"delete"===u,onClose:W,onComplete:$,onTerminateInstead:function(){return h("terminate")},selectedRuns:(0,P.Z)({},t.id,t.canTerminate)}):null,(0,ne.jsxs)(j.Vq,{isOpen:"tags"===u,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:W,children:[(0,ne.jsx)(j.a7,{children:(0,ne.jsx)(ae.Q,{tags:t.tags,mode:se?"default"!==t.mode?t.mode:null:t.mode,onAddTag:i})}),(0,ne.jsx)(j.cN,{topBorder:!0,children:(0,ne.jsx)(v.zx,{intent:"primary",onClick:W,children:"Close"})})]}),(0,ne.jsxs)(j.Vq,{isOpen:"config"===u,title:"Config",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:W,children:[(0,ne.jsx)(M.NU,{value:te||"",options:{lineNumbers:!0,mode:"yaml"}}),(0,ne.jsxs)(j.cN,{topBorder:!0,children:[(0,ne.jsx)(v.zx,{intent:"none",onClick:(0,_.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(te||""),e.next=3,(0,D.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"});case 3:case"end":return e.stop()}}),e)}))),children:"Copy config"}),(0,ne.jsx)(v.zx,{intent:"primary",onClick:W,children:"OK"})]})]})]})})),he=y.memo((function(e){var n=e.selected,t=e.clearSelection,i=y.useContext(ee.Lw).refetch,r=y.useState("none"),s=(0,o.Z)(r,2),c=s[0],a=s[1],l=y.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission}))}),[n]),u=y.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission}))}),[n]),h=y.useMemo((function(){return n.some((function(e){return e.hasReExecutePermission}))}),[n]),x=!l&&!u,p=n.filter((function(e){return!ce.cv.has(null===e||void 0===e?void 0:e.status)&&e.hasTerminatePermission})),m=p.map((function(e){return e.id})),f=p.reduce((function(e,n){return(0,O.Z)((0,O.Z)({},e),{},(0,P.Z)({},n.id,n.canTerminate))}),{}),g=n.map((function(e){return e.id})),j=n.reduce((function(e,n){return(0,O.Z)((0,O.Z)({},e),{},(0,P.Z)({},n.id,n.canTerminate))}),{}),k=n.filter((function(e){return ce.hd.has(null===e||void 0===e?void 0:e.status)&&e.hasReExecutePermission})),C=k.reduce((function(e,n){return(0,O.Z)((0,O.Z)({},e),{},(0,P.Z)({},n.id,n.id))}),{}),w=n.filter((function(e){return ce.cv.has(null===e||void 0===e?void 0:e.status)&&e.hasReExecutePermission})),b=w.reduce((function(e,n){return(0,O.Z)((0,O.Z)({},e),{},(0,P.Z)({},n.id,n.id))}),{}),R=function(){a("none")},Z=function(){t(),i()};return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(z.J,{disabled:x||0===n.length,content:(0,ne.jsxs)(L.v2,{children:[l?(0,ne.jsx)(L.sN,{icon:"cancel",text:"Terminate ".concat(m.length," ").concat(1===m.length?"run":"runs"),disabled:0===m.length,onClick:function(){a("terminate")}}):null,u?(0,ne.jsx)(L.sN,{icon:"delete",intent:"danger",text:"Delete ".concat(g.length," ").concat(1===g.length?"run":"runs"),disabled:0===g.length,onClick:function(){a("delete")}}):null,h?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(L.sN,{icon:"refresh",text:"Re-execute ".concat(w.length," ").concat(1===w.length?"run":"runs"),disabled:0===w.length,onClick:function(){a("reexecute")}}),(0,ne.jsx)(L.sN,{icon:"refresh",text:"Re-execute ".concat(k.length," ").concat(1===k.length?"run":"runs"," from failure"),disabled:0===k.length,onClick:function(){a("reexecute-from-failure")}})]}):null]}),position:"bottom-right",children:(0,ne.jsx)(v.zx,{disabled:x||0===n.length,rightIcon:(0,ne.jsx)(d.JO,{name:"expand_more"}),intent:"primary",children:"Actions"})}),(0,ne.jsx)(le.A,{isOpen:"terminate"===c,onClose:R,onComplete:Z,selectedRuns:f}),(0,ne.jsx)(Q.N,{isOpen:"delete"===c,onClose:R,onComplete:Z,onTerminateInstead:function(){return a("terminate")},selectedRuns:j}),(0,ne.jsx)(se,{isOpen:"reexecute-from-failure"===c,onClose:R,onComplete:Z,selectedRuns:C,reexecutionStrategy:B.hmq.FROM_FAILURE}),(0,ne.jsx)(se,{isOpen:"reexecute"===c,onClose:R,onComplete:Z,selectedRuns:b,reexecutionStrategy:B.hmq.ALL_STEPS})]})})),xe="Launchpad is unavailable because the pipeline is not present in the current repository.",pe=(0,c.Ps)(i||(i=(0,r.Z)(["\n  query PipelineEnvironmentQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        pipelineName\n        pipelineSnapshotId\n        runConfigYaml\n        pipelineName\n        parentPipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n  }\n"]))),me=s.ZP.div.withConfig({displayName:"RunActionsMenu__SlashShortcut",componentId:"sc-1et2hvz-0"})(["border-radius:4px;padding:0px 6px;background:",";color:",";"],m.w.Gray100,m.w.Gray500),fe=(0,s.ZP)(k.rU).withConfig({displayName:"RunActionsMenu__LinkNoUnderline",componentId:"sc-1et2hvz-1"})(["text-decoration:none !important;"]),ge=t(1360),je=t(68506);function ve(e){var n,t=e.run.tags||[],i=t.find((function(e){return e.key===je.H.ScheduleName})),r=t.find((function(e){return e.key===je.H.SensorName})),o=t.find((function(e){return e.key===je.H.User})),s=t.find((function(e){return e.key===je.H.Automaterialize||e.key===je.H.CreatedBy&&"auto_materialize"===e.value})),c=t.find((function(e){return e.key===je.H.CreatedBy})),l=(0,ge.C)().UserDisplay;return n=o?(0,ne.jsx)(l,{email:o.value}):i?(0,ne.jsx)(p.V,{icon:"schedule",children:i.value},"schedule"):r?(0,ne.jsx)(p.V,{icon:"sensors",children:r.value},"sensor"):s?(0,ne.jsx)(p.V,{icon:"auto_materialize_policy",children:"Auto-materialize policy"},"automaterialize"):(0,ne.jsx)(p.V,{icon:"account_circle",children:"Manually launched"}),(0,ne.jsx)(a.x,{flex:{direction:"column",alignItems:"flex-start"},children:n||(null===c||void 0===c?void 0:c.value)})}var ye,ke=t(25465),Ce=t(95904),we=function(e){var n=e.runs,t=e.filter,i=e.onAddTag,r=e.highlightedIds,s=e.actionBarComponents,c=e.belowActionBarComponents,x=e.hideCreatedBy,p=e.emptyState,m=n.map((function(e){return e.id})),f=(0,b.a)(m),g=(0,o.Z)(f,2),j=g[0].checkedIds,v=g[1],k=v.onToggleFactory,C=v.onToggleAll,w=y.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission||e.hasDeletePermission}))}),[n]);var R=n.filter((function(e){return j.has(e.id)}));return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Ne,{top:(0,ne.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center",grow:1},children:[s,(0,ne.jsx)(he,{selected:R,clearSelection:function(){return C(!1)}})]}),bottom:c}),function(){if(0===n.length){var o=!!Object.keys(t||{}).length;return p?(0,ne.jsx)(ne.Fragment,{children:p()}):(0,ne.jsx)("div",{children:(0,ne.jsx)(a.x,{margin:{vertical:32},children:o?(0,ne.jsx)(l.t,{icon:"run",title:"No matching runs",description:"No runs were found for this filter."}):(0,ne.jsx)(l.t,{icon:"run",title:"No runs found",description:(0,ne.jsxs)(a.x,{flex:{direction:"column",gap:12},children:[(0,ne.jsx)("div",{children:"You have not launched any runs yet."}),(0,ne.jsxs)(a.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,ne.jsx)(Z.A,{icon:(0,ne.jsx)(d.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,ne.jsx)("span",{children:"or"}),(0,ne.jsx)(Z.A,{icon:(0,ne.jsx)(d.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})})})}return(0,ne.jsxs)(u.i,{children:[(0,ne.jsx)("thead",{children:(0,ne.jsxs)("tr",{children:[w?(0,ne.jsx)("th",{style:{width:42,paddingTop:0,paddingBottom:0},children:(0,ne.jsx)(h.X,{indeterminate:j.size>0&&j.size!==n.length,checked:j.size===n.length,onChange:function(e){e.target instanceof HTMLInputElement&&C(e.target.checked)}})}):null,(0,ne.jsx)("th",{style:{width:90},children:"Run ID"}),(0,ne.jsx)("th",{style:{width:180},children:"Created date"}),(0,ne.jsx)("th",{children:"Target"}),x?null:(0,ne.jsx)("th",{style:{width:160},children:"Launched by"}),(0,ne.jsx)("th",{style:{width:120},children:"Status"}),(0,ne.jsx)("th",{style:{width:190},children:"Duration"}),e.additionalColumnHeaders,(0,ne.jsx)("th",{style:{width:52}})]})}),(0,ne.jsx)("tbody",{children:n.map((function(n){var t;return(0,ne.jsx)(Re,{canTerminateOrDelete:n.hasTerminatePermission||n.hasDeletePermission,run:n,onAddTag:i,checked:j.has(n.id),additionalColumns:null===(t=e.additionalColumnsForRow)||void 0===t?void 0:t.call(e,n),additionalActionsForRun:e.additionalActionsForRun,onToggleChecked:k(n.id),isHighlighted:r&&r.includes(n.id),hideCreatedBy:x},n.id)}))})]})}()]})},be=(0,c.Ps)(ye||(ye=(0,r.Z)(["\n  fragment RunTableRunFragment on Run {\n    id\n    status\n    stepKeysToExecute\n    canTerminate\n    hasReExecutePermission\n    hasTerminatePermission\n    hasDeletePermission\n    mode\n    rootRunId\n    parentRunId\n    pipelineSnapshotId\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    solidSelection\n    assetSelection {\n      ... on AssetKey {\n        path\n      }\n    }\n    status\n    tags {\n      key\n      value\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n"])),ee.$X),Re=function(e){var n,t=e.run,i=e.canTerminateOrDelete,r=e.onAddTag,s=e.checked,c=e.onToggleChecked,l=e.additionalColumns,u=e.additionalActionsForRun,b=e.isHighlighted,Z=e.hideCreatedBy,P=t.pipelineName,S=(0,N.r)(t),_=y.useMemo((function(){if(S){var e=S.match.repository.pipelines.find((function(e){return e.name===P}));return!(null===e||void 0===e||!e.isJob)}return!1}),[S,P]),O=t.tags.some((function(e){return e.key===je.H.ParentRunId})),E=t.tags.find((function(e){return e.key===je.H.Backfill})),A=t.tags.find((function(e){return e.key===je.H.Partition})),z=t.tags.find((function(e){return e.key===je.H.PartitionSet})),L=t.tags.find((function(e){return e.key===je.H.AssetPartitionRangeStart})),F=t.tags.find((function(e){return e.key===je.H.AssetPartitionRangeEnd})),M=y.useState(!1),H=(0,o.Z)(M,2),J=H[0],D=H[1],U=y.useState(!1),V=(0,o.Z)(U,2),B=V[0],K=V[1],q=y.useMemo((function(){var e=[];if(E){var n,i=null!==(n=t.assetSelection)&&void 0!==n&&n.length?"/overview/backfills/".concat(E.value):(0,Ce.it)([{token:"tag",value:"".concat(je.H.Backfill,"=").concat(E.value)}]);e.push({key:E.key,value:E.value,link:i})}return A?e.push(A):z?e.push(z):void 0!==L&&void 0!==F&&e.push(L,F),e}),[null===(n=t.assetSelection)||void 0===n?void 0:n.length,E,A,F,L,z]);return(0,ne.jsxs)(Ze,{highlighted:!!b,onMouseEnter:function(){K(!0)},onMouseLeave:function(){K(!1)},children:[i?(0,ne.jsx)("td",{children:c?(0,ne.jsx)(h.X,{checked:!!s,onChange:function(e){if(e.target instanceof HTMLInputElement){var n=e.target.checked,t=e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift");c&&c({checked:n,shiftKey:t})}}}):null}):null,(0,ne.jsx)("td",{children:(0,ne.jsx)(k.rU,{to:"/runs/".concat(t.id),children:(0,ne.jsx)(x.fv,{children:(0,ee.EI)(t)})})}),(0,ne.jsx)("td",{children:(0,ne.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,ne.jsx)(ee.Zr,{run:t}),O?(0,ne.jsx)("div",{children:(0,ne.jsx)(p.V,{icon:"cached",children:"Re-execution"})}):null]})}),(0,ne.jsxs)("td",{style:{position:"relative"},children:[(0,ne.jsxs)(a.x,{flex:{direction:"column",gap:5},children:[(0,w.pv)(t.pipelineName)?(0,ne.jsx)(T.m,{assetKeys:(0,ee.Bo)(t)}):(0,ne.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,ne.jsx)(R.h,{isJob:_,showIcon:!0,pipelineName:t.pipelineName,pipelineHrefContext:"no-link"}),(0,ne.jsx)(k.rU,{to:S?(0,I.jT)({repoName:S.match.repository.name,repoLocation:S.match.repositoryLocation.name,pipelineName:t.pipelineName,isJob:_}):(0,I.r4)(t.pipelineName),target:"_blank",children:(0,ne.jsx)(d.JO,{name:"open_in_new",color:m.w.Blue500})})]}),(0,ne.jsxs)(a.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:[t.tags.length?(0,ne.jsx)(a.x,{children:(0,ne.jsx)(f.m,{fillColor:m.w.Gray100,label:(0,ne.jsxs)(g.Z,{onClick:function(){D(!0)},children:[t.tags.length," tag",1===t.tags.length?"":"s"]})})}):null,(0,ne.jsx)(Ie,{children:q.length?(0,ne.jsx)(ae.Q,{tags:q,mode:_?"default"!==t.mode?t.mode:null:t.mode,onAddTag:r}):null})]})]}),B&&t.tags.length?(0,ne.jsx)(C.b,{onShortcut:function(){D((function(e){return!e}))},shortcutLabel:"t",shortcutFilter:function(e){return"KeyT"===e.code},children:null},"runtabletags"):null]}),Z?null:(0,ne.jsx)("td",{children:(0,ne.jsx)(ve,{run:t,onAddTag:r})}),(0,ne.jsx)("td",{children:(0,ne.jsx)(ke.M9,{status:t.status,runId:t.id})}),(0,ne.jsx)("td",{children:(0,ne.jsx)(ee.Tw,{run:t})}),l,(0,ne.jsx)("td",{children:(0,ne.jsx)(ue,{run:t,onAddTag:r,additionalActionsForRun:u})}),(0,ne.jsxs)(j.Vq,{isOpen:J,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:function(){D(!1)},children:[(0,ne.jsx)(j.a7,{children:(0,ne.jsx)(ae.Q,{tags:t.tags,mode:_?"default"!==t.mode?t.mode:null:t.mode,onAddTag:r})}),(0,ne.jsx)(j.cN,{topBorder:!0,children:(0,ne.jsx)(v.zx,{intent:"primary",onClick:function(){D(!1)},children:"Close"})})]})]})},Ze=s.ZP.tr.withConfig({displayName:"RunTable__Row",componentId:"sc-18h8t3i-0"})(["",""],(function(e){return e.highlighted?"box-shadow: inset 3px 3px #bfccd6, inset -3px -3px #bfccd6;":null}));function Ne(e){var n=e.top,t=e.bottom;return(0,ne.jsxs)(a.x,{flex:{direction:"column"},padding:{vertical:12},children:[(0,ne.jsx)(a.x,{flex:{alignItems:"center",gap:12},padding:{left:24,right:24},children:n}),t?(0,ne.jsx)(a.x,{margin:{top:12},padding:{left:24,right:12,top:8},border:{side:"top",width:1,color:m.w.KeylineGray},flex:{gap:8},children:t}):null]})}var Ie=s.ZP.div.withConfig({displayName:"RunTable__RunTagsWrapper",componentId:"sc-18h8t3i-1"})(["display:contents;> *{display:contents;}"])},79986:function(e,n,t){t.d(n,{U:function(){return x}});var i=t(33028),r=t(59740),o=t(60319),s=t(85357),c=t(47515),a=t(61623),l=t(32667),d=(t(78193),t(97412)),u=t(35936),h=["icon","intent","text","disabled"],x=function(e){var n=e.icon,t=e.intent,o=e.text,a=e.disabled,l=(0,r.Z)(e,h);return a?(0,u.jsx)(s.sN,{disabled:!0,icon:n,intent:t,text:o}):(0,u.jsx)(p,(0,i.Z)((0,i.Z)({},l),{},{children:(0,u.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.cR)(n,t),(0,u.jsx)("div",{children:o})]})}))},p=(0,o.ZP)(d.rU).withConfig({displayName:"MenuLink__StyledMenuLink",componentId:"sc-1162pbu-0"})(["text-decoration:none;border-radius:4px;display:block;line-height:20px;padding:6px 8px 6px 12px;transition:background-color 50ms,box-shadow 150ms;align-items:flex-start;user-select:none;","{margin-top:2px;}",":first-child{margin-left:-4px;}&&&:link,&&&:visited,&&&:hover,&&&:active{color:",";text-decoration:none;}&&&:hover{background:",";}"],a.a1,a.a1,l.w.Gray900,l.w.Gray100)}}]);
//# sourceMappingURL=380.87f0678e.chunk.js.map
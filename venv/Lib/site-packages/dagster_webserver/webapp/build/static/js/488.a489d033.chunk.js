"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[488],{51664:function(n,t,e){e.d(t,{R:function(){return i}});var i=function(n){return"result"!==n.solid.name?"".concat(n.solid.name,":").concat(n.definition.name):n.solid.name}},85488:function(n,t,e){e.r(t),e.d(t,{layoutOp:function(){return O},layoutOpGraph:function(){return w}});var i=e(68079),o=e(96234),a=e(83975),r=e(51664),u=370,d=52,h=22,f=26,p=0,c=35,s=4,l=13,m=f/2,g=70,y=70,v=50,x=100;function b(n){var t={};return n.forEach((function(n){return n.forEach((function(n){return t[(0,r.R)(n)]=n}))})),Object.values(t)}function w(n,t){var e=new a.graphlib.Graph,i=0,r=x,u=x;t.parentOp&&(i=Math.max(t.parentOp.inputs.length,t.parentOp.outputs.length)*f,r=(u=g+y)+i),e.setGraph({rankdir:"TB",marginx:u,marginy:r}),e.setDefaultEdgeLabel((function(){return{}}));var d=[],h={};n.forEach((function(n){h[n.name]=!0})),n.forEach((function(n){var t=O(n,{x:0,y:0});e.setNode(n.name,{width:t.bounds.width,height:t.bounds.height}),n.inputs.forEach((function(t){t.dependsOn.forEach((function(i){h[i.solid.name]&&h[n.name]&&(e.setEdge({v:i.solid.name,w:n.name},{weight:1}),d.push({from:{point:{x:0,y:0},opName:i.solid.name,edgeName:i.definition.name},to:{point:{x:0,y:0},opName:n.name,edgeName:t.definition.name}}))}))}))})),a.layout(e);var p={},c={};e.nodes().forEach((function(n){var t=e.node(n);t&&(c[n]=t)}));var s=0,m=0;Object.entries(c).forEach((function(t){var e=(0,o.Z)(t,2),i=e[0],a=e[1],r=n.find((function(n){return n.name===i}));if(r){var u=a.x-a.width/2,d=a.y-a.height/2;p[i]=O(r,{x:u,y:d}),s=Math.max(s,u+a.width),m=Math.max(m,d+a.height)}})),e.edges().forEach((function(n){var t=d.find((function(t){return t.from.opName===n.v&&t.to.opName===n.w})),i=e.edge(n).points;t&&i.length>0&&(t.from.point=i[0],t.to.point=i[i.length-1])}));var w={edges:d,nodes:p,width:s+u,height:m+r,parent:null};return t.parentOp&&(w.parent=function(n,t,e){var i={invocationBoundingBox:{x:1,y:1,width:n.width-1,height:n.height-1},bounds:{x:y,y:y+e,width:n.width-2*y,height:n.height-2*(y+e)},mappingLeftEdge:y-20,mappingLeftSpacing:10,inputs:{},outputs:{},dependsOn:E(b(t.inputs.map((function(n){return n.dependsOn}))),-v,n.width),dependedBy:E(b(t.outputs.map((function(n){return n.dependedBy}))),n.height+v,n.width)},o=i.bounds.y+i.bounds.height;return t.inputs.forEach((function(n,t){i.inputs[n.definition.name]={layout:{x:i.bounds.x,y:i.bounds.y-t*f-f,width:0,height:f},collapsed:[],label:!0,port:{x:i.bounds.x+l,y:i.bounds.y-t*f-f/2}}})),t.outputs.forEach((function(n,t){i.outputs[n.definition.name]={layout:{x:i.bounds.x,y:o+t*f,width:0,height:f},collapsed:[],label:!0,port:{x:i.bounds.x+l,y:o+t*f+f/2}}})),i}(w,t.parentOp,i)),w}function E(n,t,e){var i=y+l,o=e-2*i,a=Math.max(200,o/n.length),u=i+Math.min(0,(o-n.length*a)/2),d=a<300?20:0,h={};return n.forEach((function(n,e){var i=1-e%2*2;h[(0,r.R)(n)]={x:u+e*a,y:t+d*i}})),h}function O(n,t){var e=t.y,o=function(n,o,a){var r,d=(0,i.Z)(n).sort((function(n,t){return o(n).localeCompare(o(t))})),h=0,p=null,s={},g=Math.min(c,u/(d.length+1));d.forEach((function(n,i){var o=a(n);o!==p?(p=o,r={port:{x:t.x+h+l,y:e+m},collapsed:[],label:!1,layout:{x:t.x+h,y:e,width:c,height:f}},s[n.definition.name]=r,h+=g):(0===r.collapsed.length&&(h+=15),r.collapsed.push(n.definition.name))}));var y=(u-(h-l+c))/2;return Object.values(s).forEach((function(n){n.layout.x+=y,n.port.x+=y})),e+=f,s},a=function(n){var i={};return n.forEach((function(n){i[n.definition.name]={port:{x:t.x+l,y:e+m},label:!0,collapsed:[],layout:{x:t.x,y:e,width:0,height:f}},e+=f})),i},r=n.inputs.length>s?o(n.inputs,(function(n){return n.definition.name}),(function(n){var t;return(null===(t=n.dependsOn[0])||void 0===t?void 0:t.solid.name)||""})):a(n.inputs),g={x:t.x,y:Math.max(t.y,e-p),width:u,height:d+2*p};e+=d,n.definition.assetNodes.length&&n.definition.description&&(g.height+=h,e+=h);var y=n.outputs.length>s?o(n.outputs,(function(n){var t;return(null===(t=n.dependedBy[0])||void 0===t?void 0:t.definition.name)||""}),(function(n){var t;return(null===(t=n.dependedBy[0])||void 0===t?void 0:t.solid.name)||""})):a(n.outputs);return{bounds:{x:t.x-5,y:t.y-5,width:u+10,height:e-t.y+10},op:g,inputs:r,outputs:y}}},81079:function(n,t,e){function i(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}e.d(t,{Z:function(){return i}})},68079:function(n,t,e){e.d(t,{Z:function(){return r}});var i=e(926);var o=e(81079),a=e(59147);function r(n){return function(n){if(Array.isArray(n))return(0,i.Z)(n)}(n)||(0,o.Z)(n)||(0,a.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=488.a489d033.chunk.js.map
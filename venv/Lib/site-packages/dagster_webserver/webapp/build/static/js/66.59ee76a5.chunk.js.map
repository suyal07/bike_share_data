{"version":3,"file":"static/js/66.59ee76a5.chunk.js","mappings":"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","sources":["../../../node_modules/codemirror/addon/dialog/dialog.js","../../../node_modules/codemirror/addon/hint/show-hint.js","../../../node_modules/codemirror/addon/search/search.js","../../../node_modules/codemirror/addon/search/searchcursor.js","../../../node_modules/codemirror/lib/codemirror.js","../../../node_modules/react-codemirror2/index.js","../../../node_modules/@babel/runtime/helpers/esm/get.js","../../../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../../../node_modules/yaml/browser/dist/nodes/Node.js","../../../node_modules/yaml/browser/dist/visit.js","../../../node_modules/yaml/browser/dist/doc/directives.js","../../../node_modules/yaml/browser/dist/doc/anchors.js","../../../node_modules/yaml/browser/dist/nodes/Alias.js","../../../node_modules/yaml/browser/dist/nodes/toJS.js","../../../node_modules/yaml/browser/dist/nodes/Scalar.js","../../../node_modules/yaml/browser/dist/doc/createNode.js","../../../node_modules/yaml/browser/dist/nodes/Collection.js","../../../node_modules/yaml/browser/dist/stringify/stringifyComment.js","../../../node_modules/yaml/browser/dist/stringify/foldFlowLines.js","../../../node_modules/yaml/browser/dist/stringify/stringifyString.js","../../../node_modules/yaml/browser/dist/stringify/stringify.js","../../../node_modules/yaml/browser/dist/log.js","../../../node_modules/yaml/browser/dist/nodes/addPairToJSMap.js","../../../node_modules/yaml/browser/dist/nodes/Pair.js","../../../node_modules/yaml/browser/dist/stringify/stringifyPair.js","../../../node_modules/yaml/browser/dist/stringify/stringifyCollection.js","../../../node_modules/yaml/browser/dist/nodes/YAMLMap.js","../../../node_modules/yaml/browser/dist/schema/common/map.js","../../../node_modules/yaml/browser/dist/nodes/YAMLSeq.js","../../../node_modules/yaml/browser/dist/schema/common/seq.js","../../../node_modules/yaml/browser/dist/schema/common/string.js","../../../node_modules/yaml/browser/dist/schema/common/null.js","../../../node_modules/yaml/browser/dist/schema/core/bool.js","../../../node_modules/yaml/browser/dist/stringify/stringifyNumber.js","../../../node_modules/yaml/browser/dist/schema/core/float.js","../../../node_modules/yaml/browser/dist/schema/core/int.js","../../../node_modules/yaml/browser/dist/schema/core/schema.js","../../../node_modules/yaml/browser/dist/schema/json/schema.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/binary.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/pairs.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/omap.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/bool.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/float.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/int.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/set.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/timestamp.js","../../../node_modules/yaml/browser/dist/schema/yaml-1.1/schema.js","../../../node_modules/yaml/browser/dist/schema/tags.js","../../../node_modules/yaml/browser/dist/schema/Schema.js","../../../node_modules/yaml/browser/dist/doc/applyReviver.js","../../../node_modules/yaml/browser/dist/doc/Document.js","../../../node_modules/yaml/browser/dist/stringify/stringifyDocument.js","../../../node_modules/yaml/browser/dist/errors.js","../../../node_modules/yaml/browser/dist/compose/resolve-props.js","../../../node_modules/yaml/browser/dist/compose/util-contains-newline.js","../../../node_modules/yaml/browser/dist/compose/util-flow-indent-check.js","../../../node_modules/yaml/browser/dist/compose/util-map-includes.js","../../../node_modules/yaml/browser/dist/compose/resolve-block-map.js","../../../node_modules/yaml/browser/dist/compose/resolve-end.js","../../../node_modules/yaml/browser/dist/compose/resolve-flow-collection.js","../../../node_modules/yaml/browser/dist/compose/compose-collection.js","../../../node_modules/yaml/browser/dist/compose/resolve-block-seq.js","../../../node_modules/yaml/browser/dist/compose/resolve-block-scalar.js","../../../node_modules/yaml/browser/dist/compose/resolve-flow-scalar.js","../../../node_modules/yaml/browser/dist/compose/compose-scalar.js","../../../node_modules/yaml/browser/dist/compose/util-empty-scalar-position.js","../../../node_modules/yaml/browser/dist/compose/compose-node.js","../../../node_modules/yaml/browser/dist/compose/compose-doc.js","../../../node_modules/yaml/browser/dist/compose/composer.js","../../../node_modules/yaml/browser/dist/parse/cst-scalar.js","../../../node_modules/yaml/browser/dist/parse/cst-stringify.js","../../../node_modules/yaml/browser/dist/parse/cst-visit.js","../../../node_modules/yaml/browser/dist/parse/cst.js","../../../node_modules/yaml/browser/dist/parse/lexer.js","../../../node_modules/yaml/browser/dist/parse/line-counter.js","../../../node_modules/yaml/browser/dist/parse/parser.js","../../../node_modules/yaml/browser/dist/public-api.js","../../../node_modules/yaml/browser/index.js"],"sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  function dialogDiv(cm, template, bottom) {\n    var wrap = cm.getWrapperElement();\n    var dialog;\n    dialog = wrap.appendChild(document.createElement(\"div\"));\n    if (bottom)\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-bottom\";\n    else\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-top\";\n\n    if (typeof template == \"string\") {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    CodeMirror.addClass(wrap, 'dialog-opened');\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose)\n      cm.state.currentNotificationClose();\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension(\"openDialog\", function(template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    var dialog = dialogDiv(this, template, options.bottom);\n    var closed = false, me = this;\n    function close(newVal) {\n      if (typeof newVal == 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName(\"input\")[0], button;\n    if (inp) {\n      inp.focus();\n\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput)\n        CodeMirror.on(inp, \"input\", function(e) { options.onInput(e, inp.value, close);});\n      if (options.onKeyUp)\n        CodeMirror.on(inp, \"keyup\", function(e) {options.onKeyUp(e, inp.value, close);});\n\n      CodeMirror.on(inp, \"keydown\", function(e) {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(dialog, \"focusout\", function (evt) {\n        if (evt.relatedTarget !== null) close();\n      });\n    } else if (button = dialog.getElementsByTagName(\"button\")[0]) {\n      CodeMirror.on(button, \"click\", function() {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, \"blur\", close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension(\"openConfirm\", function(template, callbacks, options) {\n    closeNotification(this, null);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var buttons = dialog.getElementsByTagName(\"button\");\n    var closed = false, me = this, blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (var i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function(callback) {\n        CodeMirror.on(b, \"click\", function(e) {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      })(callbacks[i]);\n      CodeMirror.on(b, \"blur\", function() {\n        --blurring;\n        setTimeout(function() { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, \"focus\", function() { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension(\"openNotification\", function(template, options) {\n    closeNotification(this, close);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var closed = false, doneTimer;\n    var duration = options && typeof options.duration !== \"undefined\" ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', function(e) {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration)\n      doneTimer = setTimeout(close, duration);\n\n    return close;\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// declare global: DOMRect\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var HINT_ELEMENT_CLASS        = \"CodeMirror-hint\";\n  var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function(cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    var newOpts = {hint: getHints};\n    if (options) for (var prop in options) newOpts[prop] = options[prop];\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension(\"showHint\", function(options) {\n    options = parseOptions(this, this.getCursor(\"start\"), options);\n    var selections = this.listSelections()\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (var i = 0; i < selections.length; i++)\n        if (selections[i].head.line != selections[i].anchor.line) return;\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    var completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, \"startCompletion\", this);\n    completion.update(true);\n  });\n\n  CodeMirror.defineExtension(\"closeHint\", function() {\n    if (this.state.completionActive) this.state.completionActive.close()\n  })\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor(\"start\");\n    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\n\n    if (this.options.updateOnCursorActivity) {\n      var self = this;\n      cm.on(\"cursorActivity\", this.activityFunc = function() { self.cursorActivity(); });\n    }\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {\n    return setTimeout(fn, 1000/60);\n  };\n  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close: function() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      if (this.options.updateOnCursorActivity) {\n        this.cm.off(\"cursorActivity\", this.activityFunc);\n      }\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\n    },\n\n    active: function() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick: function(data, i) {\n      var completion = data.list[i], self = this;\n      this.cm.operation(function() {\n        if (completion.hint)\n          completion.hint(self.cm, data, completion);\n        else\n          self.cm.replaceRange(getText(completion), completion.from || data.from,\n                               completion.to || data.to, \"complete\");\n        CodeMirror.signal(data, \"pick\", completion);\n        self.cm.scrollIntoView();\n      });\n      if (this.options.closeOnPick) {\n        this.close();\n      }\n    },\n\n    cursorActivity: function() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      var identStart = this.startPos;\n      if(this.data) {\n        identStart = this.data.from;\n      }\n\n      var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\n          pos.ch < identStart.ch || this.cm.somethingSelected() ||\n          (!pos.ch || this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        var self = this;\n        this.debounce = requestAnimationFrame(function() {self.update();});\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update: function(first) {\n      if (this.tick == null) return\n      var self = this, myTick = ++this.tick\n      fetchHints(this.options.hint, this.cm, this.options, function(data) {\n        if (self.tick == myTick) self.finishUpdate(data, first)\n      })\n    },\n\n    finishUpdate: function(data, first) {\n      if (this.data) CodeMirror.signal(this.data, \"update\");\n\n      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n\n      this.data = data;\n\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, \"shown\");\n        }\n      }\n    }\n  };\n\n  function parseOptions(cm, pos, options) {\n    var editor = cm.options.hintOptions;\n    var out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) for (var prop in editor)\n      if (editor[prop] !== undefined) out[prop] = editor[prop];\n    if (options) for (var prop in options)\n      if (options[prop] !== undefined) out[prop] = options[prop];\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\n    return out;\n  }\n\n  function getText(completion) {\n    if (typeof completion == \"string\") return completion;\n    else return completion.text;\n  }\n\n  function buildKeyMap(completion, handle) {\n    var baseMap = {\n      Up: function() {handle.moveFocus(-1);},\n      Down: function() {handle.moveFocus(1);},\n      PageUp: function() {handle.moveFocus(-handle.menuSize() + 1, true);},\n      PageDown: function() {handle.moveFocus(handle.menuSize() - 1, true);},\n      Home: function() {handle.setFocus(0);},\n      End: function() {handle.setFocus(handle.length - 1);},\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close\n    };\n\n    var mac = /Mac/.test(navigator.platform);\n\n    if (mac) {\n      baseMap[\"Ctrl-P\"] = function() {handle.moveFocus(-1);};\n      baseMap[\"Ctrl-N\"] = function() {handle.moveFocus(1);};\n    }\n\n    var custom = completion.options.customKeys;\n    var ourMap = custom ? {} : baseMap;\n    function addBinding(key, val) {\n      var bound;\n      if (typeof val != \"string\")\n        bound = function(cm) { return val(cm, handle); };\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val))\n        bound = baseMap[val];\n      else\n        bound = val;\n      ourMap[key] = bound;\n    }\n    if (custom)\n      for (var key in custom) if (custom.hasOwnProperty(key))\n        addBinding(key, custom[key]);\n    var extra = completion.options.extraKeys;\n    if (extra)\n      for (var key in extra) if (extra.hasOwnProperty(key))\n        addBinding(key, extra[key]);\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === \"LI\" && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function Widget(completion, data) {\n    this.id = \"cm-complete-\" + Math.floor(Math.random(1e6))\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    var widget = this, cm = completion.cm;\n    var ownerDocument = cm.getInputField().ownerDocument;\n    var parentWindow = ownerDocument.defaultView || ownerDocument.parentWindow;\n\n    var hints = this.hints = ownerDocument.createElement(\"ul\");\n    hints.setAttribute(\"role\", \"listbox\")\n    hints.setAttribute(\"aria-expanded\", \"true\")\n    hints.id = this.id\n    var theme = completion.cm.options.theme;\n    hints.className = \"CodeMirror-hints \" + theme;\n    this.selectedHint = data.selectedHint || 0;\n\n    var completions = data.list;\n    for (var i = 0; i < completions.length; ++i) {\n      var elt = hints.appendChild(ownerDocument.createElement(\"li\")), cur = completions[i];\n      var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + \" \" + className;\n      elt.className = className;\n      if (i == this.selectedHint) elt.setAttribute(\"aria-selected\", \"true\")\n      elt.id = this.id + \"-\" + i\n      elt.setAttribute(\"role\", \"option\")\n      if (cur.render) cur.render(elt, data, cur);\n      else elt.appendChild(ownerDocument.createTextNode(cur.displayText || getText(cur)));\n      elt.hintId = i;\n    }\n\n    var container = completion.options.container || ownerDocument.body;\n    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    var left = pos.left, top = pos.bottom, below = true;\n    var offsetLeft = 0, offsetTop = 0;\n    if (container !== ownerDocument.body) {\n      // We offset the cursor position because left and top are relative to the offsetParent's top left corner.\n      var isContainerPositioned = ['absolute', 'relative', 'fixed'].indexOf(parentWindow.getComputedStyle(container).position) !== -1;\n      var offsetParent = isContainerPositioned ? container : container.offsetParent;\n      var offsetParentPosition = offsetParent.getBoundingClientRect();\n      var bodyPosition = ownerDocument.body.getBoundingClientRect();\n      offsetLeft = (offsetParentPosition.left - bodyPosition.left - offsetParent.scrollLeft);\n      offsetTop = (offsetParentPosition.top - bodyPosition.top - offsetParent.scrollTop);\n    }\n    hints.style.left = (left - offsetLeft) + \"px\";\n    hints.style.top = (top - offsetTop) + \"px\";\n\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    var winW = parentWindow.innerWidth || Math.max(ownerDocument.body.offsetWidth, ownerDocument.documentElement.offsetWidth);\n    var winH = parentWindow.innerHeight || Math.max(ownerDocument.body.offsetHeight, ownerDocument.documentElement.offsetHeight);\n    container.appendChild(hints);\n    cm.getInputField().setAttribute(\"aria-autocomplete\", \"list\")\n    cm.getInputField().setAttribute(\"aria-owns\", this.id)\n    cm.getInputField().setAttribute(\"aria-activedescendant\", this.id + \"-\" + this.selectedHint)\n\n    var box = completion.options.moveOnOverlap ? hints.getBoundingClientRect() : new DOMRect();\n    var scrolls = completion.options.paddingForScrollbar ? hints.scrollHeight > hints.clientHeight + 1 : false;\n\n    // Compute in the timeout to avoid reflow on init\n    var startScroll;\n    setTimeout(function() { startScroll = cm.getScrollInfo(); });\n\n    var overlapY = box.bottom - winH;\n    if (overlapY > 0) { // Does not fit below\n      var height = box.bottom - box.top, spaceAbove = box.top - (pos.bottom - pos.top) - 2\n      if (winH - box.top < spaceAbove) { // More room at the top\n        if (height > spaceAbove) hints.style.height = (height = spaceAbove) + \"px\";\n        hints.style.top = ((top = pos.top - height) + offsetTop) + \"px\";\n        below = false;\n      } else {\n        hints.style.height = (winH - box.top - 2) + \"px\";\n      }\n    }\n    var overlapX = box.right - winW;\n    if (scrolls) overlapX += cm.display.nativeBarWidth;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + \"px\";\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = Math.max(pos.left - overlapX - offsetLeft, 0)) + \"px\";\n    }\n    if (scrolls) for (var node = hints.firstChild; node; node = node.nextSibling)\n      node.style.paddingRight = cm.display.nativeBarWidth + \"px\"\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus: function(n, avoidWrap) { widget.changeActive(widget.selectedHint + n, avoidWrap); },\n      setFocus: function(n) { widget.changeActive(n); },\n      menuSize: function() { return widget.screenAmount(); },\n      length: completions.length,\n      close: function() { completion.close(); },\n      pick: function() { widget.pick(); },\n      data: data\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      var closingOnBlur;\n      cm.on(\"blur\", this.onBlur = function() { closingOnBlur = setTimeout(function() { completion.close(); }, 100); });\n      cm.on(\"focus\", this.onFocus = function() { clearTimeout(closingOnBlur); });\n    }\n\n    cm.on(\"scroll\", this.onScroll = function() {\n      var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\n      if (!startScroll) startScroll = cm.getScrollInfo();\n      var newTop = top + startScroll.top - curScroll.top;\n      var point = newTop - (parentWindow.pageYOffset || (ownerDocument.documentElement || ownerDocument.body).scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + \"px\";\n      hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\n    });\n\n    CodeMirror.on(hints, \"dblclick\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {widget.changeActive(t.hintId); widget.pick();}\n    });\n\n    CodeMirror.on(hints, \"click\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, \"mousedown\", function() {\n      setTimeout(function(){cm.focus();}, 20);\n    });\n\n    // The first hint doesn't need to be scrolled to on init\n    var selectedHintRange = this.getSelectedHintRange();\n    if (selectedHintRange.from !== 0 || selectedHintRange.to !== 0) {\n      this.scrollToActive();\n    }\n\n    CodeMirror.signal(data, \"select\", completions[this.selectedHint], hints.childNodes[this.selectedHint]);\n    return true;\n  }\n\n  Widget.prototype = {\n    close: function() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      if (this.hints.parentNode) this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var input = this.completion.cm.getInputField()\n      input.removeAttribute(\"aria-activedescendant\")\n      input.removeAttribute(\"aria-owns\")\n\n      var cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off(\"blur\", this.onBlur);\n        cm.off(\"focus\", this.onFocus);\n      }\n      cm.off(\"scroll\", this.onScroll);\n    },\n\n    disable: function() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var widget = this;\n      this.keyMap = {Enter: function() { widget.picked = true; }};\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick: function() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive: function(i, avoidWrap) {\n      if (i >= this.data.list.length)\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      else if (i < 0)\n        i = avoidWrap ? 0  : this.data.list.length - 1;\n      if (this.selectedHint == i) return;\n      var node = this.hints.childNodes[this.selectedHint];\n      if (node) {\n        node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\n        node.removeAttribute(\"aria-selected\")\n      }\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\n      node.setAttribute(\"aria-selected\", \"true\")\n      this.completion.cm.getInputField().setAttribute(\"aria-activedescendant\", node.id)\n      this.scrollToActive()\n      CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\n    },\n\n    scrollToActive: function() {\n      var selectedHintRange = this.getSelectedHintRange();\n      var node1 = this.hints.childNodes[selectedHintRange.from];\n      var node2 = this.hints.childNodes[selectedHintRange.to];\n      var firstNode = this.hints.firstChild;\n      if (node1.offsetTop < this.hints.scrollTop)\n        this.hints.scrollTop = node1.offsetTop - firstNode.offsetTop;\n      else if (node2.offsetTop + node2.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\n        this.hints.scrollTop = node2.offsetTop + node2.offsetHeight - this.hints.clientHeight + firstNode.offsetTop;\n    },\n\n    screenAmount: function() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    },\n\n    getSelectedHintRange: function() {\n      var margin = this.completion.options.scrollMargin || 0;\n      return {\n        from: Math.max(0, this.selectedHint - margin),\n        to: Math.min(this.data.list.length - 1, this.selectedHint + margin),\n      };\n    }\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers\n    var result = []\n    for (var i = 0; i < helpers.length; i++)\n      if (helpers[i].supportsSelection) result.push(helpers[i])\n    return result\n  }\n\n  function fetchHints(hint, cm, options, callback) {\n    if (hint.async) {\n      hint(cm, callback, options)\n    } else {\n      var result = hint(cm, options)\n      if (result && result.then) result.then(callback)\n      else callback(result)\n    }\n  }\n\n  function resolveAutoHints(cm, pos) {\n    var helpers = cm.getHelpers(pos, \"hint\"), words\n    if (helpers.length) {\n      var resolved = function(cm, callback, options) {\n        var app = applicableHelpers(cm, helpers);\n        function run(i) {\n          if (i == app.length) return callback(null)\n          fetchHints(app[i], cm, options, function(result) {\n            if (result && result.list.length > 0) callback(result)\n            else run(i + 1)\n          })\n        }\n        run(0)\n      }\n      resolved.async = true\n      resolved.supportsSelection = true\n      return resolved\n    } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\n      return function(cm) { return CodeMirror.hint.fromList(cm, {words: words}) }\n    } else if (CodeMirror.hint.anyword) {\n      return function(cm, options) { return CodeMirror.hint.anyword(cm, options) }\n    } else {\n      return function() {}\n    }\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"auto\", {\n    resolve: resolveAutoHints\n  });\n\n  CodeMirror.registerHelper(\"hint\", \"fromList\", function(cm, options) {\n    var cur = cm.getCursor(), token = cm.getTokenAt(cur)\n    var term, from = CodeMirror.Pos(cur.line, token.start), to = cur\n    if (token.start < cur.ch && /\\w/.test(token.string.charAt(cur.ch - token.start - 1))) {\n      term = token.string.substr(0, cur.ch - token.start)\n    } else {\n      term = \"\"\n      from = cur\n    }\n    var found = [];\n    for (var i = 0; i < options.words.length; i++) {\n      var word = options.words[i];\n      if (word.slice(0, term.length) == term)\n        found.push(word);\n    }\n\n    if (found.length) return {list: found, from: from, to: to};\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnPick: true,\n    closeOnUnfocus: true,\n    updateOnCursorActivity: true,\n    completeOnSingleClick: true,\n    container: null,\n    customKeys: null,\n    extraKeys: null,\n    paddingForScrollbar: true,\n    moveOnOverlap: true,\n  };\n\n  CodeMirror.defineOption(\"hintOptions\", null);\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// Define search commands. Depends on dialog.js or another\n// implementation of the openDialog method.\n\n// Replace works a little oddly -- it will do the replace on the next\n// Ctrl-G (or whatever is bound to findNext) press. You prevent a\n// replace by making sure the match is no longer selected when hitting\n// Ctrl-G.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./searchcursor\"), require(\"../dialog/dialog\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./searchcursor\", \"../dialog/dialog\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  // default search panel location\n  CodeMirror.defineOption(\"search\", {bottom: false});\n\n  function searchOverlay(query, caseInsensitive) {\n    if (typeof query == \"string\")\n      query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\"), caseInsensitive ? \"gi\" : \"g\");\n    else if (!query.global)\n      query = new RegExp(query.source, query.ignoreCase ? \"gi\" : \"g\");\n\n    return {token: function(stream) {\n      query.lastIndex = stream.pos;\n      var match = query.exec(stream.string);\n      if (match && match.index == stream.pos) {\n        stream.pos += match[0].length || 1;\n        return \"searching\";\n      } else if (match) {\n        stream.pos = match.index;\n      } else {\n        stream.skipToEnd();\n      }\n    }};\n  }\n\n  function SearchState() {\n    this.posFrom = this.posTo = this.lastQuery = this.query = null;\n    this.overlay = null;\n  }\n\n  function getSearchState(cm) {\n    return cm.state.search || (cm.state.search = new SearchState());\n  }\n\n  function queryCaseInsensitive(query) {\n    return typeof query == \"string\" && query == query.toLowerCase();\n  }\n\n  function getSearchCursor(cm, query, pos) {\n    // Heuristic: if the query string is all lowercase, do a case insensitive search.\n    return cm.getSearchCursor(query, pos, {caseFold: queryCaseInsensitive(query), multiline: true});\n  }\n\n  function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {\n    cm.openDialog(text, onEnter, {\n      value: deflt,\n      selectValueOnOpen: true,\n      closeOnEnter: false,\n      onClose: function() { clearSearch(cm); },\n      onKeyDown: onKeyDown,\n      bottom: cm.options.search.bottom\n    });\n  }\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) cm.openDialog(text, f, {value: deflt, selectValueOnOpen: true, bottom: cm.options.search.bottom});\n    else f(prompt(shortText, deflt));\n  }\n\n  function confirmDialog(cm, text, shortText, fs) {\n    if (cm.openConfirm) cm.openConfirm(text, fs);\n    else if (confirm(shortText)) fs[0]();\n  }\n\n  function parseString(string) {\n    return string.replace(/\\\\([nrt\\\\])/g, function(match, ch) {\n      if (ch == \"n\") return \"\\n\"\n      if (ch == \"r\") return \"\\r\"\n      if (ch == \"t\") return \"\\t\"\n      if (ch == \"\\\\\") return \"\\\\\"\n      return match\n    })\n  }\n\n  function parseQuery(query) {\n    var isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n    if (isRE) {\n      try { query = new RegExp(isRE[1], isRE[2].indexOf(\"i\") == -1 ? \"\" : \"i\"); }\n      catch(e) {} // Not a regular expression after all, do a string search\n    } else {\n      query = parseString(query)\n    }\n    if (typeof query == \"string\" ? query == \"\" : query.test(\"\"))\n      query = /x^/;\n    return query;\n  }\n\n  function startSearch(cm, state, query) {\n    state.queryText = query;\n    state.query = parseQuery(query);\n    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n    cm.addOverlay(state.overlay);\n    if (cm.showMatchesOnScrollbar) {\n      if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n    }\n  }\n\n  function doSearch(cm, rev, persistent, immediate) {\n    var state = getSearchState(cm);\n    if (state.query) return findNext(cm, rev);\n    var q = cm.getSelection() || state.lastQuery;\n    if (q instanceof RegExp && q.source == \"x^\") q = null\n    if (persistent && cm.openDialog) {\n      var hiding = null\n      var searchNext = function(query, event) {\n        CodeMirror.e_stop(event);\n        if (!query) return;\n        if (query != state.queryText) {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n        }\n        if (hiding) hiding.style.opacity = 1\n        findNext(cm, event.shiftKey, function(_, to) {\n          var dialog\n          if (to.line < 3 && document.querySelector &&\n              (dialog = cm.display.wrapper.querySelector(\".CodeMirror-dialog\")) &&\n              dialog.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, \"window\").top)\n            (hiding = dialog).style.opacity = .4\n        })\n      };\n      persistentDialog(cm, getQueryDialog(cm), q, searchNext, function(event, query) {\n        var keyName = CodeMirror.keyName(event)\n        var extra = cm.getOption('extraKeys'), cmd = (extra && extra[keyName]) || CodeMirror.keyMap[cm.getOption(\"keyMap\")][keyName]\n        if (cmd == \"findNext\" || cmd == \"findPrev\" ||\n          cmd == \"findPersistentNext\" || cmd == \"findPersistentPrev\") {\n          CodeMirror.e_stop(event);\n          startSearch(cm, getSearchState(cm), query);\n          cm.execCommand(cmd);\n        } else if (cmd == \"find\" || cmd == \"findPersistent\") {\n          CodeMirror.e_stop(event);\n          searchNext(query, event);\n        }\n      });\n      if (immediate && q) {\n        startSearch(cm, state, q);\n        findNext(cm, rev);\n      }\n    } else {\n      dialog(cm, getQueryDialog(cm), \"Search for:\", q, function(query) {\n        if (query && !state.query) cm.operation(function() {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n          findNext(cm, rev);\n        });\n      });\n    }\n  }\n\n  function findNext(cm, rev, callback) {cm.operation(function() {\n    var state = getSearchState(cm);\n    var cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n    if (!cursor.find(rev)) {\n      cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0));\n      if (!cursor.find(rev)) return;\n    }\n    cm.setSelection(cursor.from(), cursor.to());\n    cm.scrollIntoView({from: cursor.from(), to: cursor.to()}, 20);\n    state.posFrom = cursor.from(); state.posTo = cursor.to();\n    if (callback) callback(cursor.from(), cursor.to())\n  });}\n\n  function clearSearch(cm) {cm.operation(function() {\n    var state = getSearchState(cm);\n    state.lastQuery = state.query;\n    if (!state.query) return;\n    state.query = state.queryText = null;\n    cm.removeOverlay(state.overlay);\n    if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n  });}\n\n  function el(tag, attrs) {\n    var element = tag ? document.createElement(tag) : document.createDocumentFragment();\n    for (var key in attrs) {\n      element[key] = attrs[key];\n    }\n    for (var i = 2; i < arguments.length; i++) {\n      var child = arguments[i]\n      element.appendChild(typeof child == \"string\" ? document.createTextNode(child) : child);\n    }\n    return element;\n  }\n\n  function getQueryDialog(cm)  {\n    var label = el(\"label\", {className: \"CodeMirror-search-label\"},\n                   cm.phrase(\"Search:\"),\n                   el(\"input\", {type: \"text\", \"style\": \"width: 10em\", className: \"CodeMirror-search-field\",\n                                id: \"CodeMirror-search-field\"}));\n    label.setAttribute(\"for\",\"CodeMirror-search-field\");\n    return el(\"\", null, label, \" \",\n              el(\"span\", {style: \"color: #666\", className: \"CodeMirror-search-hint\"},\n                 cm.phrase(\"(Use /re/ syntax for regexp search)\")));\n  }\n  function getReplaceQueryDialog(cm) {\n    return el(\"\", null, \" \",\n              el(\"input\", {type: \"text\", \"style\": \"width: 10em\", className: \"CodeMirror-search-field\"}), \" \",\n              el(\"span\", {style: \"color: #666\", className: \"CodeMirror-search-hint\"},\n                 cm.phrase(\"(Use /re/ syntax for regexp search)\")));\n  }\n  function getReplacementQueryDialog(cm) {\n    return el(\"\", null,\n              el(\"span\", {className: \"CodeMirror-search-label\"}, cm.phrase(\"With:\")), \" \",\n              el(\"input\", {type: \"text\", \"style\": \"width: 10em\", className: \"CodeMirror-search-field\"}));\n  }\n  function getDoReplaceConfirm(cm) {\n    return el(\"\", null,\n              el(\"span\", {className: \"CodeMirror-search-label\"}, cm.phrase(\"Replace?\")), \" \",\n              el(\"button\", {}, cm.phrase(\"Yes\")), \" \",\n              el(\"button\", {}, cm.phrase(\"No\")), \" \",\n              el(\"button\", {}, cm.phrase(\"All\")), \" \",\n              el(\"button\", {}, cm.phrase(\"Stop\")));\n  }\n\n  function replaceAll(cm, query, text) {\n    cm.operation(function() {\n      for (var cursor = getSearchCursor(cm, query); cursor.findNext();) {\n        if (typeof query != \"string\") {\n          var match = cm.getRange(cursor.from(), cursor.to()).match(query);\n          cursor.replace(text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n        } else cursor.replace(text);\n      }\n    });\n  }\n\n  function replace(cm, all) {\n    if (cm.getOption(\"readOnly\")) return;\n    var query = cm.getSelection() || getSearchState(cm).lastQuery;\n    var dialogText = all ? cm.phrase(\"Replace all:\") : cm.phrase(\"Replace:\")\n    var fragment = el(\"\", null,\n                      el(\"span\", {className: \"CodeMirror-search-label\"}, dialogText),\n                      getReplaceQueryDialog(cm))\n    dialog(cm, fragment, dialogText, query, function(query) {\n      if (!query) return;\n      query = parseQuery(query);\n      dialog(cm, getReplacementQueryDialog(cm), cm.phrase(\"Replace with:\"), \"\", function(text) {\n        text = parseString(text)\n        if (all) {\n          replaceAll(cm, query, text)\n        } else {\n          clearSearch(cm);\n          var cursor = getSearchCursor(cm, query, cm.getCursor(\"from\"));\n          var advance = function() {\n            var start = cursor.from(), match;\n            if (!(match = cursor.findNext())) {\n              cursor = getSearchCursor(cm, query);\n              if (!(match = cursor.findNext()) ||\n                  (start && cursor.from().line == start.line && cursor.from().ch == start.ch)) return;\n            }\n            cm.setSelection(cursor.from(), cursor.to());\n            cm.scrollIntoView({from: cursor.from(), to: cursor.to()});\n            confirmDialog(cm, getDoReplaceConfirm(cm), cm.phrase(\"Replace?\"),\n                          [function() {doReplace(match);}, advance,\n                           function() {replaceAll(cm, query, text)}]);\n          };\n          var doReplace = function(match) {\n            cursor.replace(typeof query == \"string\" ? text :\n                           text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n            advance();\n          };\n          advance();\n        }\n      });\n    });\n  }\n\n  CodeMirror.commands.find = function(cm) {clearSearch(cm); doSearch(cm);};\n  CodeMirror.commands.findPersistent = function(cm) {clearSearch(cm); doSearch(cm, false, true);};\n  CodeMirror.commands.findPersistentNext = function(cm) {doSearch(cm, false, true, true);};\n  CodeMirror.commands.findPersistentPrev = function(cm) {doSearch(cm, true, true, true);};\n  CodeMirror.commands.findNext = doSearch;\n  CodeMirror.commands.findPrev = function(cm) {doSearch(cm, true);};\n  CodeMirror.commands.clearSearch = clearSearch;\n  CodeMirror.commands.replace = replace;\n  CodeMirror.commands.replaceAll = function(cm) {replace(cm, true);};\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n  var Pos = CodeMirror.Pos\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\")\n      + (regexp.global ? \"g\" : \"\")\n      + (regexp.multiline ? \"m\" : \"\")\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp), target = current\n    for (var i = 0; i < flags.length; i++) if (target.indexOf(flags.charAt(i)) == -1)\n      target += flags.charAt(i)\n    return current == target ? regexp : new RegExp(regexp.source, target)\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source)\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch\n      var string = doc.getLine(line), match = regexp.exec(string)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start)\n\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunk = 1\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break\n        var curLine = doc.getLine(line++)\n        string = string == null ? curLine : string + \"\\n\" + curLine\n      }\n      chunk = chunk * 2\n      regexp.lastIndex = start.ch\n      var match = regexp.exec(string)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match, from = 0\n    while (from <= string.length) {\n      regexp.lastIndex = from\n      var newMatch = regexp.exec(string)\n      if (!newMatch) break\n      var end = newMatch.index + newMatch[0].length\n      if (end > string.length - endMargin) break\n      if (!match || end > match.index + match[0].length)\n        match = newMatch\n      from = newMatch.index + 1\n    }\n    return match\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line)\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start)\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunkSize = 1, endMargin = doc.getLine(start.line).length - start.ch\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--)\n        string = string == null ? curLine : curLine + \"\\n\" + string\n      }\n      chunkSize *= 2\n\n      var match = lastMatchIn(string, regexp, endMargin)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = line + before.length, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  var doFold, noFold\n  if (String.prototype.normalize) {\n    doFold = function(str) { return str.normalize(\"NFD\").toLowerCase() }\n    noFold = function(str) { return str.normalize(\"NFD\") }\n  } else {\n    doFold = function(str) { return str.toLowerCase() }\n    noFold = function(str) { return str }\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid)).length\n      if (len == pos) return mid\n      else if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch), string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)}\n      } else {\n        var cutFrom = string.length - lines[0].length\n        if (string.slice(cutFrom) != lines[0]) continue search\n        for (var i = 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search\n        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1]\n        if (endString.slice(0, lastLine.length) != lastLine) continue search\n        return {from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n                to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {from: Pos(line, adjustPos(orig, string, found, fold)),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))}\n      } else {\n        var lastLine = lines[lines.length - 1]\n        if (string.slice(0, lastLine.length) != lastLine) continue search\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search\n        var top = doc.getLine(line + 1 - lines.length), topString = fold(top)\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n        return {from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n                to: Pos(line, adjustPos(orig, string, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false\n    this.afterEmptyMatch = false\n    this.doc = doc\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0)\n    this.pos = {from: pos, to: pos}\n\n    var caseFold\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options\n      options = null\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false\n      this.matches = function(reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold)\n      }\n    } else {\n      query = ensureFlags(query, \"gm\")\n      if (!options || options.multiline !== false)\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      else\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false)},\n    findPrevious: function() {return this.find(true)},\n\n    find: function(reverse) {\n      var head = this.doc.clipPos(reverse ? this.pos.from : this.pos.to);\n      if (this.afterEmptyMatch && this.atOccurrence) {\n        // do not return the same 0 width match twice\n        head = Pos(head.line, head.ch)\n        if (reverse) {\n          head.ch--;\n          if (head.ch < 0) {\n            head.line--;\n            head.ch = (this.doc.getLine(head.line) || \"\").length;\n          }\n        } else {\n          head.ch++;\n          if (head.ch > (this.doc.getLine(head.line) || \"\").length) {\n            head.ch = 0;\n            head.line++;\n          }\n        }\n        if (CodeMirror.cmpPos(head, this.doc.clipPos(head)) != 0) {\n           return this.atOccurrence = false\n        }\n      }\n      var result = this.matches(reverse, head)\n      this.afterEmptyMatch = result && CodeMirror.cmpPos(result.from, result.to) == 0\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {from: end, to: end}\n        return this.atOccurrence = false\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from},\n    to: function() {if (this.atOccurrence) return this.pos.to},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold)\n  })\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold)\n  })\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = []\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold)\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break\n      ranges.push({anchor: cur.from(), head: cur.to()})\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0)\n  })\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// This is CodeMirror (https://codemirror.net/5), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\/(\\d+)/.exec(userAgent);\n  var chrome_version = chrome && +chrome[1];\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt(doc) {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = doc.activeElement;\n    } catch(e) {\n      activeElement = doc.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function doc(cm) { return cm.display.wrapper.ownerDocument }\n\n  function win(cm) { return doc(cm).defaultView }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n\n  // Add a span to a line.\n  function addMarkedSpan(line, span, op) {\n    var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet));\n    if (inThisOp && line.markedSpans && inThisOp.has(line.markedSpans)) {\n      line.markedSpans.push(span);\n    } else {\n      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n      if (inThisOp) { inThisOp.add(line.markedSpans); }\n    }\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      gutterWrap.setAttribute(\"aria-hidden\", \"true\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++)\n        { if (lineView.rest[i] == line)\n          { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n      for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n        { if (lineNo(lineView.rest[i$1]) > lineN)\n          { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n    }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX(doc) {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(doc.body.getBoundingClientRect().left - parseInt(getComputedStyle(doc.body).marginLeft)) }\n    return doc.defaultView.pageXOffset || (doc.documentElement || doc.body).scrollLeft\n  }\n  function pageScrollY(doc) {\n    if (chrome && android) { return -(doc.body.getBoundingClientRect().top - parseInt(getComputedStyle(doc.body).marginTop)) }\n    return doc.defaultView.pageYOffset || (doc.documentElement || doc.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var ref = visualLine(lineObj);\n    var widgets = ref.widgets;\n    var height = 0;\n    if (widgets) { for (var i = 0; i < widgets.length; ++i) { if (widgets[i].above)\n      { height += widgetHeight(widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY(doc(cm)));\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX(doc(cm)));\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX(doc(cm));\n      top -= pageScrollY(doc(cm));\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    var customCursor = cm.options.$customCursor;\n    if (customCursor) { primary = true; }\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (customCursor) {\n        var head = customCursor(cm, range);\n        if (head) { drawSelectionCursor(cm, head, curFragment); }\n      } else if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (/\\bcm-fat-cursor\\b/.test(cm.getWrapperElement().className)) {\n      var charPos = charCoords(cm, head, \"div\", null, null);\n      var width = charPos.right - charPos.left;\n      cursor.style.width = (width > 0 ? width : cm.defaultCharWidth()) + \"px\";\n    }\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.hasFocus()) {\n      cm.display.input.focus();\n      if (!cm.state.focused) { onFocus(cm); }\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      if (cm.state.focused) { onBlur(cm); }\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent && !cm.state.draggingText) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    var viewTop = Math.max(0, display.scroller.getBoundingClientRect().top);\n    var oldHeight = display.lineDiv.getBoundingClientRect().top;\n    var mustScroll = 0;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      oldHeight += cur.line.height;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        if (oldHeight < viewTop) { mustScroll -= diff; }\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n    if (Math.abs(mustScroll) > 2) { display.scroller.scrollTop += mustScroll; }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    var doc = display.wrapper.ownerDocument;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (doc.defaultView.innerHeight || doc.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.scrollTop = 0;\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.visibility = this.vert.style.visibility = \"hidden\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.visibility = \"\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.visibility = \"hidden\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId,          // Unique ID\n      markArrays: null         // Used by addMarkedSpan\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt(doc(cm));\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt(doc(cm));\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = win(cm).getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt(snapshot.activeElt.ownerDocument)) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var doc = snapshot.activeElt.ownerDocument;\n      var sel = doc.defaultView.getSelection(), range = doc.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n    // Send an event to consumers responding to changes in gutter width.\n    signalLater(display, \"gutterChanged\", display);\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n    // See #6982. FIXME remove when this has been fixed for a while in Chrome\n    if (chrome && chrome_version >= 105) { d.wrapper.style.clipPath = \"inset(0px)\"; }\n\n    // This attribute is respected by automatic translation systems such as Google Translate,\n    // and may also be respected by tools used by human translators.\n    d.wrapper.setAttribute('translate', 'no');\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    // On Chrome 102, viewport updates somehow stop wheel-based\n    // scrolling. Turning off pointer events during the scroll seems\n    // to avoid the issue.\n    if (chrome && chrome_version == 102) {\n      if (cm.display.chromeScrollHack == null) { cm.display.sizer.style.pointerEvents = \"none\"; }\n      else { clearTimeout(cm.display.chromeScrollHack); }\n      cm.display.chromeScrollHack = setTimeout(function () {\n        cm.display.chromeScrollHack = null;\n        cm.display.sizer.style.pointerEvents = \"\";\n      }, 100);\n    }\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n    var pixelsPerUnit = wheelPixelsPerUnit;\n    if (e.deltaMode === 0) {\n      dx = e.deltaX;\n      dy = e.deltaY;\n      pixelsPerUnit = 1;\n    }\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && pixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * pixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * pixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && pixelsPerUnit != null) {\n      var pixels = dy * pixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20 && e.deltaMode !== 0) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    cm.options.direction = doc.direction;\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(prev) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = prev ? prev.undoDepth : Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\")\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = range.head == range.anchor ? newAnchor : skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp);\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      if (lineSep === '') { return lines.join('') }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head || ranges[i].anchor)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\", \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\", \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt(doc(cm));\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    win(cm).focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(doc(cm)); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      if (cm.state.delayingBlurEvent) {\n        if (cm.hasFocus()) { cm.state.delayingBlurEvent = false; }\n        else { delayBlurEvent(cm); }\n      }\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { return display.input.focus(); }, 20);\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    if (ie) { delayBlurEvent(cm); }\n    var display = cm.display, doc$1 = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc$1.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc$1.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc$1.sel.primary();\n      ourIndex = doc$1.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc$1, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc$1.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc$1, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc$1, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc$1.sel;\n    } else {\n      replaceOneSelection(doc$1, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc$1, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc$1, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc$1, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc$1, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc$1, anchor), head));\n        setSelection(doc$1, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt(doc(cm));\n        extendTo(cur);\n        var visible = visibleLines(display, doc$1);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc$1.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\u202d\\u202e\\u2066\\u2067\\u2069\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput && cm.hasFocus())\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"on\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"on\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){win(this).focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt(doc(this)) },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));\n        if (isNaN(ch)) {\n          next = null;\n        } else {\n          var astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF;\n          next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);\n        }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, win(cm).innerHeight || doc(cm).documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    div.contentEditable = true;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      disableBrowserMagic(te);\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = activeElt(div.ownerDocument);\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = activeElt(this.div.ownerDocument) == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt(this.div.ownerDocument) != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n      var this$1 = this;\n\n    var input = this;\n    if (this.selectionInEditor())\n      { setTimeout(function () { return this$1.pollSelection(); }, 20); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n    this.resetting = false;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n    var opts = this.cm.options;\n    disableBrowserMagic(this.textarea, opts.spellcheck, opts.autocorrect, opts.autocapitalize);\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing && typing) { return }\n    var cm = this.cm;\n    this.resetting = true;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n    this.resetting = false;\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt(this.textarea.ownerDocument) != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || this.resetting || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = te.ownerDocument.defaultView.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { te.ownerDocument.defaultView.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt(textarea.ownerDocument);\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, */) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.65.13\";\n\n  return CodeMirror;\n\n})));\n","'use strict';\n\nfunction _extends() {\n  _extends = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\n\nvar __extends = void 0 && (void 0).__extends || function() {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    }\n    instanceof Array && function(d, b) {\n      d.__proto__ = b;\n    } || function(d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function(d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.UnControlled = exports.Controlled = void 0;\n\nvar React = require('react');\n\nvar SERVER_RENDERED = typeof navigator === 'undefined' || global['PREVENT_CODEMIRROR_RENDER'] === true;\nvar cm;\n\nif (!SERVER_RENDERED) {\n  cm = require('codemirror');\n}\n\nvar Helper = function() {\n  function Helper() {}\n\n  Helper.equals = function(x, y) {\n    var _this = this;\n\n    var ok = Object.keys,\n      tx = _typeof(x),\n      ty = _typeof(y);\n\n    return x && y && tx === 'object' && tx === ty ? ok(x).length === ok(y).length && ok(x).every(function(key) {\n      return _this.equals(x[key], y[key]);\n    }) : x === y;\n  };\n\n  return Helper;\n}();\n\nvar Shared = function() {\n  function Shared(editor, props) {\n    this.editor = editor;\n    this.props = props;\n  }\n\n  Shared.prototype.delegateCursor = function(position, scroll, focus) {\n    var doc = this.editor.getDoc();\n\n    if (focus) {\n      this.editor.focus();\n    }\n\n    scroll ? doc.setCursor(position) : doc.setCursor(position, null, {\n      scroll: false\n    });\n  };\n\n  Shared.prototype.delegateScroll = function(coordinates) {\n    this.editor.scrollTo(coordinates.x, coordinates.y);\n  };\n\n  Shared.prototype.delegateSelection = function(ranges, focus) {\n    var doc = this.editor.getDoc();\n    doc.setSelections(ranges);\n\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n\n  Shared.prototype.apply = function(props) {\n    if (props && props.selection && props.selection.ranges) {\n      this.delegateSelection(props.selection.ranges, props.selection.focus || false);\n    }\n\n    if (props && props.cursor) {\n      this.delegateCursor(props.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n\n    if (props && props.scroll) {\n      this.delegateScroll(props.scroll);\n    }\n  };\n\n  Shared.prototype.applyNext = function(props, next, preserved) {\n    if (props && props.selection && props.selection.ranges) {\n      if (next && next.selection && next.selection.ranges && !Helper.equals(props.selection.ranges, next.selection.ranges)) {\n        this.delegateSelection(next.selection.ranges, next.selection.focus || false);\n      }\n    }\n\n    if (props && props.cursor) {\n      if (next && next.cursor && !Helper.equals(props.cursor, next.cursor)) {\n        this.delegateCursor(preserved.cursor || next.cursor, next.autoScroll || false, next.autoCursor || false);\n      }\n    }\n\n    if (props && props.scroll) {\n      if (next && next.scroll && !Helper.equals(props.scroll, next.scroll)) {\n        this.delegateScroll(next.scroll);\n      }\n    }\n  };\n\n  Shared.prototype.applyUserDefined = function(props, preserved) {\n    if (preserved && preserved.cursor) {\n      this.delegateCursor(preserved.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n  };\n\n  Shared.prototype.wire = function(props) {\n    var _this = this;\n\n    Object.keys(props || {}).filter(function(p) {\n      return /^on/.test(p);\n    }).forEach(function(prop) {\n      switch (prop) {\n        case 'onBlur': {\n          _this.editor.on('blur', function(cm, event) {\n            _this.props.onBlur(_this.editor, event);\n          });\n        }\n        break;\n\n      case 'onContextMenu': {\n        _this.editor.on('contextmenu', function(cm, event) {\n          _this.props.onContextMenu(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onCopy': {\n        _this.editor.on('copy', function(cm, event) {\n          _this.props.onCopy(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onCursor': {\n        _this.editor.on('cursorActivity', function(cm) {\n          _this.props.onCursor(_this.editor, _this.editor.getDoc().getCursor());\n        });\n      }\n      break;\n\n      case 'onCursorActivity': {\n        _this.editor.on('cursorActivity', function(cm) {\n          _this.props.onCursorActivity(_this.editor);\n        });\n      }\n      break;\n\n      case 'onCut': {\n        _this.editor.on('cut', function(cm, event) {\n          _this.props.onCut(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onDblClick': {\n        _this.editor.on('dblclick', function(cm, event) {\n          _this.props.onDblClick(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onDragEnter': {\n        _this.editor.on('dragenter', function(cm, event) {\n          _this.props.onDragEnter(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onDragLeave': {\n        _this.editor.on('dragleave', function(cm, event) {\n          _this.props.onDragLeave(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onDragOver': {\n        _this.editor.on('dragover', function(cm, event) {\n          _this.props.onDragOver(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onDragStart': {\n        _this.editor.on('dragstart', function(cm, event) {\n          _this.props.onDragStart(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onDrop': {\n        _this.editor.on('drop', function(cm, event) {\n          _this.props.onDrop(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onFocus': {\n        _this.editor.on('focus', function(cm, event) {\n          _this.props.onFocus(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onGutterClick': {\n        _this.editor.on('gutterClick', function(cm, lineNumber, gutter, event) {\n          _this.props.onGutterClick(_this.editor, lineNumber, gutter, event);\n        });\n      }\n      break;\n\n      case 'onInputRead': {\n        _this.editor.on('inputRead', function(cm, EditorChangeEvent) {\n          _this.props.onInputRead(_this.editor, EditorChangeEvent);\n        });\n      }\n      break;\n\n      case 'onKeyDown': {\n        _this.editor.on('keydown', function(cm, event) {\n          _this.props.onKeyDown(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onKeyHandled': {\n        _this.editor.on('keyHandled', function(cm, key, event) {\n          _this.props.onKeyHandled(_this.editor, key, event);\n        });\n      }\n      break;\n\n      case 'onKeyPress': {\n        _this.editor.on('keypress', function(cm, event) {\n          _this.props.onKeyPress(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onKeyUp': {\n        _this.editor.on('keyup', function(cm, event) {\n          _this.props.onKeyUp(_this.editor, event);\n        });\n      }\n      break;\n\n      case 'onMouseDown': {\n        _this.editor.on('mousedown', function(cm, event) {\n          _this.props.onMouseDown(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onPaste': {\n        _this.editor.on('paste', function(cm, event) {\n          _this.props.onPaste(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onRenderLine': {\n        _this.editor.on('renderLine', function(cm, line, element) {\n          _this.props.onRenderLine(_this.editor, line, element);\n        });\n\n        break;\n      }\n\n      case 'onScroll': {\n        _this.editor.on('scroll', function(cm) {\n          _this.props.onScroll(_this.editor, _this.editor.getScrollInfo());\n        });\n      }\n      break;\n\n      case 'onSelection': {\n        _this.editor.on('beforeSelectionChange', function(cm, data) {\n          _this.props.onSelection(_this.editor, data);\n        });\n      }\n      break;\n\n      case 'onTouchStart': {\n        _this.editor.on('touchstart', function(cm, event) {\n          _this.props.onTouchStart(_this.editor, event);\n        });\n\n        break;\n      }\n\n      case 'onUpdate': {\n        _this.editor.on('update', function(cm) {\n          _this.props.onUpdate(_this.editor);\n        });\n      }\n      break;\n\n      case 'onViewportChange': {\n        _this.editor.on('viewportChange', function(cm, from, to) {\n          _this.props.onViewportChange(_this.editor, from, to);\n        });\n      }\n      break;\n      }\n    });\n  };\n\n  return Shared;\n}();\n\nvar Controlled = function(_super) {\n  __extends(Controlled, _super);\n\n  function Controlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedNext = false;\n    _this.appliedUserDefined = false;\n    _this.deferred = null;\n    _this.emulating = false;\n    _this.hydrated = false;\n\n    _this.initCb = function() {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n    return _this;\n  }\n\n  Controlled.prototype.hydrate = function(props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function(key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function(key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n\n            _this.mirror.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      this.deferred ? this.resolveChange(props.value) : this.initChange(props.value || '');\n    }\n\n    this.hydrated = true;\n  };\n\n  Controlled.prototype.initChange = function(value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n    var lastLine = doc.lastLine();\n    var lastChar = doc.getLine(doc.lastLine()).length;\n    doc.replaceRange(value || '', {\n      line: 0,\n      ch: 0\n    }, {\n      line: lastLine,\n      ch: lastChar\n    });\n    this.mirror.setValue(value);\n    doc.clearHistory();\n    this.mirror.clearHistory();\n    this.emulating = false;\n  };\n\n  Controlled.prototype.resolveChange = function(value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n\n    if (this.deferred.origin === 'undo') {\n      doc.undo();\n    } else if (this.deferred.origin === 'redo') {\n      doc.redo();\n    } else {\n      doc.replaceRange(this.deferred.text, this.deferred.from, this.deferred.to, this.deferred.origin);\n    }\n\n    if (value && value !== doc.getValue()) {\n      var cursor = doc.getCursor();\n      doc.setValue(value);\n      doc.setCursor(cursor);\n    }\n\n    this.emulating = false;\n    this.deferred = null;\n  };\n\n  Controlled.prototype.mirrorChange = function(deferred) {\n    var doc = this.editor.getDoc();\n\n    if (deferred.origin === 'undo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.undo();\n    } else if (deferred.origin === 'redo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.redo();\n    } else {\n      this.mirror.replaceRange(deferred.text, deferred.from, deferred.to, deferred.origin);\n    }\n\n    return this.mirror.getValue();\n  };\n\n  Controlled.prototype.componentDidMount = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref, this.props.options);\n    this.shared = new Shared(this.editor, this.props);\n    this.mirror = cm(function() {}, this.props.options);\n    this.editor.on('electricInput', function() {\n      _this.mirror.setHistory(_this.editor.getDoc().getHistory());\n    });\n    this.editor.on('cursorActivity', function() {\n      _this.mirror.setCursor(_this.editor.getDoc().getCursor());\n    });\n    this.editor.on('beforeChange', function(cm, data) {\n      if (_this.emulating) {\n        return;\n      }\n\n      data.cancel();\n      _this.deferred = data;\n\n      var phantomChange = _this.mirrorChange(_this.deferred);\n\n      if (_this.props.onBeforeChange) _this.props.onBeforeChange(_this.editor, _this.deferred, phantomChange);\n    });\n    this.editor.on('change', function(cm, data) {\n      if (!_this.mounted) {\n        return;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n\n    if (this.editor.getOption('autofocus')) {\n      this.editor.focus();\n    }\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  Controlled.prototype.componentDidUpdate = function(prevProps) {\n    if (SERVER_RENDERED) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (this.props.value !== prevProps.value) {\n      this.hydrated = false;\n    }\n\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(this.props);\n\n    if (!this.appliedNext) {\n      this.shared.applyNext(prevProps, this.props, preserved);\n      this.appliedNext = true;\n    }\n\n    this.shared.applyUserDefined(prevProps, preserved);\n    this.appliedUserDefined = true;\n  };\n\n  Controlled.prototype.componentWillUnmount = function() {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  Controlled.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n    return !SERVER_RENDERED;\n  };\n\n  Controlled.prototype.render = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 ' + this.props.className : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return Controlled;\n}(React.Component);\n\nexports.Controlled = Controlled;\n\nvar UnControlled = function(_super) {\n  __extends(UnControlled, _super);\n\n  function UnControlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedUserDefined = false;\n    _this.continueChange = false;\n    _this.detached = false;\n    _this.hydrated = false;\n\n    _this.initCb = function() {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n\n    _this.onBeforeChangeCb = function() {\n      _this.continueChange = true;\n    };\n\n    return _this;\n  }\n\n  UnControlled.prototype.hydrate = function(props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function(key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function(key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      var doc = this.editor.getDoc();\n      var lastLine = doc.lastLine();\n      var lastChar = doc.getLine(doc.lastLine()).length;\n      doc.replaceRange(props.value || '', {\n        line: 0,\n        ch: 0\n      }, {\n        line: lastLine,\n        ch: lastChar\n      });\n    }\n\n    this.hydrated = true;\n  };\n\n  UnControlled.prototype.componentDidMount = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n    this.detached = this.props.detach === true;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref, this.props.options);\n    this.shared = new Shared(this.editor, this.props);\n    this.editor.on('beforeChange', function(cm, data) {\n      if (_this.props.onBeforeChange) {\n        _this.props.onBeforeChange(_this.editor, data, _this.editor.getValue(), _this.onBeforeChangeCb);\n      }\n    });\n    this.editor.on('change', function(cm, data) {\n      if (!_this.mounted || !_this.props.onChange) {\n        return;\n      }\n\n      if (_this.props.onBeforeChange) {\n        if (_this.continueChange) {\n          _this.props.onChange(_this.editor, data, _this.editor.getValue());\n        }\n      } else {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n    this.editor.getDoc().clearHistory();\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  UnControlled.prototype.componentDidUpdate = function(prevProps) {\n    if (this.detached && this.props.detach === false) {\n      this.detached = false;\n\n      if (prevProps.editorDidAttach) {\n        prevProps.editorDidAttach(this.editor);\n      }\n    }\n\n    if (!this.detached && this.props.detach === true) {\n      this.detached = true;\n\n      if (prevProps.editorDidDetach) {\n        prevProps.editorDidDetach(this.editor);\n      }\n    }\n\n    if (SERVER_RENDERED || this.detached) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (this.props.value !== prevProps.value) {\n      this.hydrated = false;\n      this.applied = false;\n      this.appliedUserDefined = false;\n    }\n\n    if (!prevProps.autoCursor && prevProps.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(this.props);\n\n    if (!this.applied) {\n      this.shared.apply(prevProps);\n      this.applied = true;\n    }\n\n    if (!this.appliedUserDefined) {\n      this.shared.applyUserDefined(prevProps, preserved);\n      this.appliedUserDefined = true;\n    }\n  };\n\n  UnControlled.prototype.componentWillUnmount = function() {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  UnControlled.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n    var update = true;\n    if (SERVER_RENDERED) update = false;\n    if (this.detached && nextProps.detach) update = false;\n    return update;\n  };\n\n  UnControlled.prototype.render = function() {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 ' + this.props.className : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return UnControlled;\n}(React.Component);\n\nexports.UnControlled = UnControlled;","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","const ALIAS = Symbol.for('yaml.alias');\nconst DOC = Symbol.for('yaml.document');\nconst MAP = Symbol.for('yaml.map');\nconst PAIR = Symbol.for('yaml.pair');\nconst SCALAR = Symbol.for('yaml.scalar');\nconst SEQ = Symbol.for('yaml.seq');\nconst NODE_TYPE = Symbol.for('yaml.node.type');\nconst isAlias = (node) => !!node && typeof node === 'object' && node[NODE_TYPE] === ALIAS;\nconst isDocument = (node) => !!node && typeof node === 'object' && node[NODE_TYPE] === DOC;\nconst isMap = (node) => !!node && typeof node === 'object' && node[NODE_TYPE] === MAP;\nconst isPair = (node) => !!node && typeof node === 'object' && node[NODE_TYPE] === PAIR;\nconst isScalar = (node) => !!node && typeof node === 'object' && node[NODE_TYPE] === SCALAR;\nconst isSeq = (node) => !!node && typeof node === 'object' && node[NODE_TYPE] === SEQ;\nfunction isCollection(node) {\n    if (node && typeof node === 'object')\n        switch (node[NODE_TYPE]) {\n            case MAP:\n            case SEQ:\n                return true;\n        }\n    return false;\n}\nfunction isNode(node) {\n    if (node && typeof node === 'object')\n        switch (node[NODE_TYPE]) {\n            case ALIAS:\n            case MAP:\n            case SCALAR:\n            case SEQ:\n                return true;\n        }\n    return false;\n}\nconst hasAnchor = (node) => (isScalar(node) || isCollection(node)) && !!node.anchor;\nclass NodeBase {\n    constructor(type) {\n        Object.defineProperty(this, NODE_TYPE, { value: type });\n    }\n    /** Create a copy of this node.  */\n    clone() {\n        const copy = Object.create(Object.getPrototypeOf(this), Object.getOwnPropertyDescriptors(this));\n        if (this.range)\n            copy.range = this.range.slice();\n        return copy;\n    }\n}\n\nexport { ALIAS, DOC, MAP, NODE_TYPE, NodeBase, PAIR, SCALAR, SEQ, hasAnchor, isAlias, isCollection, isDocument, isMap, isNode, isPair, isScalar, isSeq };\n","import { isDocument, isNode, isPair, isCollection, isMap, isSeq, isScalar, isAlias } from './nodes/Node.js';\n\nconst BREAK = Symbol('break visit');\nconst SKIP = Symbol('skip children');\nconst REMOVE = Symbol('remove node');\n/**\n * Apply a visitor to an AST node or document.\n *\n * Walks through the tree (depth-first) starting from `node`, calling a\n * `visitor` function with three arguments:\n *   - `key`: For sequence values and map `Pair`, the node's index in the\n *     collection. Within a `Pair`, `'key'` or `'value'`, correspondingly.\n *     `null` for the root node.\n *   - `node`: The current node.\n *   - `path`: The ancestry of the current node.\n *\n * The return value of the visitor may be used to control the traversal:\n *   - `undefined` (default): Do nothing and continue\n *   - `visit.SKIP`: Do not visit the children of this node, continue with next\n *     sibling\n *   - `visit.BREAK`: Terminate traversal completely\n *   - `visit.REMOVE`: Remove the current node, then continue with the next one\n *   - `Node`: Replace the current node, then continue by visiting it\n *   - `number`: While iterating the items of a sequence or map, set the index\n *     of the next step. This is useful especially if the index of the current\n *     node has changed.\n *\n * If `visitor` is a single function, it will be called with all values\n * encountered in the tree, including e.g. `null` values. Alternatively,\n * separate visitor functions may be defined for each `Map`, `Pair`, `Seq`,\n * `Alias` and `Scalar` node. To define the same visitor function for more than\n * one node type, use the `Collection` (map and seq), `Value` (map, seq & scalar)\n * and `Node` (alias, map, seq & scalar) targets. Of all these, only the most\n * specific defined one will be used for each node.\n */\nfunction visit(node, visitor) {\n    const visitor_ = initVisitor(visitor);\n    if (isDocument(node)) {\n        const cd = visit_(null, node.contents, visitor_, Object.freeze([node]));\n        if (cd === REMOVE)\n            node.contents = null;\n    }\n    else\n        visit_(null, node, visitor_, Object.freeze([]));\n}\n// Without the `as symbol` casts, TS declares these in the `visit`\n// namespace using `var`, but then complains about that because\n// `unique symbol` must be `const`.\n/** Terminate visit traversal completely */\nvisit.BREAK = BREAK;\n/** Do not visit the children of the current node */\nvisit.SKIP = SKIP;\n/** Remove the current node */\nvisit.REMOVE = REMOVE;\nfunction visit_(key, node, visitor, path) {\n    const ctrl = callVisitor(key, node, visitor, path);\n    if (isNode(ctrl) || isPair(ctrl)) {\n        replaceNode(key, path, ctrl);\n        return visit_(key, ctrl, visitor, path);\n    }\n    if (typeof ctrl !== 'symbol') {\n        if (isCollection(node)) {\n            path = Object.freeze(path.concat(node));\n            for (let i = 0; i < node.items.length; ++i) {\n                const ci = visit_(i, node.items[i], visitor, path);\n                if (typeof ci === 'number')\n                    i = ci - 1;\n                else if (ci === BREAK)\n                    return BREAK;\n                else if (ci === REMOVE) {\n                    node.items.splice(i, 1);\n                    i -= 1;\n                }\n            }\n        }\n        else if (isPair(node)) {\n            path = Object.freeze(path.concat(node));\n            const ck = visit_('key', node.key, visitor, path);\n            if (ck === BREAK)\n                return BREAK;\n            else if (ck === REMOVE)\n                node.key = null;\n            const cv = visit_('value', node.value, visitor, path);\n            if (cv === BREAK)\n                return BREAK;\n            else if (cv === REMOVE)\n                node.value = null;\n        }\n    }\n    return ctrl;\n}\n/**\n * Apply an async visitor to an AST node or document.\n *\n * Walks through the tree (depth-first) starting from `node`, calling a\n * `visitor` function with three arguments:\n *   - `key`: For sequence values and map `Pair`, the node's index in the\n *     collection. Within a `Pair`, `'key'` or `'value'`, correspondingly.\n *     `null` for the root node.\n *   - `node`: The current node.\n *   - `path`: The ancestry of the current node.\n *\n * The return value of the visitor may be used to control the traversal:\n *   - `Promise`: Must resolve to one of the following values\n *   - `undefined` (default): Do nothing and continue\n *   - `visit.SKIP`: Do not visit the children of this node, continue with next\n *     sibling\n *   - `visit.BREAK`: Terminate traversal completely\n *   - `visit.REMOVE`: Remove the current node, then continue with the next one\n *   - `Node`: Replace the current node, then continue by visiting it\n *   - `number`: While iterating the items of a sequence or map, set the index\n *     of the next step. This is useful especially if the index of the current\n *     node has changed.\n *\n * If `visitor` is a single function, it will be called with all values\n * encountered in the tree, including e.g. `null` values. Alternatively,\n * separate visitor functions may be defined for each `Map`, `Pair`, `Seq`,\n * `Alias` and `Scalar` node. To define the same visitor function for more than\n * one node type, use the `Collection` (map and seq), `Value` (map, seq & scalar)\n * and `Node` (alias, map, seq & scalar) targets. Of all these, only the most\n * specific defined one will be used for each node.\n */\nasync function visitAsync(node, visitor) {\n    const visitor_ = initVisitor(visitor);\n    if (isDocument(node)) {\n        const cd = await visitAsync_(null, node.contents, visitor_, Object.freeze([node]));\n        if (cd === REMOVE)\n            node.contents = null;\n    }\n    else\n        await visitAsync_(null, node, visitor_, Object.freeze([]));\n}\n// Without the `as symbol` casts, TS declares these in the `visit`\n// namespace using `var`, but then complains about that because\n// `unique symbol` must be `const`.\n/** Terminate visit traversal completely */\nvisitAsync.BREAK = BREAK;\n/** Do not visit the children of the current node */\nvisitAsync.SKIP = SKIP;\n/** Remove the current node */\nvisitAsync.REMOVE = REMOVE;\nasync function visitAsync_(key, node, visitor, path) {\n    const ctrl = await callVisitor(key, node, visitor, path);\n    if (isNode(ctrl) || isPair(ctrl)) {\n        replaceNode(key, path, ctrl);\n        return visitAsync_(key, ctrl, visitor, path);\n    }\n    if (typeof ctrl !== 'symbol') {\n        if (isCollection(node)) {\n            path = Object.freeze(path.concat(node));\n            for (let i = 0; i < node.items.length; ++i) {\n                const ci = await visitAsync_(i, node.items[i], visitor, path);\n                if (typeof ci === 'number')\n                    i = ci - 1;\n                else if (ci === BREAK)\n                    return BREAK;\n                else if (ci === REMOVE) {\n                    node.items.splice(i, 1);\n                    i -= 1;\n                }\n            }\n        }\n        else if (isPair(node)) {\n            path = Object.freeze(path.concat(node));\n            const ck = await visitAsync_('key', node.key, visitor, path);\n            if (ck === BREAK)\n                return BREAK;\n            else if (ck === REMOVE)\n                node.key = null;\n            const cv = await visitAsync_('value', node.value, visitor, path);\n            if (cv === BREAK)\n                return BREAK;\n            else if (cv === REMOVE)\n                node.value = null;\n        }\n    }\n    return ctrl;\n}\nfunction initVisitor(visitor) {\n    if (typeof visitor === 'object' &&\n        (visitor.Collection || visitor.Node || visitor.Value)) {\n        return Object.assign({\n            Alias: visitor.Node,\n            Map: visitor.Node,\n            Scalar: visitor.Node,\n            Seq: visitor.Node\n        }, visitor.Value && {\n            Map: visitor.Value,\n            Scalar: visitor.Value,\n            Seq: visitor.Value\n        }, visitor.Collection && {\n            Map: visitor.Collection,\n            Seq: visitor.Collection\n        }, visitor);\n    }\n    return visitor;\n}\nfunction callVisitor(key, node, visitor, path) {\n    if (typeof visitor === 'function')\n        return visitor(key, node, path);\n    if (isMap(node))\n        return visitor.Map?.(key, node, path);\n    if (isSeq(node))\n        return visitor.Seq?.(key, node, path);\n    if (isPair(node))\n        return visitor.Pair?.(key, node, path);\n    if (isScalar(node))\n        return visitor.Scalar?.(key, node, path);\n    if (isAlias(node))\n        return visitor.Alias?.(key, node, path);\n    return undefined;\n}\nfunction replaceNode(key, path, node) {\n    const parent = path[path.length - 1];\n    if (isCollection(parent)) {\n        parent.items[key] = node;\n    }\n    else if (isPair(parent)) {\n        if (key === 'key')\n            parent.key = node;\n        else\n            parent.value = node;\n    }\n    else if (isDocument(parent)) {\n        parent.contents = node;\n    }\n    else {\n        const pt = isAlias(parent) ? 'alias' : 'scalar';\n        throw new Error(`Cannot replace node with ${pt} parent`);\n    }\n}\n\nexport { visit, visitAsync };\n","import { isNode } from '../nodes/Node.js';\nimport { visit } from '../visit.js';\n\nconst escapeChars = {\n    '!': '%21',\n    ',': '%2C',\n    '[': '%5B',\n    ']': '%5D',\n    '{': '%7B',\n    '}': '%7D'\n};\nconst escapeTagName = (tn) => tn.replace(/[!,[\\]{}]/g, ch => escapeChars[ch]);\nclass Directives {\n    constructor(yaml, tags) {\n        /**\n         * The directives-end/doc-start marker `---`. If `null`, a marker may still be\n         * included in the document's stringified representation.\n         */\n        this.docStart = null;\n        /** The doc-end marker `...`.  */\n        this.docEnd = false;\n        this.yaml = Object.assign({}, Directives.defaultYaml, yaml);\n        this.tags = Object.assign({}, Directives.defaultTags, tags);\n    }\n    clone() {\n        const copy = new Directives(this.yaml, this.tags);\n        copy.docStart = this.docStart;\n        return copy;\n    }\n    /**\n     * During parsing, get a Directives instance for the current document and\n     * update the stream state according to the current version's spec.\n     */\n    atDocument() {\n        const res = new Directives(this.yaml, this.tags);\n        switch (this.yaml.version) {\n            case '1.1':\n                this.atNextDocument = true;\n                break;\n            case '1.2':\n                this.atNextDocument = false;\n                this.yaml = {\n                    explicit: Directives.defaultYaml.explicit,\n                    version: '1.2'\n                };\n                this.tags = Object.assign({}, Directives.defaultTags);\n                break;\n        }\n        return res;\n    }\n    /**\n     * @param onError - May be called even if the action was successful\n     * @returns `true` on success\n     */\n    add(line, onError) {\n        if (this.atNextDocument) {\n            this.yaml = { explicit: Directives.defaultYaml.explicit, version: '1.1' };\n            this.tags = Object.assign({}, Directives.defaultTags);\n            this.atNextDocument = false;\n        }\n        const parts = line.trim().split(/[ \\t]+/);\n        const name = parts.shift();\n        switch (name) {\n            case '%TAG': {\n                if (parts.length !== 2) {\n                    onError(0, '%TAG directive should contain exactly two parts');\n                    if (parts.length < 2)\n                        return false;\n                }\n                const [handle, prefix] = parts;\n                this.tags[handle] = prefix;\n                return true;\n            }\n            case '%YAML': {\n                this.yaml.explicit = true;\n                if (parts.length !== 1) {\n                    onError(0, '%YAML directive should contain exactly one part');\n                    return false;\n                }\n                const [version] = parts;\n                if (version === '1.1' || version === '1.2') {\n                    this.yaml.version = version;\n                    return true;\n                }\n                else {\n                    const isValid = /^\\d+\\.\\d+$/.test(version);\n                    onError(6, `Unsupported YAML version ${version}`, isValid);\n                    return false;\n                }\n            }\n            default:\n                onError(0, `Unknown directive ${name}`, true);\n                return false;\n        }\n    }\n    /**\n     * Resolves a tag, matching handles to those defined in %TAG directives.\n     *\n     * @returns Resolved tag, which may also be the non-specific tag `'!'` or a\n     *   `'!local'` tag, or `null` if unresolvable.\n     */\n    tagName(source, onError) {\n        if (source === '!')\n            return '!'; // non-specific tag\n        if (source[0] !== '!') {\n            onError(`Not a valid tag: ${source}`);\n            return null;\n        }\n        if (source[1] === '<') {\n            const verbatim = source.slice(2, -1);\n            if (verbatim === '!' || verbatim === '!!') {\n                onError(`Verbatim tags aren't resolved, so ${source} is invalid.`);\n                return null;\n            }\n            if (source[source.length - 1] !== '>')\n                onError('Verbatim tags must end with a >');\n            return verbatim;\n        }\n        const [, handle, suffix] = source.match(/^(.*!)([^!]*)$/);\n        if (!suffix)\n            onError(`The ${source} tag has no suffix`);\n        const prefix = this.tags[handle];\n        if (prefix)\n            return prefix + decodeURIComponent(suffix);\n        if (handle === '!')\n            return source; // local tag\n        onError(`Could not resolve tag: ${source}`);\n        return null;\n    }\n    /**\n     * Given a fully resolved tag, returns its printable string form,\n     * taking into account current tag prefixes and defaults.\n     */\n    tagString(tag) {\n        for (const [handle, prefix] of Object.entries(this.tags)) {\n            if (tag.startsWith(prefix))\n                return handle + escapeTagName(tag.substring(prefix.length));\n        }\n        return tag[0] === '!' ? tag : `!<${tag}>`;\n    }\n    toString(doc) {\n        const lines = this.yaml.explicit\n            ? [`%YAML ${this.yaml.version || '1.2'}`]\n            : [];\n        const tagEntries = Object.entries(this.tags);\n        let tagNames;\n        if (doc && tagEntries.length > 0 && isNode(doc.contents)) {\n            const tags = {};\n            visit(doc.contents, (_key, node) => {\n                if (isNode(node) && node.tag)\n                    tags[node.tag] = true;\n            });\n            tagNames = Object.keys(tags);\n        }\n        else\n            tagNames = [];\n        for (const [handle, prefix] of tagEntries) {\n            if (handle === '!!' && prefix === 'tag:yaml.org,2002:')\n                continue;\n            if (!doc || tagNames.some(tn => tn.startsWith(prefix)))\n                lines.push(`%TAG ${handle} ${prefix}`);\n        }\n        return lines.join('\\n');\n    }\n}\nDirectives.defaultYaml = { explicit: false, version: '1.2' };\nDirectives.defaultTags = { '!!': 'tag:yaml.org,2002:' };\n\nexport { Directives };\n","import { isScalar, isCollection } from '../nodes/Node.js';\nimport { visit } from '../visit.js';\n\n/**\n * Verify that the input string is a valid anchor.\n *\n * Will throw on errors.\n */\nfunction anchorIsValid(anchor) {\n    if (/[\\x00-\\x19\\s,[\\]{}]/.test(anchor)) {\n        const sa = JSON.stringify(anchor);\n        const msg = `Anchor must not contain whitespace or control characters: ${sa}`;\n        throw new Error(msg);\n    }\n    return true;\n}\nfunction anchorNames(root) {\n    const anchors = new Set();\n    visit(root, {\n        Value(_key, node) {\n            if (node.anchor)\n                anchors.add(node.anchor);\n        }\n    });\n    return anchors;\n}\n/** Find a new anchor name with the given `prefix` and a one-indexed suffix. */\nfunction findNewAnchor(prefix, exclude) {\n    for (let i = 1; true; ++i) {\n        const name = `${prefix}${i}`;\n        if (!exclude.has(name))\n            return name;\n    }\n}\nfunction createNodeAnchors(doc, prefix) {\n    const aliasObjects = [];\n    const sourceObjects = new Map();\n    let prevAnchors = null;\n    return {\n        onAnchor: (source) => {\n            aliasObjects.push(source);\n            if (!prevAnchors)\n                prevAnchors = anchorNames(doc);\n            const anchor = findNewAnchor(prefix, prevAnchors);\n            prevAnchors.add(anchor);\n            return anchor;\n        },\n        /**\n         * With circular references, the source node is only resolved after all\n         * of its child nodes are. This is why anchors are set only after all of\n         * the nodes have been created.\n         */\n        setAnchors: () => {\n            for (const source of aliasObjects) {\n                const ref = sourceObjects.get(source);\n                if (typeof ref === 'object' &&\n                    ref.anchor &&\n                    (isScalar(ref.node) || isCollection(ref.node))) {\n                    ref.node.anchor = ref.anchor;\n                }\n                else {\n                    const error = new Error('Failed to resolve repeated object (this should not happen)');\n                    error.source = source;\n                    throw error;\n                }\n            }\n        },\n        sourceObjects\n    };\n}\n\nexport { anchorIsValid, anchorNames, createNodeAnchors, findNewAnchor };\n","import { anchorIsValid } from '../doc/anchors.js';\nimport { visit } from '../visit.js';\nimport { NodeBase, ALIAS, isAlias, isCollection, isPair } from './Node.js';\n\nclass Alias extends NodeBase {\n    constructor(source) {\n        super(ALIAS);\n        this.source = source;\n        Object.defineProperty(this, 'tag', {\n            set() {\n                throw new Error('Alias nodes cannot have tags');\n            }\n        });\n    }\n    /**\n     * Resolve the value of this alias within `doc`, finding the last\n     * instance of the `source` anchor before this node.\n     */\n    resolve(doc) {\n        let found = undefined;\n        visit(doc, {\n            Node: (_key, node) => {\n                if (node === this)\n                    return visit.BREAK;\n                if (node.anchor === this.source)\n                    found = node;\n            }\n        });\n        return found;\n    }\n    toJSON(_arg, ctx) {\n        if (!ctx)\n            return { source: this.source };\n        const { anchors, doc, maxAliasCount } = ctx;\n        const source = this.resolve(doc);\n        if (!source) {\n            const msg = `Unresolved alias (the anchor must be set before the alias): ${this.source}`;\n            throw new ReferenceError(msg);\n        }\n        const data = anchors.get(source);\n        /* istanbul ignore if */\n        if (!data || data.res === undefined) {\n            const msg = 'This should not happen: Alias anchor was not resolved?';\n            throw new ReferenceError(msg);\n        }\n        if (maxAliasCount >= 0) {\n            data.count += 1;\n            if (data.aliasCount === 0)\n                data.aliasCount = getAliasCount(doc, source, anchors);\n            if (data.count * data.aliasCount > maxAliasCount) {\n                const msg = 'Excessive alias count indicates a resource exhaustion attack';\n                throw new ReferenceError(msg);\n            }\n        }\n        return data.res;\n    }\n    toString(ctx, _onComment, _onChompKeep) {\n        const src = `*${this.source}`;\n        if (ctx) {\n            anchorIsValid(this.source);\n            if (ctx.options.verifyAliasOrder && !ctx.anchors.has(this.source)) {\n                const msg = `Unresolved alias (the anchor must be set before the alias): ${this.source}`;\n                throw new Error(msg);\n            }\n            if (ctx.implicitKey)\n                return `${src} `;\n        }\n        return src;\n    }\n}\nfunction getAliasCount(doc, node, anchors) {\n    if (isAlias(node)) {\n        const source = node.resolve(doc);\n        const anchor = anchors && source && anchors.get(source);\n        return anchor ? anchor.count * anchor.aliasCount : 0;\n    }\n    else if (isCollection(node)) {\n        let count = 0;\n        for (const item of node.items) {\n            const c = getAliasCount(doc, item, anchors);\n            if (c > count)\n                count = c;\n        }\n        return count;\n    }\n    else if (isPair(node)) {\n        const kc = getAliasCount(doc, node.key, anchors);\n        const vc = getAliasCount(doc, node.value, anchors);\n        return Math.max(kc, vc);\n    }\n    return 1;\n}\n\nexport { Alias };\n","import { hasAnchor } from './Node.js';\n\n/**\n * Recursively convert any node or its contents to native JavaScript\n *\n * @param value - The input value\n * @param arg - If `value` defines a `toJSON()` method, use this\n *   as its first argument\n * @param ctx - Conversion context, originally set in Document#toJS(). If\n *   `{ keep: true }` is not set, output should be suitable for JSON\n *   stringification.\n */\nfunction toJS(value, arg, ctx) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    if (Array.isArray(value))\n        return value.map((v, i) => toJS(v, String(i), ctx));\n    if (value && typeof value.toJSON === 'function') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        if (!ctx || !hasAnchor(value))\n            return value.toJSON(arg, ctx);\n        const data = { aliasCount: 0, count: 1, res: undefined };\n        ctx.anchors.set(value, data);\n        ctx.onCreate = res => {\n            data.res = res;\n            delete ctx.onCreate;\n        };\n        const res = value.toJSON(arg, ctx);\n        if (ctx.onCreate)\n            ctx.onCreate(res);\n        return res;\n    }\n    if (typeof value === 'bigint' && !ctx?.keep)\n        return Number(value);\n    return value;\n}\n\nexport { toJS };\n","import { NodeBase, SCALAR } from './Node.js';\nimport { toJS } from './toJS.js';\n\nconst isScalarValue = (value) => !value || (typeof value !== 'function' && typeof value !== 'object');\nclass Scalar extends NodeBase {\n    constructor(value) {\n        super(SCALAR);\n        this.value = value;\n    }\n    toJSON(arg, ctx) {\n        return ctx?.keep ? this.value : toJS(this.value, arg, ctx);\n    }\n    toString() {\n        return String(this.value);\n    }\n}\nScalar.BLOCK_FOLDED = 'BLOCK_FOLDED';\nScalar.BLOCK_LITERAL = 'BLOCK_LITERAL';\nScalar.PLAIN = 'PLAIN';\nScalar.QUOTE_DOUBLE = 'QUOTE_DOUBLE';\nScalar.QUOTE_SINGLE = 'QUOTE_SINGLE';\n\nexport { Scalar, isScalarValue };\n","import { Alias } from '../nodes/Alias.js';\nimport { isNode, isPair, MAP, SEQ, isDocument } from '../nodes/Node.js';\nimport { Scalar } from '../nodes/Scalar.js';\n\nconst defaultTagPrefix = 'tag:yaml.org,2002:';\nfunction findTagObject(value, tagName, tags) {\n    if (tagName) {\n        const match = tags.filter(t => t.tag === tagName);\n        const tagObj = match.find(t => !t.format) ?? match[0];\n        if (!tagObj)\n            throw new Error(`Tag ${tagName} not found`);\n        return tagObj;\n    }\n    return tags.find(t => t.identify?.(value) && !t.format);\n}\nfunction createNode(value, tagName, ctx) {\n    if (isDocument(value))\n        value = value.contents;\n    if (isNode(value))\n        return value;\n    if (isPair(value)) {\n        const map = ctx.schema[MAP].createNode?.(ctx.schema, null, ctx);\n        map.items.push(value);\n        return map;\n    }\n    if (value instanceof String ||\n        value instanceof Number ||\n        value instanceof Boolean ||\n        (typeof BigInt !== 'undefined' && value instanceof BigInt) // not supported everywhere\n    ) {\n        // https://tc39.es/ecma262/#sec-serializejsonproperty\n        value = value.valueOf();\n    }\n    const { aliasDuplicateObjects, onAnchor, onTagObj, schema, sourceObjects } = ctx;\n    // Detect duplicate references to the same object & use Alias nodes for all\n    // after first. The `ref` wrapper allows for circular references to resolve.\n    let ref = undefined;\n    if (aliasDuplicateObjects && value && typeof value === 'object') {\n        ref = sourceObjects.get(value);\n        if (ref) {\n            if (!ref.anchor)\n                ref.anchor = onAnchor(value);\n            return new Alias(ref.anchor);\n        }\n        else {\n            ref = { anchor: null, node: null };\n            sourceObjects.set(value, ref);\n        }\n    }\n    if (tagName?.startsWith('!!'))\n        tagName = defaultTagPrefix + tagName.slice(2);\n    let tagObj = findTagObject(value, tagName, schema.tags);\n    if (!tagObj) {\n        if (value && typeof value.toJSON === 'function') {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n            value = value.toJSON();\n        }\n        if (!value || typeof value !== 'object') {\n            const node = new Scalar(value);\n            if (ref)\n                ref.node = node;\n            return node;\n        }\n        tagObj =\n            value instanceof Map\n                ? schema[MAP]\n                : Symbol.iterator in Object(value)\n                    ? schema[SEQ]\n                    : schema[MAP];\n    }\n    if (onTagObj) {\n        onTagObj(tagObj);\n        delete ctx.onTagObj;\n    }\n    const node = tagObj?.createNode\n        ? tagObj.createNode(ctx.schema, value, ctx)\n        : new Scalar(value);\n    if (tagName)\n        node.tag = tagName;\n    if (ref)\n        ref.node = node;\n    return node;\n}\n\nexport { createNode };\n","import { createNode } from '../doc/createNode.js';\nimport { NodeBase, isNode, isPair, isCollection, isScalar } from './Node.js';\n\nfunction collectionFromPath(schema, path, value) {\n    let v = value;\n    for (let i = path.length - 1; i >= 0; --i) {\n        const k = path[i];\n        if (typeof k === 'number' && Number.isInteger(k) && k >= 0) {\n            const a = [];\n            a[k] = v;\n            v = a;\n        }\n        else {\n            v = new Map([[k, v]]);\n        }\n    }\n    return createNode(v, undefined, {\n        aliasDuplicateObjects: false,\n        keepUndefined: false,\n        onAnchor: () => {\n            throw new Error('This should not happen, please report a bug.');\n        },\n        schema,\n        sourceObjects: new Map()\n    });\n}\n// Type guard is intentionally a little wrong so as to be more useful,\n// as it does not cover untypable empty non-string iterables (e.g. []).\nconst isEmptyPath = (path) => path == null ||\n    (typeof path === 'object' && !!path[Symbol.iterator]().next().done);\nclass Collection extends NodeBase {\n    constructor(type, schema) {\n        super(type);\n        Object.defineProperty(this, 'schema', {\n            value: schema,\n            configurable: true,\n            enumerable: false,\n            writable: true\n        });\n    }\n    /**\n     * Create a copy of this collection.\n     *\n     * @param schema - If defined, overwrites the original's schema\n     */\n    clone(schema) {\n        const copy = Object.create(Object.getPrototypeOf(this), Object.getOwnPropertyDescriptors(this));\n        if (schema)\n            copy.schema = schema;\n        copy.items = copy.items.map(it => isNode(it) || isPair(it) ? it.clone(schema) : it);\n        if (this.range)\n            copy.range = this.range.slice();\n        return copy;\n    }\n    /**\n     * Adds a value to the collection. For `!!map` and `!!omap` the value must\n     * be a Pair instance or a `{ key, value }` object, which may not have a key\n     * that already exists in the map.\n     */\n    addIn(path, value) {\n        if (isEmptyPath(path))\n            this.add(value);\n        else {\n            const [key, ...rest] = path;\n            const node = this.get(key, true);\n            if (isCollection(node))\n                node.addIn(rest, value);\n            else if (node === undefined && this.schema)\n                this.set(key, collectionFromPath(this.schema, rest, value));\n            else\n                throw new Error(`Expected YAML collection at ${key}. Remaining path: ${rest}`);\n        }\n    }\n    /**\n     * Removes a value from the collection.\n     * @returns `true` if the item was found and removed.\n     */\n    deleteIn(path) {\n        const [key, ...rest] = path;\n        if (rest.length === 0)\n            return this.delete(key);\n        const node = this.get(key, true);\n        if (isCollection(node))\n            return node.deleteIn(rest);\n        else\n            throw new Error(`Expected YAML collection at ${key}. Remaining path: ${rest}`);\n    }\n    /**\n     * Returns item at `key`, or `undefined` if not found. By default unwraps\n     * scalar values from their surrounding node; to disable set `keepScalar` to\n     * `true` (collections are always returned intact).\n     */\n    getIn(path, keepScalar) {\n        const [key, ...rest] = path;\n        const node = this.get(key, true);\n        if (rest.length === 0)\n            return !keepScalar && isScalar(node) ? node.value : node;\n        else\n            return isCollection(node) ? node.getIn(rest, keepScalar) : undefined;\n    }\n    hasAllNullValues(allowScalar) {\n        return this.items.every(node => {\n            if (!isPair(node))\n                return false;\n            const n = node.value;\n            return (n == null ||\n                (allowScalar &&\n                    isScalar(n) &&\n                    n.value == null &&\n                    !n.commentBefore &&\n                    !n.comment &&\n                    !n.tag));\n        });\n    }\n    /**\n     * Checks if the collection includes a value with the key `key`.\n     */\n    hasIn(path) {\n        const [key, ...rest] = path;\n        if (rest.length === 0)\n            return this.has(key);\n        const node = this.get(key, true);\n        return isCollection(node) ? node.hasIn(rest) : false;\n    }\n    /**\n     * Sets a value in this collection. For `!!set`, `value` needs to be a\n     * boolean to add/remove the item from the set.\n     */\n    setIn(path, value) {\n        const [key, ...rest] = path;\n        if (rest.length === 0) {\n            this.set(key, value);\n        }\n        else {\n            const node = this.get(key, true);\n            if (isCollection(node))\n                node.setIn(rest, value);\n            else if (node === undefined && this.schema)\n                this.set(key, collectionFromPath(this.schema, rest, value));\n            else\n                throw new Error(`Expected YAML collection at ${key}. Remaining path: ${rest}`);\n        }\n    }\n}\nCollection.maxFlowStringSingleLineLength = 60;\n\nexport { Collection, collectionFromPath, isEmptyPath };\n","/**\n * Stringifies a comment.\n *\n * Empty comment lines are left empty,\n * lines consisting of a single space are replaced by `#`,\n * and all other lines are prefixed with a `#`.\n */\nconst stringifyComment = (str) => str.replace(/^(?!$)(?: $)?/gm, '#');\nfunction indentComment(comment, indent) {\n    if (/^\\n+$/.test(comment))\n        return comment.substring(1);\n    return indent ? comment.replace(/^(?! *$)/gm, indent) : comment;\n}\nconst lineComment = (str, indent, comment) => str.endsWith('\\n')\n    ? indentComment(comment, indent)\n    : comment.includes('\\n')\n        ? '\\n' + indentComment(comment, indent)\n        : (str.endsWith(' ') ? '' : ' ') + comment;\n\nexport { indentComment, lineComment, stringifyComment };\n","const FOLD_FLOW = 'flow';\nconst FOLD_BLOCK = 'block';\nconst FOLD_QUOTED = 'quoted';\n/**\n * Tries to keep input at up to `lineWidth` characters, splitting only on spaces\n * not followed by newlines or spaces unless `mode` is `'quoted'`. Lines are\n * terminated with `\\n` and started with `indent`.\n */\nfunction foldFlowLines(text, indent, mode = 'flow', { indentAtStart, lineWidth = 80, minContentWidth = 20, onFold, onOverflow } = {}) {\n    if (!lineWidth || lineWidth < 0)\n        return text;\n    const endStep = Math.max(1 + minContentWidth, 1 + lineWidth - indent.length);\n    if (text.length <= endStep)\n        return text;\n    const folds = [];\n    const escapedFolds = {};\n    let end = lineWidth - indent.length;\n    if (typeof indentAtStart === 'number') {\n        if (indentAtStart > lineWidth - Math.max(2, minContentWidth))\n            folds.push(0);\n        else\n            end = lineWidth - indentAtStart;\n    }\n    let split = undefined;\n    let prev = undefined;\n    let overflow = false;\n    let i = -1;\n    let escStart = -1;\n    let escEnd = -1;\n    if (mode === FOLD_BLOCK) {\n        i = consumeMoreIndentedLines(text, i);\n        if (i !== -1)\n            end = i + endStep;\n    }\n    for (let ch; (ch = text[(i += 1)]);) {\n        if (mode === FOLD_QUOTED && ch === '\\\\') {\n            escStart = i;\n            switch (text[i + 1]) {\n                case 'x':\n                    i += 3;\n                    break;\n                case 'u':\n                    i += 5;\n                    break;\n                case 'U':\n                    i += 9;\n                    break;\n                default:\n                    i += 1;\n            }\n            escEnd = i;\n        }\n        if (ch === '\\n') {\n            if (mode === FOLD_BLOCK)\n                i = consumeMoreIndentedLines(text, i);\n            end = i + endStep;\n            split = undefined;\n        }\n        else {\n            if (ch === ' ' &&\n                prev &&\n                prev !== ' ' &&\n                prev !== '\\n' &&\n                prev !== '\\t') {\n                // space surrounded by non-space can be replaced with newline + indent\n                const next = text[i + 1];\n                if (next && next !== ' ' && next !== '\\n' && next !== '\\t')\n                    split = i;\n            }\n            if (i >= end) {\n                if (split) {\n                    folds.push(split);\n                    end = split + endStep;\n                    split = undefined;\n                }\n                else if (mode === FOLD_QUOTED) {\n                    // white-space collected at end may stretch past lineWidth\n                    while (prev === ' ' || prev === '\\t') {\n                        prev = ch;\n                        ch = text[(i += 1)];\n                        overflow = true;\n                    }\n                    // Account for newline escape, but don't break preceding escape\n                    const j = i > escEnd + 1 ? i - 2 : escStart - 1;\n                    // Bail out if lineWidth & minContentWidth are shorter than an escape string\n                    if (escapedFolds[j])\n                        return text;\n                    folds.push(j);\n                    escapedFolds[j] = true;\n                    end = j + endStep;\n                    split = undefined;\n                }\n                else {\n                    overflow = true;\n                }\n            }\n        }\n        prev = ch;\n    }\n    if (overflow && onOverflow)\n        onOverflow();\n    if (folds.length === 0)\n        return text;\n    if (onFold)\n        onFold();\n    let res = text.slice(0, folds[0]);\n    for (let i = 0; i < folds.length; ++i) {\n        const fold = folds[i];\n        const end = folds[i + 1] || text.length;\n        if (fold === 0)\n            res = `\\n${indent}${text.slice(0, end)}`;\n        else {\n            if (mode === FOLD_QUOTED && escapedFolds[fold])\n                res += `${text[fold]}\\\\`;\n            res += `\\n${indent}${text.slice(fold + 1, end)}`;\n        }\n    }\n    return res;\n}\n/**\n * Presumes `i + 1` is at the start of a line\n * @returns index of last newline in more-indented block\n */\nfunction consumeMoreIndentedLines(text, i) {\n    let ch = text[i + 1];\n    while (ch === ' ' || ch === '\\t') {\n        do {\n            ch = text[(i += 1)];\n        } while (ch && ch !== '\\n');\n        ch = text[i + 1];\n    }\n    return i;\n}\n\nexport { FOLD_BLOCK, FOLD_FLOW, FOLD_QUOTED, foldFlowLines };\n","import { Scalar } from '../nodes/Scalar.js';\nimport { foldFlowLines, FOLD_QUOTED, FOLD_FLOW, FOLD_BLOCK } from './foldFlowLines.js';\n\nconst getFoldOptions = (ctx, isBlock) => ({\n    indentAtStart: isBlock ? ctx.indent.length : ctx.indentAtStart,\n    lineWidth: ctx.options.lineWidth,\n    minContentWidth: ctx.options.minContentWidth\n});\n// Also checks for lines starting with %, as parsing the output as YAML 1.1 will\n// presume that's starting a new document.\nconst containsDocumentMarker = (str) => /^(%|---|\\.\\.\\.)/m.test(str);\nfunction lineLengthOverLimit(str, lineWidth, indentLength) {\n    if (!lineWidth || lineWidth < 0)\n        return false;\n    const limit = lineWidth - indentLength;\n    const strLen = str.length;\n    if (strLen <= limit)\n        return false;\n    for (let i = 0, start = 0; i < strLen; ++i) {\n        if (str[i] === '\\n') {\n            if (i - start > limit)\n                return true;\n            start = i + 1;\n            if (strLen - start <= limit)\n                return false;\n        }\n    }\n    return true;\n}\nfunction doubleQuotedString(value, ctx) {\n    const json = JSON.stringify(value);\n    if (ctx.options.doubleQuotedAsJSON)\n        return json;\n    const { implicitKey } = ctx;\n    const minMultiLineLength = ctx.options.doubleQuotedMinMultiLineLength;\n    const indent = ctx.indent || (containsDocumentMarker(value) ? '  ' : '');\n    let str = '';\n    let start = 0;\n    for (let i = 0, ch = json[i]; ch; ch = json[++i]) {\n        if (ch === ' ' && json[i + 1] === '\\\\' && json[i + 2] === 'n') {\n            // space before newline needs to be escaped to not be folded\n            str += json.slice(start, i) + '\\\\ ';\n            i += 1;\n            start = i;\n            ch = '\\\\';\n        }\n        if (ch === '\\\\')\n            switch (json[i + 1]) {\n                case 'u':\n                    {\n                        str += json.slice(start, i);\n                        const code = json.substr(i + 2, 4);\n                        switch (code) {\n                            case '0000':\n                                str += '\\\\0';\n                                break;\n                            case '0007':\n                                str += '\\\\a';\n                                break;\n                            case '000b':\n                                str += '\\\\v';\n                                break;\n                            case '001b':\n                                str += '\\\\e';\n                                break;\n                            case '0085':\n                                str += '\\\\N';\n                                break;\n                            case '00a0':\n                                str += '\\\\_';\n                                break;\n                            case '2028':\n                                str += '\\\\L';\n                                break;\n                            case '2029':\n                                str += '\\\\P';\n                                break;\n                            default:\n                                if (code.substr(0, 2) === '00')\n                                    str += '\\\\x' + code.substr(2);\n                                else\n                                    str += json.substr(i, 6);\n                        }\n                        i += 5;\n                        start = i + 1;\n                    }\n                    break;\n                case 'n':\n                    if (implicitKey ||\n                        json[i + 2] === '\"' ||\n                        json.length < minMultiLineLength) {\n                        i += 1;\n                    }\n                    else {\n                        // folding will eat first newline\n                        str += json.slice(start, i) + '\\n\\n';\n                        while (json[i + 2] === '\\\\' &&\n                            json[i + 3] === 'n' &&\n                            json[i + 4] !== '\"') {\n                            str += '\\n';\n                            i += 2;\n                        }\n                        str += indent;\n                        // space after newline needs to be escaped to not be folded\n                        if (json[i + 2] === ' ')\n                            str += '\\\\';\n                        i += 1;\n                        start = i + 1;\n                    }\n                    break;\n                default:\n                    i += 1;\n            }\n    }\n    str = start ? str + json.slice(start) : json;\n    return implicitKey\n        ? str\n        : foldFlowLines(str, indent, FOLD_QUOTED, getFoldOptions(ctx, false));\n}\nfunction singleQuotedString(value, ctx) {\n    if (ctx.options.singleQuote === false ||\n        (ctx.implicitKey && value.includes('\\n')) ||\n        /[ \\t]\\n|\\n[ \\t]/.test(value) // single quoted string can't have leading or trailing whitespace around newline\n    )\n        return doubleQuotedString(value, ctx);\n    const indent = ctx.indent || (containsDocumentMarker(value) ? '  ' : '');\n    const res = \"'\" + value.replace(/'/g, \"''\").replace(/\\n+/g, `$&\\n${indent}`) + \"'\";\n    return ctx.implicitKey\n        ? res\n        : foldFlowLines(res, indent, FOLD_FLOW, getFoldOptions(ctx, false));\n}\nfunction quotedString(value, ctx) {\n    const { singleQuote } = ctx.options;\n    let qs;\n    if (singleQuote === false)\n        qs = doubleQuotedString;\n    else {\n        const hasDouble = value.includes('\"');\n        const hasSingle = value.includes(\"'\");\n        if (hasDouble && !hasSingle)\n            qs = singleQuotedString;\n        else if (hasSingle && !hasDouble)\n            qs = doubleQuotedString;\n        else\n            qs = singleQuote ? singleQuotedString : doubleQuotedString;\n    }\n    return qs(value, ctx);\n}\nfunction blockString({ comment, type, value }, ctx, onComment, onChompKeep) {\n    const { blockQuote, commentString, lineWidth } = ctx.options;\n    // 1. Block can't end in whitespace unless the last line is non-empty.\n    // 2. Strings consisting of only whitespace are best rendered explicitly.\n    if (!blockQuote || /\\n[\\t ]+$/.test(value) || /^\\s*$/.test(value)) {\n        return quotedString(value, ctx);\n    }\n    const indent = ctx.indent ||\n        (ctx.forceBlockIndent || containsDocumentMarker(value) ? '  ' : '');\n    const literal = blockQuote === 'literal'\n        ? true\n        : blockQuote === 'folded' || type === Scalar.BLOCK_FOLDED\n            ? false\n            : type === Scalar.BLOCK_LITERAL\n                ? true\n                : !lineLengthOverLimit(value, lineWidth, indent.length);\n    if (!value)\n        return literal ? '|\\n' : '>\\n';\n    // determine chomping from whitespace at value end\n    let chomp;\n    let endStart;\n    for (endStart = value.length; endStart > 0; --endStart) {\n        const ch = value[endStart - 1];\n        if (ch !== '\\n' && ch !== '\\t' && ch !== ' ')\n            break;\n    }\n    let end = value.substring(endStart);\n    const endNlPos = end.indexOf('\\n');\n    if (endNlPos === -1) {\n        chomp = '-'; // strip\n    }\n    else if (value === end || endNlPos !== end.length - 1) {\n        chomp = '+'; // keep\n        if (onChompKeep)\n            onChompKeep();\n    }\n    else {\n        chomp = ''; // clip\n    }\n    if (end) {\n        value = value.slice(0, -end.length);\n        if (end[end.length - 1] === '\\n')\n            end = end.slice(0, -1);\n        end = end.replace(/\\n+(?!\\n|$)/g, `$&${indent}`);\n    }\n    // determine indent indicator from whitespace at value start\n    let startWithSpace = false;\n    let startEnd;\n    let startNlPos = -1;\n    for (startEnd = 0; startEnd < value.length; ++startEnd) {\n        const ch = value[startEnd];\n        if (ch === ' ')\n            startWithSpace = true;\n        else if (ch === '\\n')\n            startNlPos = startEnd;\n        else\n            break;\n    }\n    let start = value.substring(0, startNlPos < startEnd ? startNlPos + 1 : startEnd);\n    if (start) {\n        value = value.substring(start.length);\n        start = start.replace(/\\n+/g, `$&${indent}`);\n    }\n    const indentSize = indent ? '2' : '1'; // root is at -1\n    let header = (literal ? '|' : '>') + (startWithSpace ? indentSize : '') + chomp;\n    if (comment) {\n        header += ' ' + commentString(comment.replace(/ ?[\\r\\n]+/g, ' '));\n        if (onComment)\n            onComment();\n    }\n    if (literal) {\n        value = value.replace(/\\n+/g, `$&${indent}`);\n        return `${header}\\n${indent}${start}${value}${end}`;\n    }\n    value = value\n        .replace(/\\n+/g, '\\n$&')\n        .replace(/(?:^|\\n)([\\t ].*)(?:([\\n\\t ]*)\\n(?![\\n\\t ]))?/g, '$1$2') // more-indented lines aren't folded\n        //                ^ more-ind. ^ empty     ^ capture next empty lines only at end of indent\n        .replace(/\\n+/g, `$&${indent}`);\n    const body = foldFlowLines(`${start}${value}${end}`, indent, FOLD_BLOCK, getFoldOptions(ctx, true));\n    return `${header}\\n${indent}${body}`;\n}\nfunction plainString(item, ctx, onComment, onChompKeep) {\n    const { type, value } = item;\n    const { actualString, implicitKey, indent, indentStep, inFlow } = ctx;\n    if ((implicitKey && /[\\n[\\]{},]/.test(value)) ||\n        (inFlow && /[[\\]{},]/.test(value))) {\n        return quotedString(value, ctx);\n    }\n    if (!value ||\n        /^[\\n\\t ,[\\]{}#&*!|>'\"%@`]|^[?-]$|^[?-][ \\t]|[\\n:][ \\t]|[ \\t]\\n|[\\n\\t ]#|[\\n\\t :]$/.test(value)) {\n        // not allowed:\n        // - empty string, '-' or '?'\n        // - start with an indicator character (except [?:-]) or /[?-] /\n        // - '\\n ', ': ' or ' \\n' anywhere\n        // - '#' not preceded by a non-space char\n        // - end with ' ' or ':'\n        return implicitKey || inFlow || !value.includes('\\n')\n            ? quotedString(value, ctx)\n            : blockString(item, ctx, onComment, onChompKeep);\n    }\n    if (!implicitKey &&\n        !inFlow &&\n        type !== Scalar.PLAIN &&\n        value.includes('\\n')) {\n        // Where allowed & type not set explicitly, prefer block style for multiline strings\n        return blockString(item, ctx, onComment, onChompKeep);\n    }\n    if (containsDocumentMarker(value)) {\n        if (indent === '') {\n            ctx.forceBlockIndent = true;\n            return blockString(item, ctx, onComment, onChompKeep);\n        }\n        else if (implicitKey && indent === indentStep) {\n            return quotedString(value, ctx);\n        }\n    }\n    const str = value.replace(/\\n+/g, `$&\\n${indent}`);\n    // Verify that output will be parsed as a string, as e.g. plain numbers and\n    // booleans get parsed with those types in v1.2 (e.g. '42', 'true' & '0.9e-3'),\n    // and others in v1.1.\n    if (actualString) {\n        const test = (tag) => tag.default && tag.tag !== 'tag:yaml.org,2002:str' && tag.test?.test(str);\n        const { compat, tags } = ctx.doc.schema;\n        if (tags.some(test) || compat?.some(test))\n            return quotedString(value, ctx);\n    }\n    return implicitKey\n        ? str\n        : foldFlowLines(str, indent, FOLD_FLOW, getFoldOptions(ctx, false));\n}\nfunction stringifyString(item, ctx, onComment, onChompKeep) {\n    const { implicitKey, inFlow } = ctx;\n    const ss = typeof item.value === 'string'\n        ? item\n        : Object.assign({}, item, { value: String(item.value) });\n    let { type } = item;\n    if (type !== Scalar.QUOTE_DOUBLE) {\n        // force double quotes on control characters & unpaired surrogates\n        if (/[\\x00-\\x08\\x0b-\\x1f\\x7f-\\x9f\\u{D800}-\\u{DFFF}]/u.test(ss.value))\n            type = Scalar.QUOTE_DOUBLE;\n    }\n    const _stringify = (_type) => {\n        switch (_type) {\n            case Scalar.BLOCK_FOLDED:\n            case Scalar.BLOCK_LITERAL:\n                return implicitKey || inFlow\n                    ? quotedString(ss.value, ctx) // blocks are not valid inside flow containers\n                    : blockString(ss, ctx, onComment, onChompKeep);\n            case Scalar.QUOTE_DOUBLE:\n                return doubleQuotedString(ss.value, ctx);\n            case Scalar.QUOTE_SINGLE:\n                return singleQuotedString(ss.value, ctx);\n            case Scalar.PLAIN:\n                return plainString(ss, ctx, onComment, onChompKeep);\n            default:\n                return null;\n        }\n    };\n    let res = _stringify(type);\n    if (res === null) {\n        const { defaultKeyType, defaultStringType } = ctx.options;\n        const t = (implicitKey && defaultKeyType) || defaultStringType;\n        res = _stringify(t);\n        if (res === null)\n            throw new Error(`Unsupported default string type ${t}`);\n    }\n    return res;\n}\n\nexport { stringifyString };\n","import { anchorIsValid } from '../doc/anchors.js';\nimport { isPair, isAlias, isNode, isScalar, isCollection } from '../nodes/Node.js';\nimport { stringifyComment } from './stringifyComment.js';\nimport { stringifyString } from './stringifyString.js';\n\nfunction createStringifyContext(doc, options) {\n    const opt = Object.assign({\n        blockQuote: true,\n        commentString: stringifyComment,\n        defaultKeyType: null,\n        defaultStringType: 'PLAIN',\n        directives: null,\n        doubleQuotedAsJSON: false,\n        doubleQuotedMinMultiLineLength: 40,\n        falseStr: 'false',\n        flowCollectionPadding: true,\n        indentSeq: true,\n        lineWidth: 80,\n        minContentWidth: 20,\n        nullStr: 'null',\n        simpleKeys: false,\n        singleQuote: null,\n        trueStr: 'true',\n        verifyAliasOrder: true\n    }, doc.schema.toStringOptions, options);\n    let inFlow;\n    switch (opt.collectionStyle) {\n        case 'block':\n            inFlow = false;\n            break;\n        case 'flow':\n            inFlow = true;\n            break;\n        default:\n            inFlow = null;\n    }\n    return {\n        anchors: new Set(),\n        doc,\n        flowCollectionPadding: opt.flowCollectionPadding ? ' ' : '',\n        indent: '',\n        indentStep: typeof opt.indent === 'number' ? ' '.repeat(opt.indent) : '  ',\n        inFlow,\n        options: opt\n    };\n}\nfunction getTagObject(tags, item) {\n    if (item.tag) {\n        const match = tags.filter(t => t.tag === item.tag);\n        if (match.length > 0)\n            return match.find(t => t.format === item.format) ?? match[0];\n    }\n    let tagObj = undefined;\n    let obj;\n    if (isScalar(item)) {\n        obj = item.value;\n        const match = tags.filter(t => t.identify?.(obj));\n        tagObj =\n            match.find(t => t.format === item.format) ?? match.find(t => !t.format);\n    }\n    else {\n        obj = item;\n        tagObj = tags.find(t => t.nodeClass && obj instanceof t.nodeClass);\n    }\n    if (!tagObj) {\n        const name = obj?.constructor?.name ?? typeof obj;\n        throw new Error(`Tag not resolved for ${name} value`);\n    }\n    return tagObj;\n}\n// needs to be called before value stringifier to allow for circular anchor refs\nfunction stringifyProps(node, tagObj, { anchors, doc }) {\n    if (!doc.directives)\n        return '';\n    const props = [];\n    const anchor = (isScalar(node) || isCollection(node)) && node.anchor;\n    if (anchor && anchorIsValid(anchor)) {\n        anchors.add(anchor);\n        props.push(`&${anchor}`);\n    }\n    const tag = node.tag ? node.tag : tagObj.default ? null : tagObj.tag;\n    if (tag)\n        props.push(doc.directives.tagString(tag));\n    return props.join(' ');\n}\nfunction stringify(item, ctx, onComment, onChompKeep) {\n    if (isPair(item))\n        return item.toString(ctx, onComment, onChompKeep);\n    if (isAlias(item)) {\n        if (ctx.doc.directives)\n            return item.toString(ctx);\n        if (ctx.resolvedAliases?.has(item)) {\n            throw new TypeError(`Cannot stringify circular structure without alias nodes`);\n        }\n        else {\n            if (ctx.resolvedAliases)\n                ctx.resolvedAliases.add(item);\n            else\n                ctx.resolvedAliases = new Set([item]);\n            item = item.resolve(ctx.doc);\n        }\n    }\n    let tagObj = undefined;\n    const node = isNode(item)\n        ? item\n        : ctx.doc.createNode(item, { onTagObj: o => (tagObj = o) });\n    if (!tagObj)\n        tagObj = getTagObject(ctx.doc.schema.tags, node);\n    const props = stringifyProps(node, tagObj, ctx);\n    if (props.length > 0)\n        ctx.indentAtStart = (ctx.indentAtStart ?? 0) + props.length + 1;\n    const str = typeof tagObj.stringify === 'function'\n        ? tagObj.stringify(node, ctx, onComment, onChompKeep)\n        : isScalar(node)\n            ? stringifyString(node, ctx, onComment, onChompKeep)\n            : node.toString(ctx, onComment, onChompKeep);\n    if (!props)\n        return str;\n    return isScalar(node) || str[0] === '{' || str[0] === '['\n        ? `${props} ${str}`\n        : `${props}\\n${ctx.indent}${str}`;\n}\n\nexport { createStringifyContext, stringify };\n","function debug(logLevel, ...messages) {\n    if (logLevel === 'debug')\n        console.log(...messages);\n}\nfunction warn(logLevel, warning) {\n    if (logLevel === 'debug' || logLevel === 'warn') {\n        if (typeof process !== 'undefined' && process.emitWarning)\n            process.emitWarning(warning);\n        else\n            console.warn(warning);\n    }\n}\n\nexport { debug, warn };\n","import { warn } from '../log.js';\nimport { createStringifyContext } from '../stringify/stringify.js';\nimport { isAlias, isSeq, isScalar, isMap, isNode } from './Node.js';\nimport { Scalar } from './Scalar.js';\nimport { toJS } from './toJS.js';\n\nconst MERGE_KEY = '<<';\nfunction addPairToJSMap(ctx, map, { key, value }) {\n    if (ctx?.doc.schema.merge && isMergeKey(key)) {\n        value = isAlias(value) ? value.resolve(ctx.doc) : value;\n        if (isSeq(value))\n            for (const it of value.items)\n                mergeToJSMap(ctx, map, it);\n        else if (Array.isArray(value))\n            for (const it of value)\n                mergeToJSMap(ctx, map, it);\n        else\n            mergeToJSMap(ctx, map, value);\n    }\n    else {\n        const jsKey = toJS(key, '', ctx);\n        if (map instanceof Map) {\n            map.set(jsKey, toJS(value, jsKey, ctx));\n        }\n        else if (map instanceof Set) {\n            map.add(jsKey);\n        }\n        else {\n            const stringKey = stringifyKey(key, jsKey, ctx);\n            const jsValue = toJS(value, stringKey, ctx);\n            if (stringKey in map)\n                Object.defineProperty(map, stringKey, {\n                    value: jsValue,\n                    writable: true,\n                    enumerable: true,\n                    configurable: true\n                });\n            else\n                map[stringKey] = jsValue;\n        }\n    }\n    return map;\n}\nconst isMergeKey = (key) => key === MERGE_KEY ||\n    (isScalar(key) &&\n        key.value === MERGE_KEY &&\n        (!key.type || key.type === Scalar.PLAIN));\n// If the value associated with a merge key is a single mapping node, each of\n// its key/value pairs is inserted into the current mapping, unless the key\n// already exists in it. If the value associated with the merge key is a\n// sequence, then this sequence is expected to contain mapping nodes and each\n// of these nodes is merged in turn according to its order in the sequence.\n// Keys in mapping nodes earlier in the sequence override keys specified in\n// later mapping nodes. -- http://yaml.org/type/merge.html\nfunction mergeToJSMap(ctx, map, value) {\n    const source = ctx && isAlias(value) ? value.resolve(ctx.doc) : value;\n    if (!isMap(source))\n        throw new Error('Merge sources must be maps or map aliases');\n    const srcMap = source.toJSON(null, ctx, Map);\n    for (const [key, value] of srcMap) {\n        if (map instanceof Map) {\n            if (!map.has(key))\n                map.set(key, value);\n        }\n        else if (map instanceof Set) {\n            map.add(key);\n        }\n        else if (!Object.prototype.hasOwnProperty.call(map, key)) {\n            Object.defineProperty(map, key, {\n                value,\n                writable: true,\n                enumerable: true,\n                configurable: true\n            });\n        }\n    }\n    return map;\n}\nfunction stringifyKey(key, jsKey, ctx) {\n    if (jsKey === null)\n        return '';\n    if (typeof jsKey !== 'object')\n        return String(jsKey);\n    if (isNode(key) && ctx && ctx.doc) {\n        const strCtx = createStringifyContext(ctx.doc, {});\n        strCtx.anchors = new Set();\n        for (const node of ctx.anchors.keys())\n            strCtx.anchors.add(node.anchor);\n        strCtx.inFlow = true;\n        strCtx.inStringifyKey = true;\n        const strKey = key.toString(strCtx);\n        if (!ctx.mapKeyWarned) {\n            let jsonStr = JSON.stringify(strKey);\n            if (jsonStr.length > 40)\n                jsonStr = jsonStr.substring(0, 36) + '...\"';\n            warn(ctx.doc.options.logLevel, `Keys with collection values will be stringified due to JS Object restrictions: ${jsonStr}. Set mapAsMap: true to use object keys.`);\n            ctx.mapKeyWarned = true;\n        }\n        return strKey;\n    }\n    return JSON.stringify(jsKey);\n}\n\nexport { addPairToJSMap };\n","import { createNode } from '../doc/createNode.js';\nimport { stringifyPair } from '../stringify/stringifyPair.js';\nimport { addPairToJSMap } from './addPairToJSMap.js';\nimport { NODE_TYPE, PAIR, isNode } from './Node.js';\n\nfunction createPair(key, value, ctx) {\n    const k = createNode(key, undefined, ctx);\n    const v = createNode(value, undefined, ctx);\n    return new Pair(k, v);\n}\nclass Pair {\n    constructor(key, value = null) {\n        Object.defineProperty(this, NODE_TYPE, { value: PAIR });\n        this.key = key;\n        this.value = value;\n    }\n    clone(schema) {\n        let { key, value } = this;\n        if (isNode(key))\n            key = key.clone(schema);\n        if (isNode(value))\n            value = value.clone(schema);\n        return new Pair(key, value);\n    }\n    toJSON(_, ctx) {\n        const pair = ctx?.mapAsMap ? new Map() : {};\n        return addPairToJSMap(ctx, pair, this);\n    }\n    toString(ctx, onComment, onChompKeep) {\n        return ctx?.doc\n            ? stringifyPair(this, ctx, onComment, onChompKeep)\n            : JSON.stringify(this);\n    }\n}\n\nexport { Pair, createPair };\n","import { isCollection, isNode, isScalar, isSeq } from '../nodes/Node.js';\nimport { Scalar } from '../nodes/Scalar.js';\nimport { stringify } from './stringify.js';\nimport { lineComment, indentComment } from './stringifyComment.js';\n\nfunction stringifyPair({ key, value }, ctx, onComment, onChompKeep) {\n    const { allNullValues, doc, indent, indentStep, options: { commentString, indentSeq, simpleKeys } } = ctx;\n    let keyComment = (isNode(key) && key.comment) || null;\n    if (simpleKeys) {\n        if (keyComment) {\n            throw new Error('With simple keys, key nodes cannot have comments');\n        }\n        if (isCollection(key)) {\n            const msg = 'With simple keys, collection cannot be used as a key value';\n            throw new Error(msg);\n        }\n    }\n    let explicitKey = !simpleKeys &&\n        (!key ||\n            (keyComment && value == null && !ctx.inFlow) ||\n            isCollection(key) ||\n            (isScalar(key)\n                ? key.type === Scalar.BLOCK_FOLDED || key.type === Scalar.BLOCK_LITERAL\n                : typeof key === 'object'));\n    ctx = Object.assign({}, ctx, {\n        allNullValues: false,\n        implicitKey: !explicitKey && (simpleKeys || !allNullValues),\n        indent: indent + indentStep\n    });\n    let keyCommentDone = false;\n    let chompKeep = false;\n    let str = stringify(key, ctx, () => (keyCommentDone = true), () => (chompKeep = true));\n    if (!explicitKey && !ctx.inFlow && str.length > 1024) {\n        if (simpleKeys)\n            throw new Error('With simple keys, single line scalar must not span more than 1024 characters');\n        explicitKey = true;\n    }\n    if (ctx.inFlow) {\n        if (allNullValues || value == null) {\n            if (keyCommentDone && onComment)\n                onComment();\n            return str === '' ? '?' : explicitKey ? `? ${str}` : str;\n        }\n    }\n    else if ((allNullValues && !simpleKeys) || (value == null && explicitKey)) {\n        str = `? ${str}`;\n        if (keyComment && !keyCommentDone) {\n            str += lineComment(str, ctx.indent, commentString(keyComment));\n        }\n        else if (chompKeep && onChompKeep)\n            onChompKeep();\n        return str;\n    }\n    if (keyCommentDone)\n        keyComment = null;\n    if (explicitKey) {\n        if (keyComment)\n            str += lineComment(str, ctx.indent, commentString(keyComment));\n        str = `? ${str}\\n${indent}:`;\n    }\n    else {\n        str = `${str}:`;\n        if (keyComment)\n            str += lineComment(str, ctx.indent, commentString(keyComment));\n    }\n    let vsb, vcb, valueComment;\n    if (isNode(value)) {\n        vsb = !!value.spaceBefore;\n        vcb = value.commentBefore;\n        valueComment = value.comment;\n    }\n    else {\n        vsb = false;\n        vcb = null;\n        valueComment = null;\n        if (value && typeof value === 'object')\n            value = doc.createNode(value);\n    }\n    ctx.implicitKey = false;\n    if (!explicitKey && !keyComment && isScalar(value))\n        ctx.indentAtStart = str.length + 1;\n    chompKeep = false;\n    if (!indentSeq &&\n        indentStep.length >= 2 &&\n        !ctx.inFlow &&\n        !explicitKey &&\n        isSeq(value) &&\n        !value.flow &&\n        !value.tag &&\n        !value.anchor) {\n        // If indentSeq === false, consider '- ' as part of indentation where possible\n        ctx.indent = ctx.indent.substring(2);\n    }\n    let valueCommentDone = false;\n    const valueStr = stringify(value, ctx, () => (valueCommentDone = true), () => (chompKeep = true));\n    let ws = ' ';\n    if (keyComment || vsb || vcb) {\n        ws = vsb ? '\\n' : '';\n        if (vcb) {\n            const cs = commentString(vcb);\n            ws += `\\n${indentComment(cs, ctx.indent)}`;\n        }\n        if (valueStr === '' && !ctx.inFlow) {\n            if (ws === '\\n')\n                ws = '\\n\\n';\n        }\n        else {\n            ws += `\\n${ctx.indent}`;\n        }\n    }\n    else if (!explicitKey && isCollection(value)) {\n        const vs0 = valueStr[0];\n        const nl0 = valueStr.indexOf('\\n');\n        const hasNewline = nl0 !== -1;\n        const flow = ctx.inFlow ?? value.flow ?? value.items.length === 0;\n        if (hasNewline || !flow) {\n            let hasPropsLine = false;\n            if (hasNewline && (vs0 === '&' || vs0 === '!')) {\n                let sp0 = valueStr.indexOf(' ');\n                if (vs0 === '&' &&\n                    sp0 !== -1 &&\n                    sp0 < nl0 &&\n                    valueStr[sp0 + 1] === '!') {\n                    sp0 = valueStr.indexOf(' ', sp0 + 1);\n                }\n                if (sp0 === -1 || nl0 < sp0)\n                    hasPropsLine = true;\n            }\n            if (!hasPropsLine)\n                ws = `\\n${ctx.indent}`;\n        }\n    }\n    else if (valueStr === '' || valueStr[0] === '\\n') {\n        ws = '';\n    }\n    str += ws + valueStr;\n    if (ctx.inFlow) {\n        if (valueCommentDone && onComment)\n            onComment();\n    }\n    else if (valueComment && !valueCommentDone) {\n        str += lineComment(str, ctx.indent, commentString(valueComment));\n    }\n    else if (chompKeep && onChompKeep) {\n        onChompKeep();\n    }\n    return str;\n}\n\nexport { stringifyPair };\n","import { Collection } from '../nodes/Collection.js';\nimport { isNode, isPair } from '../nodes/Node.js';\nimport { stringify } from './stringify.js';\nimport { lineComment, indentComment } from './stringifyComment.js';\n\nfunction stringifyCollection(collection, ctx, options) {\n    const flow = ctx.inFlow ?? collection.flow;\n    const stringify = flow ? stringifyFlowCollection : stringifyBlockCollection;\n    return stringify(collection, ctx, options);\n}\nfunction stringifyBlockCollection({ comment, items }, ctx, { blockItemPrefix, flowChars, itemIndent, onChompKeep, onComment }) {\n    const { indent, options: { commentString } } = ctx;\n    const itemCtx = Object.assign({}, ctx, { indent: itemIndent, type: null });\n    let chompKeep = false; // flag for the preceding node's status\n    const lines = [];\n    for (let i = 0; i < items.length; ++i) {\n        const item = items[i];\n        let comment = null;\n        if (isNode(item)) {\n            if (!chompKeep && item.spaceBefore)\n                lines.push('');\n            addCommentBefore(ctx, lines, item.commentBefore, chompKeep);\n            if (item.comment)\n                comment = item.comment;\n        }\n        else if (isPair(item)) {\n            const ik = isNode(item.key) ? item.key : null;\n            if (ik) {\n                if (!chompKeep && ik.spaceBefore)\n                    lines.push('');\n                addCommentBefore(ctx, lines, ik.commentBefore, chompKeep);\n            }\n        }\n        chompKeep = false;\n        let str = stringify(item, itemCtx, () => (comment = null), () => (chompKeep = true));\n        if (comment)\n            str += lineComment(str, itemIndent, commentString(comment));\n        if (chompKeep && comment)\n            chompKeep = false;\n        lines.push(blockItemPrefix + str);\n    }\n    let str;\n    if (lines.length === 0) {\n        str = flowChars.start + flowChars.end;\n    }\n    else {\n        str = lines[0];\n        for (let i = 1; i < lines.length; ++i) {\n            const line = lines[i];\n            str += line ? `\\n${indent}${line}` : '\\n';\n        }\n    }\n    if (comment) {\n        str += '\\n' + indentComment(commentString(comment), indent);\n        if (onComment)\n            onComment();\n    }\n    else if (chompKeep && onChompKeep)\n        onChompKeep();\n    return str;\n}\nfunction stringifyFlowCollection({ comment, items }, ctx, { flowChars, itemIndent, onComment }) {\n    const { indent, indentStep, flowCollectionPadding: fcPadding, options: { commentString } } = ctx;\n    itemIndent += indentStep;\n    const itemCtx = Object.assign({}, ctx, {\n        indent: itemIndent,\n        inFlow: true,\n        type: null\n    });\n    let reqNewline = false;\n    let linesAtValue = 0;\n    const lines = [];\n    for (let i = 0; i < items.length; ++i) {\n        const item = items[i];\n        let comment = null;\n        if (isNode(item)) {\n            if (item.spaceBefore)\n                lines.push('');\n            addCommentBefore(ctx, lines, item.commentBefore, false);\n            if (item.comment)\n                comment = item.comment;\n        }\n        else if (isPair(item)) {\n            const ik = isNode(item.key) ? item.key : null;\n            if (ik) {\n                if (ik.spaceBefore)\n                    lines.push('');\n                addCommentBefore(ctx, lines, ik.commentBefore, false);\n                if (ik.comment)\n                    reqNewline = true;\n            }\n            const iv = isNode(item.value) ? item.value : null;\n            if (iv) {\n                if (iv.comment)\n                    comment = iv.comment;\n                if (iv.commentBefore)\n                    reqNewline = true;\n            }\n            else if (item.value == null && ik && ik.comment) {\n                comment = ik.comment;\n            }\n        }\n        if (comment)\n            reqNewline = true;\n        let str = stringify(item, itemCtx, () => (comment = null));\n        if (i < items.length - 1)\n            str += ',';\n        if (comment)\n            str += lineComment(str, itemIndent, commentString(comment));\n        if (!reqNewline && (lines.length > linesAtValue || str.includes('\\n')))\n            reqNewline = true;\n        lines.push(str);\n        linesAtValue = lines.length;\n    }\n    let str;\n    const { start, end } = flowChars;\n    if (lines.length === 0) {\n        str = start + end;\n    }\n    else {\n        if (!reqNewline) {\n            const len = lines.reduce((sum, line) => sum + line.length + 2, 2);\n            reqNewline = len > Collection.maxFlowStringSingleLineLength;\n        }\n        if (reqNewline) {\n            str = start;\n            for (const line of lines)\n                str += line ? `\\n${indentStep}${indent}${line}` : '\\n';\n            str += `\\n${indent}${end}`;\n        }\n        else {\n            str = `${start}${fcPadding}${lines.join(' ')}${fcPadding}${end}`;\n        }\n    }\n    if (comment) {\n        str += lineComment(str, indent, commentString(comment));\n        if (onComment)\n            onComment();\n    }\n    return str;\n}\nfunction addCommentBefore({ indent, options: { commentString } }, lines, comment, chompKeep) {\n    if (comment && chompKeep)\n        comment = comment.replace(/^\\n+/, '');\n    if (comment) {\n        const ic = indentComment(commentString(comment), indent);\n        lines.push(ic.trimStart()); // Avoid double indent on first line\n    }\n}\n\nexport { stringifyCollection };\n","import { stringifyCollection } from '../stringify/stringifyCollection.js';\nimport { addPairToJSMap } from './addPairToJSMap.js';\nimport { Collection } from './Collection.js';\nimport { isPair, isScalar, MAP } from './Node.js';\nimport { Pair } from './Pair.js';\nimport { isScalarValue } from './Scalar.js';\n\nfunction findPair(items, key) {\n    const k = isScalar(key) ? key.value : key;\n    for (const it of items) {\n        if (isPair(it)) {\n            if (it.key === key || it.key === k)\n                return it;\n            if (isScalar(it.key) && it.key.value === k)\n                return it;\n        }\n    }\n    return undefined;\n}\nclass YAMLMap extends Collection {\n    static get tagName() {\n        return 'tag:yaml.org,2002:map';\n    }\n    constructor(schema) {\n        super(MAP, schema);\n        this.items = [];\n    }\n    /**\n     * Adds a value to the collection.\n     *\n     * @param overwrite - If not set `true`, using a key that is already in the\n     *   collection will throw. Otherwise, overwrites the previous value.\n     */\n    add(pair, overwrite) {\n        let _pair;\n        if (isPair(pair))\n            _pair = pair;\n        else if (!pair || typeof pair !== 'object' || !('key' in pair)) {\n            // In TypeScript, this never happens.\n            _pair = new Pair(pair, pair?.value);\n        }\n        else\n            _pair = new Pair(pair.key, pair.value);\n        const prev = findPair(this.items, _pair.key);\n        const sortEntries = this.schema?.sortMapEntries;\n        if (prev) {\n            if (!overwrite)\n                throw new Error(`Key ${_pair.key} already set`);\n            // For scalars, keep the old node & its comments and anchors\n            if (isScalar(prev.value) && isScalarValue(_pair.value))\n                prev.value.value = _pair.value;\n            else\n                prev.value = _pair.value;\n        }\n        else if (sortEntries) {\n            const i = this.items.findIndex(item => sortEntries(_pair, item) < 0);\n            if (i === -1)\n                this.items.push(_pair);\n            else\n                this.items.splice(i, 0, _pair);\n        }\n        else {\n            this.items.push(_pair);\n        }\n    }\n    delete(key) {\n        const it = findPair(this.items, key);\n        if (!it)\n            return false;\n        const del = this.items.splice(this.items.indexOf(it), 1);\n        return del.length > 0;\n    }\n    get(key, keepScalar) {\n        const it = findPair(this.items, key);\n        const node = it?.value;\n        return (!keepScalar && isScalar(node) ? node.value : node) ?? undefined;\n    }\n    has(key) {\n        return !!findPair(this.items, key);\n    }\n    set(key, value) {\n        this.add(new Pair(key, value), true);\n    }\n    /**\n     * @param ctx - Conversion context, originally set in Document#toJS()\n     * @param {Class} Type - If set, forces the returned collection type\n     * @returns Instance of Type, Map, or Object\n     */\n    toJSON(_, ctx, Type) {\n        const map = Type ? new Type() : ctx?.mapAsMap ? new Map() : {};\n        if (ctx?.onCreate)\n            ctx.onCreate(map);\n        for (const item of this.items)\n            addPairToJSMap(ctx, map, item);\n        return map;\n    }\n    toString(ctx, onComment, onChompKeep) {\n        if (!ctx)\n            return JSON.stringify(this);\n        for (const item of this.items) {\n            if (!isPair(item))\n                throw new Error(`Map items must all be pairs; found ${JSON.stringify(item)} instead`);\n        }\n        if (!ctx.allNullValues && this.hasAllNullValues(false))\n            ctx = Object.assign({}, ctx, { allNullValues: true });\n        return stringifyCollection(this, ctx, {\n            blockItemPrefix: '',\n            flowChars: { start: '{', end: '}' },\n            itemIndent: ctx.indent || '',\n            onChompKeep,\n            onComment\n        });\n    }\n}\n\nexport { YAMLMap, findPair };\n","import { isMap } from '../../nodes/Node.js';\nimport { createPair } from '../../nodes/Pair.js';\nimport { YAMLMap } from '../../nodes/YAMLMap.js';\n\nfunction createMap(schema, obj, ctx) {\n    const { keepUndefined, replacer } = ctx;\n    const map = new YAMLMap(schema);\n    const add = (key, value) => {\n        if (typeof replacer === 'function')\n            value = replacer.call(obj, key, value);\n        else if (Array.isArray(replacer) && !replacer.includes(key))\n            return;\n        if (value !== undefined || keepUndefined)\n            map.items.push(createPair(key, value, ctx));\n    };\n    if (obj instanceof Map) {\n        for (const [key, value] of obj)\n            add(key, value);\n    }\n    else if (obj && typeof obj === 'object') {\n        for (const key of Object.keys(obj))\n            add(key, obj[key]);\n    }\n    if (typeof schema.sortMapEntries === 'function') {\n        map.items.sort(schema.sortMapEntries);\n    }\n    return map;\n}\nconst map = {\n    collection: 'map',\n    createNode: createMap,\n    default: true,\n    nodeClass: YAMLMap,\n    tag: 'tag:yaml.org,2002:map',\n    resolve(map, onError) {\n        if (!isMap(map))\n            onError('Expected a mapping for this tag');\n        return map;\n    }\n};\n\nexport { map };\n","import { stringifyCollection } from '../stringify/stringifyCollection.js';\nimport { Collection } from './Collection.js';\nimport { SEQ, isScalar } from './Node.js';\nimport { isScalarValue } from './Scalar.js';\nimport { toJS } from './toJS.js';\n\nclass YAMLSeq extends Collection {\n    static get tagName() {\n        return 'tag:yaml.org,2002:seq';\n    }\n    constructor(schema) {\n        super(SEQ, schema);\n        this.items = [];\n    }\n    add(value) {\n        this.items.push(value);\n    }\n    /**\n     * Removes a value from the collection.\n     *\n     * `key` must contain a representation of an integer for this to succeed.\n     * It may be wrapped in a `Scalar`.\n     *\n     * @returns `true` if the item was found and removed.\n     */\n    delete(key) {\n        const idx = asItemIndex(key);\n        if (typeof idx !== 'number')\n            return false;\n        const del = this.items.splice(idx, 1);\n        return del.length > 0;\n    }\n    get(key, keepScalar) {\n        const idx = asItemIndex(key);\n        if (typeof idx !== 'number')\n            return undefined;\n        const it = this.items[idx];\n        return !keepScalar && isScalar(it) ? it.value : it;\n    }\n    /**\n     * Checks if the collection includes a value with the key `key`.\n     *\n     * `key` must contain a representation of an integer for this to succeed.\n     * It may be wrapped in a `Scalar`.\n     */\n    has(key) {\n        const idx = asItemIndex(key);\n        return typeof idx === 'number' && idx < this.items.length;\n    }\n    /**\n     * Sets a value in this collection. For `!!set`, `value` needs to be a\n     * boolean to add/remove the item from the set.\n     *\n     * If `key` does not contain a representation of an integer, this will throw.\n     * It may be wrapped in a `Scalar`.\n     */\n    set(key, value) {\n        const idx = asItemIndex(key);\n        if (typeof idx !== 'number')\n            throw new Error(`Expected a valid index, not ${key}.`);\n        const prev = this.items[idx];\n        if (isScalar(prev) && isScalarValue(value))\n            prev.value = value;\n        else\n            this.items[idx] = value;\n    }\n    toJSON(_, ctx) {\n        const seq = [];\n        if (ctx?.onCreate)\n            ctx.onCreate(seq);\n        let i = 0;\n        for (const item of this.items)\n            seq.push(toJS(item, String(i++), ctx));\n        return seq;\n    }\n    toString(ctx, onComment, onChompKeep) {\n        if (!ctx)\n            return JSON.stringify(this);\n        return stringifyCollection(this, ctx, {\n            blockItemPrefix: '- ',\n            flowChars: { start: '[', end: ']' },\n            itemIndent: (ctx.indent || '') + '  ',\n            onChompKeep,\n            onComment\n        });\n    }\n}\nfunction asItemIndex(key) {\n    let idx = isScalar(key) ? key.value : key;\n    if (idx && typeof idx === 'string')\n        idx = Number(idx);\n    return typeof idx === 'number' && Number.isInteger(idx) && idx >= 0\n        ? idx\n        : null;\n}\n\nexport { YAMLSeq };\n","import { createNode } from '../../doc/createNode.js';\nimport { isSeq } from '../../nodes/Node.js';\nimport { YAMLSeq } from '../../nodes/YAMLSeq.js';\n\nfunction createSeq(schema, obj, ctx) {\n    const { replacer } = ctx;\n    const seq = new YAMLSeq(schema);\n    if (obj && Symbol.iterator in Object(obj)) {\n        let i = 0;\n        for (let it of obj) {\n            if (typeof replacer === 'function') {\n                const key = obj instanceof Set ? it : String(i++);\n                it = replacer.call(obj, key, it);\n            }\n            seq.items.push(createNode(it, undefined, ctx));\n        }\n    }\n    return seq;\n}\nconst seq = {\n    collection: 'seq',\n    createNode: createSeq,\n    default: true,\n    nodeClass: YAMLSeq,\n    tag: 'tag:yaml.org,2002:seq',\n    resolve(seq, onError) {\n        if (!isSeq(seq))\n            onError('Expected a sequence for this tag');\n        return seq;\n    }\n};\n\nexport { seq };\n","import { stringifyString } from '../../stringify/stringifyString.js';\n\nconst string = {\n    identify: value => typeof value === 'string',\n    default: true,\n    tag: 'tag:yaml.org,2002:str',\n    resolve: str => str,\n    stringify(item, ctx, onComment, onChompKeep) {\n        ctx = Object.assign({ actualString: true }, ctx);\n        return stringifyString(item, ctx, onComment, onChompKeep);\n    }\n};\n\nexport { string };\n","import { Scalar } from '../../nodes/Scalar.js';\n\nconst nullTag = {\n    identify: value => value == null,\n    createNode: () => new Scalar(null),\n    default: true,\n    tag: 'tag:yaml.org,2002:null',\n    test: /^(?:~|[Nn]ull|NULL)?$/,\n    resolve: () => new Scalar(null),\n    stringify: ({ source }, ctx) => typeof source === 'string' && nullTag.test.test(source)\n        ? source\n        : ctx.options.nullStr\n};\n\nexport { nullTag };\n","import { Scalar } from '../../nodes/Scalar.js';\n\nconst boolTag = {\n    identify: value => typeof value === 'boolean',\n    default: true,\n    tag: 'tag:yaml.org,2002:bool',\n    test: /^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,\n    resolve: str => new Scalar(str[0] === 't' || str[0] === 'T'),\n    stringify({ source, value }, ctx) {\n        if (source && boolTag.test.test(source)) {\n            const sv = source[0] === 't' || source[0] === 'T';\n            if (value === sv)\n                return source;\n        }\n        return value ? ctx.options.trueStr : ctx.options.falseStr;\n    }\n};\n\nexport { boolTag };\n","function stringifyNumber({ format, minFractionDigits, tag, value }) {\n    if (typeof value === 'bigint')\n        return String(value);\n    const num = typeof value === 'number' ? value : Number(value);\n    if (!isFinite(num))\n        return isNaN(num) ? '.nan' : num < 0 ? '-.inf' : '.inf';\n    let n = JSON.stringify(value);\n    if (!format &&\n        minFractionDigits &&\n        (!tag || tag === 'tag:yaml.org,2002:float') &&\n        /^\\d/.test(n)) {\n        let i = n.indexOf('.');\n        if (i < 0) {\n            i = n.length;\n            n += '.';\n        }\n        let d = minFractionDigits - (n.length - i - 1);\n        while (d-- > 0)\n            n += '0';\n    }\n    return n;\n}\n\nexport { stringifyNumber };\n","import { Scalar } from '../../nodes/Scalar.js';\nimport { stringifyNumber } from '../../stringify/stringifyNumber.js';\n\nconst floatNaN = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    test: /^(?:[-+]?\\.(?:inf|Inf|INF|nan|NaN|NAN))$/,\n    resolve: str => str.slice(-3).toLowerCase() === 'nan'\n        ? NaN\n        : str[0] === '-'\n            ? Number.NEGATIVE_INFINITY\n            : Number.POSITIVE_INFINITY,\n    stringify: stringifyNumber\n};\nconst floatExp = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    format: 'EXP',\n    test: /^[-+]?(?:\\.[0-9]+|[0-9]+(?:\\.[0-9]*)?)[eE][-+]?[0-9]+$/,\n    resolve: str => parseFloat(str),\n    stringify(node) {\n        const num = Number(node.value);\n        return isFinite(num) ? num.toExponential() : stringifyNumber(node);\n    }\n};\nconst float = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    test: /^[-+]?(?:\\.[0-9]+|[0-9]+\\.[0-9]*)$/,\n    resolve(str) {\n        const node = new Scalar(parseFloat(str));\n        const dot = str.indexOf('.');\n        if (dot !== -1 && str[str.length - 1] === '0')\n            node.minFractionDigits = str.length - dot - 1;\n        return node;\n    },\n    stringify: stringifyNumber\n};\n\nexport { float, floatExp, floatNaN };\n","import { stringifyNumber } from '../../stringify/stringifyNumber.js';\n\nconst intIdentify = (value) => typeof value === 'bigint' || Number.isInteger(value);\nconst intResolve = (str, offset, radix, { intAsBigInt }) => (intAsBigInt ? BigInt(str) : parseInt(str.substring(offset), radix));\nfunction intStringify(node, radix, prefix) {\n    const { value } = node;\n    if (intIdentify(value) && value >= 0)\n        return prefix + value.toString(radix);\n    return stringifyNumber(node);\n}\nconst intOct = {\n    identify: value => intIdentify(value) && value >= 0,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    format: 'OCT',\n    test: /^0o[0-7]+$/,\n    resolve: (str, _onError, opt) => intResolve(str, 2, 8, opt),\n    stringify: node => intStringify(node, 8, '0o')\n};\nconst int = {\n    identify: intIdentify,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    test: /^[-+]?[0-9]+$/,\n    resolve: (str, _onError, opt) => intResolve(str, 0, 10, opt),\n    stringify: stringifyNumber\n};\nconst intHex = {\n    identify: value => intIdentify(value) && value >= 0,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    format: 'HEX',\n    test: /^0x[0-9a-fA-F]+$/,\n    resolve: (str, _onError, opt) => intResolve(str, 2, 16, opt),\n    stringify: node => intStringify(node, 16, '0x')\n};\n\nexport { int, intHex, intOct };\n","import { map } from '../common/map.js';\nimport { nullTag } from '../common/null.js';\nimport { seq } from '../common/seq.js';\nimport { string } from '../common/string.js';\nimport { boolTag } from './bool.js';\nimport { floatNaN, floatExp, float } from './float.js';\nimport { intOct, int, intHex } from './int.js';\n\nconst schema = [\n    map,\n    seq,\n    string,\n    nullTag,\n    boolTag,\n    intOct,\n    int,\n    intHex,\n    floatNaN,\n    floatExp,\n    float\n];\n\nexport { schema };\n","import { Scalar } from '../../nodes/Scalar.js';\nimport { map } from '../common/map.js';\nimport { seq } from '../common/seq.js';\n\nfunction intIdentify(value) {\n    return typeof value === 'bigint' || Number.isInteger(value);\n}\nconst stringifyJSON = ({ value }) => JSON.stringify(value);\nconst jsonScalars = [\n    {\n        identify: value => typeof value === 'string',\n        default: true,\n        tag: 'tag:yaml.org,2002:str',\n        resolve: str => str,\n        stringify: stringifyJSON\n    },\n    {\n        identify: value => value == null,\n        createNode: () => new Scalar(null),\n        default: true,\n        tag: 'tag:yaml.org,2002:null',\n        test: /^null$/,\n        resolve: () => null,\n        stringify: stringifyJSON\n    },\n    {\n        identify: value => typeof value === 'boolean',\n        default: true,\n        tag: 'tag:yaml.org,2002:bool',\n        test: /^true|false$/,\n        resolve: str => str === 'true',\n        stringify: stringifyJSON\n    },\n    {\n        identify: intIdentify,\n        default: true,\n        tag: 'tag:yaml.org,2002:int',\n        test: /^-?(?:0|[1-9][0-9]*)$/,\n        resolve: (str, _onError, { intAsBigInt }) => intAsBigInt ? BigInt(str) : parseInt(str, 10),\n        stringify: ({ value }) => intIdentify(value) ? value.toString() : JSON.stringify(value)\n    },\n    {\n        identify: value => typeof value === 'number',\n        default: true,\n        tag: 'tag:yaml.org,2002:float',\n        test: /^-?(?:0|[1-9][0-9]*)(?:\\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,\n        resolve: str => parseFloat(str),\n        stringify: stringifyJSON\n    }\n];\nconst jsonError = {\n    default: true,\n    tag: '',\n    test: /^/,\n    resolve(str, onError) {\n        onError(`Unresolved plain scalar ${JSON.stringify(str)}`);\n        return str;\n    }\n};\nconst schema = [map, seq].concat(jsonScalars, jsonError);\n\nexport { schema };\n","import { Scalar } from '../../nodes/Scalar.js';\nimport { stringifyString } from '../../stringify/stringifyString.js';\n\nconst binary = {\n    identify: value => value instanceof Uint8Array,\n    default: false,\n    tag: 'tag:yaml.org,2002:binary',\n    /**\n     * Returns a Buffer in node and an Uint8Array in browsers\n     *\n     * To use the resulting buffer as an image, you'll want to do something like:\n     *\n     *   const blob = new Blob([buffer], { type: 'image/jpeg' })\n     *   document.querySelector('#photo').src = URL.createObjectURL(blob)\n     */\n    resolve(src, onError) {\n        if (typeof Buffer === 'function') {\n            return Buffer.from(src, 'base64');\n        }\n        else if (typeof atob === 'function') {\n            // On IE 11, atob() can't handle newlines\n            const str = atob(src.replace(/[\\n\\r]/g, ''));\n            const buffer = new Uint8Array(str.length);\n            for (let i = 0; i < str.length; ++i)\n                buffer[i] = str.charCodeAt(i);\n            return buffer;\n        }\n        else {\n            onError('This environment does not support reading binary tags; either Buffer or atob is required');\n            return src;\n        }\n    },\n    stringify({ comment, type, value }, ctx, onComment, onChompKeep) {\n        const buf = value; // checked earlier by binary.identify()\n        let str;\n        if (typeof Buffer === 'function') {\n            str =\n                buf instanceof Buffer\n                    ? buf.toString('base64')\n                    : Buffer.from(buf.buffer).toString('base64');\n        }\n        else if (typeof btoa === 'function') {\n            let s = '';\n            for (let i = 0; i < buf.length; ++i)\n                s += String.fromCharCode(buf[i]);\n            str = btoa(s);\n        }\n        else {\n            throw new Error('This environment does not support writing binary tags; either Buffer or btoa is required');\n        }\n        if (!type)\n            type = Scalar.BLOCK_LITERAL;\n        if (type !== Scalar.QUOTE_DOUBLE) {\n            const lineWidth = Math.max(ctx.options.lineWidth - ctx.indent.length, ctx.options.minContentWidth);\n            const n = Math.ceil(str.length / lineWidth);\n            const lines = new Array(n);\n            for (let i = 0, o = 0; i < n; ++i, o += lineWidth) {\n                lines[i] = str.substr(o, lineWidth);\n            }\n            str = lines.join(type === Scalar.BLOCK_LITERAL ? '\\n' : ' ');\n        }\n        return stringifyString({ comment, type, value: str }, ctx, onComment, onChompKeep);\n    }\n};\n\nexport { binary };\n","import { isSeq, isPair, isMap } from '../../nodes/Node.js';\nimport { Pair, createPair } from '../../nodes/Pair.js';\nimport { Scalar } from '../../nodes/Scalar.js';\nimport { YAMLSeq } from '../../nodes/YAMLSeq.js';\n\nfunction resolvePairs(seq, onError) {\n    if (isSeq(seq)) {\n        for (let i = 0; i < seq.items.length; ++i) {\n            let item = seq.items[i];\n            if (isPair(item))\n                continue;\n            else if (isMap(item)) {\n                if (item.items.length > 1)\n                    onError('Each pair must have its own sequence indicator');\n                const pair = item.items[0] || new Pair(new Scalar(null));\n                if (item.commentBefore)\n                    pair.key.commentBefore = pair.key.commentBefore\n                        ? `${item.commentBefore}\\n${pair.key.commentBefore}`\n                        : item.commentBefore;\n                if (item.comment) {\n                    const cn = pair.value ?? pair.key;\n                    cn.comment = cn.comment\n                        ? `${item.comment}\\n${cn.comment}`\n                        : item.comment;\n                }\n                item = pair;\n            }\n            seq.items[i] = isPair(item) ? item : new Pair(item);\n        }\n    }\n    else\n        onError('Expected a sequence for this tag');\n    return seq;\n}\nfunction createPairs(schema, iterable, ctx) {\n    const { replacer } = ctx;\n    const pairs = new YAMLSeq(schema);\n    pairs.tag = 'tag:yaml.org,2002:pairs';\n    let i = 0;\n    if (iterable && Symbol.iterator in Object(iterable))\n        for (let it of iterable) {\n            if (typeof replacer === 'function')\n                it = replacer.call(iterable, String(i++), it);\n            let key, value;\n            if (Array.isArray(it)) {\n                if (it.length === 2) {\n                    key = it[0];\n                    value = it[1];\n                }\n                else\n                    throw new TypeError(`Expected [key, value] tuple: ${it}`);\n            }\n            else if (it && it instanceof Object) {\n                const keys = Object.keys(it);\n                if (keys.length === 1) {\n                    key = keys[0];\n                    value = it[key];\n                }\n                else\n                    throw new TypeError(`Expected { key: value } tuple: ${it}`);\n            }\n            else {\n                key = it;\n            }\n            pairs.items.push(createPair(key, value, ctx));\n        }\n    return pairs;\n}\nconst pairs = {\n    collection: 'seq',\n    default: false,\n    tag: 'tag:yaml.org,2002:pairs',\n    resolve: resolvePairs,\n    createNode: createPairs\n};\n\nexport { createPairs, pairs, resolvePairs };\n","import { YAMLSeq } from '../../nodes/YAMLSeq.js';\nimport { toJS } from '../../nodes/toJS.js';\nimport { isScalar, isPair } from '../../nodes/Node.js';\nimport { YAMLMap } from '../../nodes/YAMLMap.js';\nimport { resolvePairs, createPairs } from './pairs.js';\n\nclass YAMLOMap extends YAMLSeq {\n    constructor() {\n        super();\n        this.add = YAMLMap.prototype.add.bind(this);\n        this.delete = YAMLMap.prototype.delete.bind(this);\n        this.get = YAMLMap.prototype.get.bind(this);\n        this.has = YAMLMap.prototype.has.bind(this);\n        this.set = YAMLMap.prototype.set.bind(this);\n        this.tag = YAMLOMap.tag;\n    }\n    /**\n     * If `ctx` is given, the return type is actually `Map<unknown, unknown>`,\n     * but TypeScript won't allow widening the signature of a child method.\n     */\n    toJSON(_, ctx) {\n        if (!ctx)\n            return super.toJSON(_);\n        const map = new Map();\n        if (ctx?.onCreate)\n            ctx.onCreate(map);\n        for (const pair of this.items) {\n            let key, value;\n            if (isPair(pair)) {\n                key = toJS(pair.key, '', ctx);\n                value = toJS(pair.value, key, ctx);\n            }\n            else {\n                key = toJS(pair, '', ctx);\n            }\n            if (map.has(key))\n                throw new Error('Ordered maps must not include duplicate keys');\n            map.set(key, value);\n        }\n        return map;\n    }\n}\nYAMLOMap.tag = 'tag:yaml.org,2002:omap';\nconst omap = {\n    collection: 'seq',\n    identify: value => value instanceof Map,\n    nodeClass: YAMLOMap,\n    default: false,\n    tag: 'tag:yaml.org,2002:omap',\n    resolve(seq, onError) {\n        const pairs = resolvePairs(seq, onError);\n        const seenKeys = [];\n        for (const { key } of pairs.items) {\n            if (isScalar(key)) {\n                if (seenKeys.includes(key.value)) {\n                    onError(`Ordered maps must not include duplicate keys: ${key.value}`);\n                }\n                else {\n                    seenKeys.push(key.value);\n                }\n            }\n        }\n        return Object.assign(new YAMLOMap(), pairs);\n    },\n    createNode(schema, iterable, ctx) {\n        const pairs = createPairs(schema, iterable, ctx);\n        const omap = new YAMLOMap();\n        omap.items = pairs.items;\n        return omap;\n    }\n};\n\nexport { YAMLOMap, omap };\n","import { Scalar } from '../../nodes/Scalar.js';\n\nfunction boolStringify({ value, source }, ctx) {\n    const boolObj = value ? trueTag : falseTag;\n    if (source && boolObj.test.test(source))\n        return source;\n    return value ? ctx.options.trueStr : ctx.options.falseStr;\n}\nconst trueTag = {\n    identify: value => value === true,\n    default: true,\n    tag: 'tag:yaml.org,2002:bool',\n    test: /^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,\n    resolve: () => new Scalar(true),\n    stringify: boolStringify\n};\nconst falseTag = {\n    identify: value => value === false,\n    default: true,\n    tag: 'tag:yaml.org,2002:bool',\n    test: /^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,\n    resolve: () => new Scalar(false),\n    stringify: boolStringify\n};\n\nexport { falseTag, trueTag };\n","import { Scalar } from '../../nodes/Scalar.js';\nimport { stringifyNumber } from '../../stringify/stringifyNumber.js';\n\nconst floatNaN = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    test: /^[-+]?\\.(?:inf|Inf|INF|nan|NaN|NAN)$/,\n    resolve: (str) => str.slice(-3).toLowerCase() === 'nan'\n        ? NaN\n        : str[0] === '-'\n            ? Number.NEGATIVE_INFINITY\n            : Number.POSITIVE_INFINITY,\n    stringify: stringifyNumber\n};\nconst floatExp = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    format: 'EXP',\n    test: /^[-+]?(?:[0-9][0-9_]*)?(?:\\.[0-9_]*)?[eE][-+]?[0-9]+$/,\n    resolve: (str) => parseFloat(str.replace(/_/g, '')),\n    stringify(node) {\n        const num = Number(node.value);\n        return isFinite(num) ? num.toExponential() : stringifyNumber(node);\n    }\n};\nconst float = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    test: /^[-+]?(?:[0-9][0-9_]*)?\\.[0-9_]*$/,\n    resolve(str) {\n        const node = new Scalar(parseFloat(str.replace(/_/g, '')));\n        const dot = str.indexOf('.');\n        if (dot !== -1) {\n            const f = str.substring(dot + 1).replace(/_/g, '');\n            if (f[f.length - 1] === '0')\n                node.minFractionDigits = f.length;\n        }\n        return node;\n    },\n    stringify: stringifyNumber\n};\n\nexport { float, floatExp, floatNaN };\n","import { stringifyNumber } from '../../stringify/stringifyNumber.js';\n\nconst intIdentify = (value) => typeof value === 'bigint' || Number.isInteger(value);\nfunction intResolve(str, offset, radix, { intAsBigInt }) {\n    const sign = str[0];\n    if (sign === '-' || sign === '+')\n        offset += 1;\n    str = str.substring(offset).replace(/_/g, '');\n    if (intAsBigInt) {\n        switch (radix) {\n            case 2:\n                str = `0b${str}`;\n                break;\n            case 8:\n                str = `0o${str}`;\n                break;\n            case 16:\n                str = `0x${str}`;\n                break;\n        }\n        const n = BigInt(str);\n        return sign === '-' ? BigInt(-1) * n : n;\n    }\n    const n = parseInt(str, radix);\n    return sign === '-' ? -1 * n : n;\n}\nfunction intStringify(node, radix, prefix) {\n    const { value } = node;\n    if (intIdentify(value)) {\n        const str = value.toString(radix);\n        return value < 0 ? '-' + prefix + str.substr(1) : prefix + str;\n    }\n    return stringifyNumber(node);\n}\nconst intBin = {\n    identify: intIdentify,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    format: 'BIN',\n    test: /^[-+]?0b[0-1_]+$/,\n    resolve: (str, _onError, opt) => intResolve(str, 2, 2, opt),\n    stringify: node => intStringify(node, 2, '0b')\n};\nconst intOct = {\n    identify: intIdentify,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    format: 'OCT',\n    test: /^[-+]?0[0-7_]+$/,\n    resolve: (str, _onError, opt) => intResolve(str, 1, 8, opt),\n    stringify: node => intStringify(node, 8, '0')\n};\nconst int = {\n    identify: intIdentify,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    test: /^[-+]?[0-9][0-9_]*$/,\n    resolve: (str, _onError, opt) => intResolve(str, 0, 10, opt),\n    stringify: stringifyNumber\n};\nconst intHex = {\n    identify: intIdentify,\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    format: 'HEX',\n    test: /^[-+]?0x[0-9a-fA-F_]+$/,\n    resolve: (str, _onError, opt) => intResolve(str, 2, 16, opt),\n    stringify: node => intStringify(node, 16, '0x')\n};\n\nexport { int, intBin, intHex, intOct };\n","import { isMap, isPair, isScalar } from '../../nodes/Node.js';\nimport { createPair, Pair } from '../../nodes/Pair.js';\nimport { YAMLMap, findPair } from '../../nodes/YAMLMap.js';\n\nclass YAMLSet extends YAMLMap {\n    constructor(schema) {\n        super(schema);\n        this.tag = YAMLSet.tag;\n    }\n    add(key) {\n        let pair;\n        if (isPair(key))\n            pair = key;\n        else if (key &&\n            typeof key === 'object' &&\n            'key' in key &&\n            'value' in key &&\n            key.value === null)\n            pair = new Pair(key.key, null);\n        else\n            pair = new Pair(key, null);\n        const prev = findPair(this.items, pair.key);\n        if (!prev)\n            this.items.push(pair);\n    }\n    /**\n     * If `keepPair` is `true`, returns the Pair matching `key`.\n     * Otherwise, returns the value of that Pair's key.\n     */\n    get(key, keepPair) {\n        const pair = findPair(this.items, key);\n        return !keepPair && isPair(pair)\n            ? isScalar(pair.key)\n                ? pair.key.value\n                : pair.key\n            : pair;\n    }\n    set(key, value) {\n        if (typeof value !== 'boolean')\n            throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof value}`);\n        const prev = findPair(this.items, key);\n        if (prev && !value) {\n            this.items.splice(this.items.indexOf(prev), 1);\n        }\n        else if (!prev && value) {\n            this.items.push(new Pair(key));\n        }\n    }\n    toJSON(_, ctx) {\n        return super.toJSON(_, ctx, Set);\n    }\n    toString(ctx, onComment, onChompKeep) {\n        if (!ctx)\n            return JSON.stringify(this);\n        if (this.hasAllNullValues(true))\n            return super.toString(Object.assign({}, ctx, { allNullValues: true }), onComment, onChompKeep);\n        else\n            throw new Error('Set items must all have null values');\n    }\n}\nYAMLSet.tag = 'tag:yaml.org,2002:set';\nconst set = {\n    collection: 'map',\n    identify: value => value instanceof Set,\n    nodeClass: YAMLSet,\n    default: false,\n    tag: 'tag:yaml.org,2002:set',\n    resolve(map, onError) {\n        if (isMap(map)) {\n            if (map.hasAllNullValues(true))\n                return Object.assign(new YAMLSet(), map);\n            else\n                onError('Set items must all have null values');\n        }\n        else\n            onError('Expected a mapping for this tag');\n        return map;\n    },\n    createNode(schema, iterable, ctx) {\n        const { replacer } = ctx;\n        const set = new YAMLSet(schema);\n        if (iterable && Symbol.iterator in Object(iterable))\n            for (let value of iterable) {\n                if (typeof replacer === 'function')\n                    value = replacer.call(iterable, value, value);\n                set.items.push(createPair(value, null, ctx));\n            }\n        return set;\n    }\n};\n\nexport { YAMLSet, set };\n","import { stringifyNumber } from '../../stringify/stringifyNumber.js';\n\n/** Internal types handle bigint as number, because TS can't figure it out. */\nfunction parseSexagesimal(str, asBigInt) {\n    const sign = str[0];\n    const parts = sign === '-' || sign === '+' ? str.substring(1) : str;\n    const num = (n) => asBigInt ? BigInt(n) : Number(n);\n    const res = parts\n        .replace(/_/g, '')\n        .split(':')\n        .reduce((res, p) => res * num(60) + num(p), num(0));\n    return (sign === '-' ? num(-1) * res : res);\n}\n/**\n * hhhh:mm:ss.sss\n *\n * Internal types handle bigint as number, because TS can't figure it out.\n */\nfunction stringifySexagesimal(node) {\n    let { value } = node;\n    let num = (n) => n;\n    if (typeof value === 'bigint')\n        num = n => BigInt(n);\n    else if (isNaN(value) || !isFinite(value))\n        return stringifyNumber(node);\n    let sign = '';\n    if (value < 0) {\n        sign = '-';\n        value *= num(-1);\n    }\n    const _60 = num(60);\n    const parts = [value % _60]; // seconds, including ms\n    if (value < 60) {\n        parts.unshift(0); // at least one : is required\n    }\n    else {\n        value = (value - parts[0]) / _60;\n        parts.unshift(value % _60); // minutes\n        if (value >= 60) {\n            value = (value - parts[0]) / _60;\n            parts.unshift(value); // hours\n        }\n    }\n    return (sign +\n        parts\n            .map(n => (n < 10 ? '0' + String(n) : String(n)))\n            .join(':')\n            .replace(/000000\\d*$/, '') // % 60 may introduce error\n    );\n}\nconst intTime = {\n    identify: value => typeof value === 'bigint' || Number.isInteger(value),\n    default: true,\n    tag: 'tag:yaml.org,2002:int',\n    format: 'TIME',\n    test: /^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,\n    resolve: (str, _onError, { intAsBigInt }) => parseSexagesimal(str, intAsBigInt),\n    stringify: stringifySexagesimal\n};\nconst floatTime = {\n    identify: value => typeof value === 'number',\n    default: true,\n    tag: 'tag:yaml.org,2002:float',\n    format: 'TIME',\n    test: /^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*$/,\n    resolve: str => parseSexagesimal(str, false),\n    stringify: stringifySexagesimal\n};\nconst timestamp = {\n    identify: value => value instanceof Date,\n    default: true,\n    tag: 'tag:yaml.org,2002:timestamp',\n    // If the time zone is omitted, the timestamp is assumed to be specified in UTC. The time part\n    // may be omitted altogether, resulting in a date format. In such a case, the time part is\n    // assumed to be 00:00:00Z (start of day, UTC).\n    test: RegExp('^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})' + // YYYY-Mm-Dd\n        '(?:' + // time is optional\n        '(?:t|T|[ \\\\t]+)' + // t | T | whitespace\n        '([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\\\.[0-9]+)?)' + // Hh:Mm:Ss(.ss)?\n        '(?:[ \\\\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?' + // Z | +5 | -03:30\n        ')?$'),\n    resolve(str) {\n        const match = str.match(timestamp.test);\n        if (!match)\n            throw new Error('!!timestamp expects a date, starting with yyyy-mm-dd');\n        const [, year, month, day, hour, minute, second] = match.map(Number);\n        const millisec = match[7] ? Number((match[7] + '00').substr(1, 3)) : 0;\n        let date = Date.UTC(year, month - 1, day, hour || 0, minute || 0, second || 0, millisec);\n        const tz = match[8];\n        if (tz && tz !== 'Z') {\n            let d = parseSexagesimal(tz, false);\n            if (Math.abs(d) < 30)\n                d *= 60;\n            date -= 60000 * d;\n        }\n        return new Date(date);\n    },\n    stringify: ({ value }) => value.toISOString().replace(/((T00:00)?:00)?\\.000Z$/, '')\n};\n\nexport { floatTime, intTime, timestamp };\n","import { map } from '../common/map.js';\nimport { nullTag } from '../common/null.js';\nimport { seq } from '../common/seq.js';\nimport { string } from '../common/string.js';\nimport { binary } from './binary.js';\nimport { trueTag, falseTag } from './bool.js';\nimport { floatNaN, floatExp, float } from './float.js';\nimport { intBin, intOct, int, intHex } from './int.js';\nimport { omap } from './omap.js';\nimport { pairs } from './pairs.js';\nimport { set } from './set.js';\nimport { intTime, floatTime, timestamp } from './timestamp.js';\n\nconst schema = [\n    map,\n    seq,\n    string,\n    nullTag,\n    trueTag,\n    falseTag,\n    intBin,\n    intOct,\n    int,\n    intHex,\n    floatNaN,\n    floatExp,\n    float,\n    binary,\n    omap,\n    pairs,\n    set,\n    intTime,\n    floatTime,\n    timestamp\n];\n\nexport { schema };\n","import { map } from './common/map.js';\nimport { nullTag } from './common/null.js';\nimport { seq } from './common/seq.js';\nimport { string } from './common/string.js';\nimport { boolTag } from './core/bool.js';\nimport { float, floatExp, floatNaN } from './core/float.js';\nimport { int, intHex, intOct } from './core/int.js';\nimport { schema } from './core/schema.js';\nimport { schema as schema$1 } from './json/schema.js';\nimport { binary } from './yaml-1.1/binary.js';\nimport { omap } from './yaml-1.1/omap.js';\nimport { pairs } from './yaml-1.1/pairs.js';\nimport { schema as schema$2 } from './yaml-1.1/schema.js';\nimport { set } from './yaml-1.1/set.js';\nimport { floatTime, intTime, timestamp } from './yaml-1.1/timestamp.js';\n\nconst schemas = new Map([\n    ['core', schema],\n    ['failsafe', [map, seq, string]],\n    ['json', schema$1],\n    ['yaml11', schema$2],\n    ['yaml-1.1', schema$2]\n]);\nconst tagsByName = {\n    binary,\n    bool: boolTag,\n    float,\n    floatExp,\n    floatNaN,\n    floatTime,\n    int,\n    intHex,\n    intOct,\n    intTime,\n    map,\n    null: nullTag,\n    omap,\n    pairs,\n    seq,\n    set,\n    timestamp\n};\nconst coreKnownTags = {\n    'tag:yaml.org,2002:binary': binary,\n    'tag:yaml.org,2002:omap': omap,\n    'tag:yaml.org,2002:pairs': pairs,\n    'tag:yaml.org,2002:set': set,\n    'tag:yaml.org,2002:timestamp': timestamp\n};\nfunction getTags(customTags, schemaName) {\n    let tags = schemas.get(schemaName);\n    if (!tags) {\n        if (Array.isArray(customTags))\n            tags = [];\n        else {\n            const keys = Array.from(schemas.keys())\n                .filter(key => key !== 'yaml11')\n                .map(key => JSON.stringify(key))\n                .join(', ');\n            throw new Error(`Unknown schema \"${schemaName}\"; use one of ${keys} or define customTags array`);\n        }\n    }\n    if (Array.isArray(customTags)) {\n        for (const tag of customTags)\n            tags = tags.concat(tag);\n    }\n    else if (typeof customTags === 'function') {\n        tags = customTags(tags.slice());\n    }\n    return tags.map(tag => {\n        if (typeof tag !== 'string')\n            return tag;\n        const tagObj = tagsByName[tag];\n        if (tagObj)\n            return tagObj;\n        const keys = Object.keys(tagsByName)\n            .map(key => JSON.stringify(key))\n            .join(', ');\n        throw new Error(`Unknown custom tag \"${tag}\"; use one of ${keys}`);\n    });\n}\n\nexport { coreKnownTags, getTags };\n","import { MAP, SCALAR, SEQ } from '../nodes/Node.js';\nimport { map } from './common/map.js';\nimport { seq } from './common/seq.js';\nimport { string } from './common/string.js';\nimport { getTags, coreKnownTags } from './tags.js';\n\nconst sortMapEntriesByKey = (a, b) => a.key < b.key ? -1 : a.key > b.key ? 1 : 0;\nclass Schema {\n    constructor({ compat, customTags, merge, resolveKnownTags, schema, sortMapEntries, toStringDefaults }) {\n        this.compat = Array.isArray(compat)\n            ? getTags(compat, 'compat')\n            : compat\n                ? getTags(null, compat)\n                : null;\n        this.merge = !!merge;\n        this.name = (typeof schema === 'string' && schema) || 'core';\n        this.knownTags = resolveKnownTags ? coreKnownTags : {};\n        this.tags = getTags(customTags, this.name);\n        this.toStringOptions = toStringDefaults ?? null;\n        Object.defineProperty(this, MAP, { value: map });\n        Object.defineProperty(this, SCALAR, { value: string });\n        Object.defineProperty(this, SEQ, { value: seq });\n        // Used by createMap()\n        this.sortMapEntries =\n            typeof sortMapEntries === 'function'\n                ? sortMapEntries\n                : sortMapEntries === true\n                    ? sortMapEntriesByKey\n                    : null;\n    }\n    clone() {\n        const copy = Object.create(Schema.prototype, Object.getOwnPropertyDescriptors(this));\n        copy.tags = this.tags.slice();\n        return copy;\n    }\n}\n\nexport { Schema };\n","/**\n * Applies the JSON.parse reviver algorithm as defined in the ECMA-262 spec,\n * in section 24.5.1.1 \"Runtime Semantics: InternalizeJSONProperty\" of the\n * 2021 edition: https://tc39.es/ecma262/#sec-json.parse\n *\n * Includes extensions for handling Map and Set objects.\n */\nfunction applyReviver(reviver, obj, key, val) {\n    if (val && typeof val === 'object') {\n        if (Array.isArray(val)) {\n            for (let i = 0, len = val.length; i < len; ++i) {\n                const v0 = val[i];\n                const v1 = applyReviver(reviver, val, String(i), v0);\n                if (v1 === undefined)\n                    delete val[i];\n                else if (v1 !== v0)\n                    val[i] = v1;\n            }\n        }\n        else if (val instanceof Map) {\n            for (const k of Array.from(val.keys())) {\n                const v0 = val.get(k);\n                const v1 = applyReviver(reviver, val, k, v0);\n                if (v1 === undefined)\n                    val.delete(k);\n                else if (v1 !== v0)\n                    val.set(k, v1);\n            }\n        }\n        else if (val instanceof Set) {\n            for (const v0 of Array.from(val)) {\n                const v1 = applyReviver(reviver, val, v0, v0);\n                if (v1 === undefined)\n                    val.delete(v0);\n                else if (v1 !== v0) {\n                    val.delete(v0);\n                    val.add(v1);\n                }\n            }\n        }\n        else {\n            for (const [k, v0] of Object.entries(val)) {\n                const v1 = applyReviver(reviver, val, k, v0);\n                if (v1 === undefined)\n                    delete val[k];\n                else if (v1 !== v0)\n                    val[k] = v1;\n            }\n        }\n    }\n    return reviver.call(obj, key, val);\n}\n\nexport { applyReviver };\n","import { Alias } from '../nodes/Alias.js';\nimport { isEmptyPath, collectionFromPath } from '../nodes/Collection.js';\nimport { NODE_TYPE, DOC, isNode, isCollection, isScalar } from '../nodes/Node.js';\nimport { Pair } from '../nodes/Pair.js';\nimport { toJS } from '../nodes/toJS.js';\nimport { Schema } from '../schema/Schema.js';\nimport { stringify } from '../stringify/stringify.js';\nimport { stringifyDocument } from '../stringify/stringifyDocument.js';\nimport { anchorNames, findNewAnchor, createNodeAnchors } from './anchors.js';\nimport { applyReviver } from './applyReviver.js';\nimport { createNode } from './createNode.js';\nimport { Directives } from './directives.js';\n\nclass Document {\n    constructor(value, replacer, options) {\n        /** A comment before this Document */\n        this.commentBefore = null;\n        /** A comment immediately after this Document */\n        this.comment = null;\n        /** Errors encountered during parsing. */\n        this.errors = [];\n        /** Warnings encountered during parsing. */\n        this.warnings = [];\n        Object.defineProperty(this, NODE_TYPE, { value: DOC });\n        let _replacer = null;\n        if (typeof replacer === 'function' || Array.isArray(replacer)) {\n            _replacer = replacer;\n        }\n        else if (options === undefined && replacer) {\n            options = replacer;\n            replacer = undefined;\n        }\n        const opt = Object.assign({\n            intAsBigInt: false,\n            keepSourceTokens: false,\n            logLevel: 'warn',\n            prettyErrors: true,\n            strict: true,\n            uniqueKeys: true,\n            version: '1.2'\n        }, options);\n        this.options = opt;\n        let { version } = opt;\n        if (options?._directives) {\n            this.directives = options._directives.atDocument();\n            if (this.directives.yaml.explicit)\n                version = this.directives.yaml.version;\n        }\n        else\n            this.directives = new Directives({ version });\n        this.setSchema(version, options);\n        if (value === undefined)\n            this.contents = null;\n        else {\n            this.contents = this.createNode(value, _replacer, options);\n        }\n    }\n    /**\n     * Create a deep copy of this Document and its contents.\n     *\n     * Custom Node values that inherit from `Object` still refer to their original instances.\n     */\n    clone() {\n        const copy = Object.create(Document.prototype, {\n            [NODE_TYPE]: { value: DOC }\n        });\n        copy.commentBefore = this.commentBefore;\n        copy.comment = this.comment;\n        copy.errors = this.errors.slice();\n        copy.warnings = this.warnings.slice();\n        copy.options = Object.assign({}, this.options);\n        if (this.directives)\n            copy.directives = this.directives.clone();\n        copy.schema = this.schema.clone();\n        copy.contents = isNode(this.contents)\n            ? this.contents.clone(copy.schema)\n            : this.contents;\n        if (this.range)\n            copy.range = this.range.slice();\n        return copy;\n    }\n    /** Adds a value to the document. */\n    add(value) {\n        if (assertCollection(this.contents))\n            this.contents.add(value);\n    }\n    /** Adds a value to the document. */\n    addIn(path, value) {\n        if (assertCollection(this.contents))\n            this.contents.addIn(path, value);\n    }\n    /**\n     * Create a new `Alias` node, ensuring that the target `node` has the required anchor.\n     *\n     * If `node` already has an anchor, `name` is ignored.\n     * Otherwise, the `node.anchor` value will be set to `name`,\n     * or if an anchor with that name is already present in the document,\n     * `name` will be used as a prefix for a new unique anchor.\n     * If `name` is undefined, the generated anchor will use 'a' as a prefix.\n     */\n    createAlias(node, name) {\n        if (!node.anchor) {\n            const prev = anchorNames(this);\n            node.anchor =\n                // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n                !name || prev.has(name) ? findNewAnchor(name || 'a', prev) : name;\n        }\n        return new Alias(node.anchor);\n    }\n    createNode(value, replacer, options) {\n        let _replacer = undefined;\n        if (typeof replacer === 'function') {\n            value = replacer.call({ '': value }, '', value);\n            _replacer = replacer;\n        }\n        else if (Array.isArray(replacer)) {\n            const keyToStr = (v) => typeof v === 'number' || v instanceof String || v instanceof Number;\n            const asStr = replacer.filter(keyToStr).map(String);\n            if (asStr.length > 0)\n                replacer = replacer.concat(asStr);\n            _replacer = replacer;\n        }\n        else if (options === undefined && replacer) {\n            options = replacer;\n            replacer = undefined;\n        }\n        const { aliasDuplicateObjects, anchorPrefix, flow, keepUndefined, onTagObj, tag } = options ?? {};\n        const { onAnchor, setAnchors, sourceObjects } = createNodeAnchors(this, \n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        anchorPrefix || 'a');\n        const ctx = {\n            aliasDuplicateObjects: aliasDuplicateObjects ?? true,\n            keepUndefined: keepUndefined ?? false,\n            onAnchor,\n            onTagObj,\n            replacer: _replacer,\n            schema: this.schema,\n            sourceObjects\n        };\n        const node = createNode(value, tag, ctx);\n        if (flow && isCollection(node))\n            node.flow = true;\n        setAnchors();\n        return node;\n    }\n    /**\n     * Convert a key and a value into a `Pair` using the current schema,\n     * recursively wrapping all values as `Scalar` or `Collection` nodes.\n     */\n    createPair(key, value, options = {}) {\n        const k = this.createNode(key, null, options);\n        const v = this.createNode(value, null, options);\n        return new Pair(k, v);\n    }\n    /**\n     * Removes a value from the document.\n     * @returns `true` if the item was found and removed.\n     */\n    delete(key) {\n        return assertCollection(this.contents) ? this.contents.delete(key) : false;\n    }\n    /**\n     * Removes a value from the document.\n     * @returns `true` if the item was found and removed.\n     */\n    deleteIn(path) {\n        if (isEmptyPath(path)) {\n            if (this.contents == null)\n                return false;\n            this.contents = null;\n            return true;\n        }\n        return assertCollection(this.contents)\n            ? this.contents.deleteIn(path)\n            : false;\n    }\n    /**\n     * Returns item at `key`, or `undefined` if not found. By default unwraps\n     * scalar values from their surrounding node; to disable set `keepScalar` to\n     * `true` (collections are always returned intact).\n     */\n    get(key, keepScalar) {\n        return isCollection(this.contents)\n            ? this.contents.get(key, keepScalar)\n            : undefined;\n    }\n    /**\n     * Returns item at `path`, or `undefined` if not found. By default unwraps\n     * scalar values from their surrounding node; to disable set `keepScalar` to\n     * `true` (collections are always returned intact).\n     */\n    getIn(path, keepScalar) {\n        if (isEmptyPath(path))\n            return !keepScalar && isScalar(this.contents)\n                ? this.contents.value\n                : this.contents;\n        return isCollection(this.contents)\n            ? this.contents.getIn(path, keepScalar)\n            : undefined;\n    }\n    /**\n     * Checks if the document includes a value with the key `key`.\n     */\n    has(key) {\n        return isCollection(this.contents) ? this.contents.has(key) : false;\n    }\n    /**\n     * Checks if the document includes a value at `path`.\n     */\n    hasIn(path) {\n        if (isEmptyPath(path))\n            return this.contents !== undefined;\n        return isCollection(this.contents) ? this.contents.hasIn(path) : false;\n    }\n    /**\n     * Sets a value in this document. For `!!set`, `value` needs to be a\n     * boolean to add/remove the item from the set.\n     */\n    set(key, value) {\n        if (this.contents == null) {\n            this.contents = collectionFromPath(this.schema, [key], value);\n        }\n        else if (assertCollection(this.contents)) {\n            this.contents.set(key, value);\n        }\n    }\n    /**\n     * Sets a value in this document. For `!!set`, `value` needs to be a\n     * boolean to add/remove the item from the set.\n     */\n    setIn(path, value) {\n        if (isEmptyPath(path))\n            this.contents = value;\n        else if (this.contents == null) {\n            this.contents = collectionFromPath(this.schema, Array.from(path), value);\n        }\n        else if (assertCollection(this.contents)) {\n            this.contents.setIn(path, value);\n        }\n    }\n    /**\n     * Change the YAML version and schema used by the document.\n     * A `null` version disables support for directives, explicit tags, anchors, and aliases.\n     * It also requires the `schema` option to be given as a `Schema` instance value.\n     *\n     * Overrides all previously set schema options.\n     */\n    setSchema(version, options = {}) {\n        if (typeof version === 'number')\n            version = String(version);\n        let opt;\n        switch (version) {\n            case '1.1':\n                if (this.directives)\n                    this.directives.yaml.version = '1.1';\n                else\n                    this.directives = new Directives({ version: '1.1' });\n                opt = { merge: true, resolveKnownTags: false, schema: 'yaml-1.1' };\n                break;\n            case '1.2':\n            case 'next':\n                if (this.directives)\n                    this.directives.yaml.version = version;\n                else\n                    this.directives = new Directives({ version });\n                opt = { merge: false, resolveKnownTags: true, schema: 'core' };\n                break;\n            case null:\n                if (this.directives)\n                    delete this.directives;\n                opt = null;\n                break;\n            default: {\n                const sv = JSON.stringify(version);\n                throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${sv}`);\n            }\n        }\n        // Not using `instanceof Schema` to allow for duck typing\n        if (options.schema instanceof Object)\n            this.schema = options.schema;\n        else if (opt)\n            this.schema = new Schema(Object.assign(opt, options));\n        else\n            throw new Error(`With a null YAML version, the { schema: Schema } option is required`);\n    }\n    // json & jsonArg are only used from toJSON()\n    toJS({ json, jsonArg, mapAsMap, maxAliasCount, onAnchor, reviver } = {}) {\n        const ctx = {\n            anchors: new Map(),\n            doc: this,\n            keep: !json,\n            mapAsMap: mapAsMap === true,\n            mapKeyWarned: false,\n            maxAliasCount: typeof maxAliasCount === 'number' ? maxAliasCount : 100,\n            stringify\n        };\n        const res = toJS(this.contents, jsonArg ?? '', ctx);\n        if (typeof onAnchor === 'function')\n            for (const { count, res } of ctx.anchors.values())\n                onAnchor(res, count);\n        return typeof reviver === 'function'\n            ? applyReviver(reviver, { '': res }, '', res)\n            : res;\n    }\n    /**\n     * A JSON representation of the document `contents`.\n     *\n     * @param jsonArg Used by `JSON.stringify` to indicate the array index or\n     *   property name.\n     */\n    toJSON(jsonArg, onAnchor) {\n        return this.toJS({ json: true, jsonArg, mapAsMap: false, onAnchor });\n    }\n    /** A YAML representation of the document. */\n    toString(options = {}) {\n        if (this.errors.length > 0)\n            throw new Error('Document with errors cannot be stringified');\n        if ('indent' in options &&\n            (!Number.isInteger(options.indent) || Number(options.indent) <= 0)) {\n            const s = JSON.stringify(options.indent);\n            throw new Error(`\"indent\" option must be a positive integer, not ${s}`);\n        }\n        return stringifyDocument(this, options);\n    }\n}\nfunction assertCollection(contents) {\n    if (isCollection(contents))\n        return true;\n    throw new Error('Expected a YAML collection as document contents');\n}\n\nexport { Document };\n","import { isNode } from '../nodes/Node.js';\nimport { createStringifyContext, stringify } from './stringify.js';\nimport { indentComment, lineComment } from './stringifyComment.js';\n\nfunction stringifyDocument(doc, options) {\n    const lines = [];\n    let hasDirectives = options.directives === true;\n    if (options.directives !== false && doc.directives) {\n        const dir = doc.directives.toString(doc);\n        if (dir) {\n            lines.push(dir);\n            hasDirectives = true;\n        }\n        else if (doc.directives.docStart)\n            hasDirectives = true;\n    }\n    if (hasDirectives)\n        lines.push('---');\n    const ctx = createStringifyContext(doc, options);\n    const { commentString } = ctx.options;\n    if (doc.commentBefore) {\n        if (lines.length !== 1)\n            lines.unshift('');\n        const cs = commentString(doc.commentBefore);\n        lines.unshift(indentComment(cs, ''));\n    }\n    let chompKeep = false;\n    let contentComment = null;\n    if (doc.contents) {\n        if (isNode(doc.contents)) {\n            if (doc.contents.spaceBefore && hasDirectives)\n                lines.push('');\n            if (doc.contents.commentBefore) {\n                const cs = commentString(doc.contents.commentBefore);\n                lines.push(indentComment(cs, ''));\n            }\n            // top-level block scalars need to be indented if followed by a comment\n            ctx.forceBlockIndent = !!doc.comment;\n            contentComment = doc.contents.comment;\n        }\n        const onChompKeep = contentComment ? undefined : () => (chompKeep = true);\n        let body = stringify(doc.contents, ctx, () => (contentComment = null), onChompKeep);\n        if (contentComment)\n            body += lineComment(body, '', commentString(contentComment));\n        if ((body[0] === '|' || body[0] === '>') &&\n            lines[lines.length - 1] === '---') {\n            // Top-level block scalars with a preceding doc marker ought to use the\n            // same line for their header.\n            lines[lines.length - 1] = `--- ${body}`;\n        }\n        else\n            lines.push(body);\n    }\n    else {\n        lines.push(stringify(doc.contents, ctx));\n    }\n    if (doc.directives?.docEnd) {\n        if (doc.comment) {\n            const cs = commentString(doc.comment);\n            if (cs.includes('\\n')) {\n                lines.push('...');\n                lines.push(indentComment(cs, ''));\n            }\n            else {\n                lines.push(`... ${cs}`);\n            }\n        }\n        else {\n            lines.push('...');\n        }\n    }\n    else {\n        let dc = doc.comment;\n        if (dc && chompKeep)\n            dc = dc.replace(/^\\n+/, '');\n        if (dc) {\n            if ((!chompKeep || contentComment) && lines[lines.length - 1] !== '')\n                lines.push('');\n            lines.push(indentComment(commentString(dc), ''));\n        }\n    }\n    return lines.join('\\n') + '\\n';\n}\n\nexport { stringifyDocument };\n","class YAMLError extends Error {\n    constructor(name, pos, code, message) {\n        super();\n        this.name = name;\n        this.code = code;\n        this.message = message;\n        this.pos = pos;\n    }\n}\nclass YAMLParseError extends YAMLError {\n    constructor(pos, code, message) {\n        super('YAMLParseError', pos, code, message);\n    }\n}\nclass YAMLWarning extends YAMLError {\n    constructor(pos, code, message) {\n        super('YAMLWarning', pos, code, message);\n    }\n}\nconst prettifyError = (src, lc) => (error) => {\n    if (error.pos[0] === -1)\n        return;\n    error.linePos = error.pos.map(pos => lc.linePos(pos));\n    const { line, col } = error.linePos[0];\n    error.message += ` at line ${line}, column ${col}`;\n    let ci = col - 1;\n    let lineStr = src\n        .substring(lc.lineStarts[line - 1], lc.lineStarts[line])\n        .replace(/[\\n\\r]+$/, '');\n    // Trim to max 80 chars, keeping col position near the middle\n    if (ci >= 60 && lineStr.length > 80) {\n        const trimStart = Math.min(ci - 39, lineStr.length - 79);\n        lineStr = '' + lineStr.substring(trimStart);\n        ci -= trimStart - 1;\n    }\n    if (lineStr.length > 80)\n        lineStr = lineStr.substring(0, 79) + '';\n    // Include previous line in context if pointing at line start\n    if (line > 1 && /^ *$/.test(lineStr.substring(0, ci))) {\n        // Regexp won't match if start is trimmed\n        let prev = src.substring(lc.lineStarts[line - 2], lc.lineStarts[line - 1]);\n        if (prev.length > 80)\n            prev = prev.substring(0, 79) + '\\n';\n        lineStr = prev + lineStr;\n    }\n    if (/[^ ]/.test(lineStr)) {\n        let count = 1;\n        const end = error.linePos[1];\n        if (end && end.line === line && end.col > col) {\n            count = Math.max(1, Math.min(end.col - col, 80 - ci));\n        }\n        const pointer = ' '.repeat(ci) + '^'.repeat(count);\n        error.message += `:\\n\\n${lineStr}\\n${pointer}\\n`;\n    }\n};\n\nexport { YAMLError, YAMLParseError, YAMLWarning, prettifyError };\n","function resolveProps(tokens, { flow, indicator, next, offset, onError, startOnNewline }) {\n    let spaceBefore = false;\n    let atNewline = startOnNewline;\n    let hasSpace = startOnNewline;\n    let comment = '';\n    let commentSep = '';\n    let hasNewline = false;\n    let hasNewlineAfterProp = false;\n    let reqSpace = false;\n    let anchor = null;\n    let tag = null;\n    let comma = null;\n    let found = null;\n    let start = null;\n    for (const token of tokens) {\n        if (reqSpace) {\n            if (token.type !== 'space' &&\n                token.type !== 'newline' &&\n                token.type !== 'comma')\n                onError(token.offset, 'MISSING_CHAR', 'Tags and anchors must be separated from the next token by white space');\n            reqSpace = false;\n        }\n        switch (token.type) {\n            case 'space':\n                // At the doc level, tabs at line start may be parsed\n                // as leading white space rather than indentation.\n                // In a flow collection, only the parser handles indent.\n                if (!flow &&\n                    atNewline &&\n                    indicator !== 'doc-start' &&\n                    token.source[0] === '\\t')\n                    onError(token, 'TAB_AS_INDENT', 'Tabs are not allowed as indentation');\n                hasSpace = true;\n                break;\n            case 'comment': {\n                if (!hasSpace)\n                    onError(token, 'MISSING_CHAR', 'Comments must be separated from other tokens by white space characters');\n                const cb = token.source.substring(1) || ' ';\n                if (!comment)\n                    comment = cb;\n                else\n                    comment += commentSep + cb;\n                commentSep = '';\n                atNewline = false;\n                break;\n            }\n            case 'newline':\n                if (atNewline) {\n                    if (comment)\n                        comment += token.source;\n                    else\n                        spaceBefore = true;\n                }\n                else\n                    commentSep += token.source;\n                atNewline = true;\n                hasNewline = true;\n                if (anchor || tag)\n                    hasNewlineAfterProp = true;\n                hasSpace = true;\n                break;\n            case 'anchor':\n                if (anchor)\n                    onError(token, 'MULTIPLE_ANCHORS', 'A node can have at most one anchor');\n                if (token.source.endsWith(':'))\n                    onError(token.offset + token.source.length - 1, 'BAD_ALIAS', 'Anchor ending in : is ambiguous', true);\n                anchor = token;\n                if (start === null)\n                    start = token.offset;\n                atNewline = false;\n                hasSpace = false;\n                reqSpace = true;\n                break;\n            case 'tag': {\n                if (tag)\n                    onError(token, 'MULTIPLE_TAGS', 'A node can have at most one tag');\n                tag = token;\n                if (start === null)\n                    start = token.offset;\n                atNewline = false;\n                hasSpace = false;\n                reqSpace = true;\n                break;\n            }\n            case indicator:\n                // Could here handle preceding comments differently\n                if (anchor || tag)\n                    onError(token, 'BAD_PROP_ORDER', `Anchors and tags must be after the ${token.source} indicator`);\n                if (found)\n                    onError(token, 'UNEXPECTED_TOKEN', `Unexpected ${token.source} in ${flow ?? 'collection'}`);\n                found = token;\n                atNewline = false;\n                hasSpace = false;\n                break;\n            case 'comma':\n                if (flow) {\n                    if (comma)\n                        onError(token, 'UNEXPECTED_TOKEN', `Unexpected , in ${flow}`);\n                    comma = token;\n                    atNewline = false;\n                    hasSpace = false;\n                    break;\n                }\n            // else fallthrough\n            default:\n                onError(token, 'UNEXPECTED_TOKEN', `Unexpected ${token.type} token`);\n                atNewline = false;\n                hasSpace = false;\n        }\n    }\n    const last = tokens[tokens.length - 1];\n    const end = last ? last.offset + last.source.length : offset;\n    if (reqSpace &&\n        next &&\n        next.type !== 'space' &&\n        next.type !== 'newline' &&\n        next.type !== 'comma' &&\n        (next.type !== 'scalar' || next.source !== ''))\n        onError(next.offset, 'MISSING_CHAR', 'Tags and anchors must be separated from the next token by white space');\n    return {\n        comma,\n        found,\n        spaceBefore,\n        comment,\n        hasNewline,\n        hasNewlineAfterProp,\n        anchor,\n        tag,\n        end,\n        start: start ?? end\n    };\n}\n\nexport { resolveProps };\n","function containsNewline(key) {\n    if (!key)\n        return null;\n    switch (key.type) {\n        case 'alias':\n        case 'scalar':\n        case 'double-quoted-scalar':\n        case 'single-quoted-scalar':\n            if (key.source.includes('\\n'))\n                return true;\n            if (key.end)\n                for (const st of key.end)\n                    if (st.type === 'newline')\n                        return true;\n            return false;\n        case 'flow-collection':\n            for (const it of key.items) {\n                for (const st of it.start)\n                    if (st.type === 'newline')\n                        return true;\n                if (it.sep)\n                    for (const st of it.sep)\n                        if (st.type === 'newline')\n                            return true;\n                if (containsNewline(it.key) || containsNewline(it.value))\n                    return true;\n            }\n            return false;\n        default:\n            return true;\n    }\n}\n\nexport { containsNewline };\n","import { containsNewline } from './util-contains-newline.js';\n\nfunction flowIndentCheck(indent, fc, onError) {\n    if (fc?.type === 'flow-collection') {\n        const end = fc.end[0];\n        if (end.indent === indent &&\n            (end.source === ']' || end.source === '}') &&\n            containsNewline(fc)) {\n            const msg = 'Flow end indicator should be more indented than parent';\n            onError(end, 'BAD_INDENT', msg, true);\n        }\n    }\n}\n\nexport { flowIndentCheck };\n","import { isScalar } from '../nodes/Node.js';\n\nfunction mapIncludes(ctx, items, search) {\n    const { uniqueKeys } = ctx.options;\n    if (uniqueKeys === false)\n        return false;\n    const isEqual = typeof uniqueKeys === 'function'\n        ? uniqueKeys\n        : (a, b) => a === b ||\n            (isScalar(a) &&\n                isScalar(b) &&\n                a.value === b.value &&\n                !(a.value === '<<' && ctx.schema.merge));\n    return items.some(pair => isEqual(pair.key, search));\n}\n\nexport { mapIncludes };\n","import { Pair } from '../nodes/Pair.js';\nimport { YAMLMap } from '../nodes/YAMLMap.js';\nimport { resolveProps } from './resolve-props.js';\nimport { containsNewline } from './util-contains-newline.js';\nimport { flowIndentCheck } from './util-flow-indent-check.js';\nimport { mapIncludes } from './util-map-includes.js';\n\nconst startColMsg = 'All mapping items must start at the same column';\nfunction resolveBlockMap({ composeNode, composeEmptyNode }, ctx, bm, onError) {\n    const map = new YAMLMap(ctx.schema);\n    if (ctx.atRoot)\n        ctx.atRoot = false;\n    let offset = bm.offset;\n    let commentEnd = null;\n    for (const collItem of bm.items) {\n        const { start, key, sep, value } = collItem;\n        // key properties\n        const keyProps = resolveProps(start, {\n            indicator: 'explicit-key-ind',\n            next: key ?? sep?.[0],\n            offset,\n            onError,\n            startOnNewline: true\n        });\n        const implicitKey = !keyProps.found;\n        if (implicitKey) {\n            if (key) {\n                if (key.type === 'block-seq')\n                    onError(offset, 'BLOCK_AS_IMPLICIT_KEY', 'A block sequence may not be used as an implicit map key');\n                else if ('indent' in key && key.indent !== bm.indent)\n                    onError(offset, 'BAD_INDENT', startColMsg);\n            }\n            if (!keyProps.anchor && !keyProps.tag && !sep) {\n                commentEnd = keyProps.end;\n                if (keyProps.comment) {\n                    if (map.comment)\n                        map.comment += '\\n' + keyProps.comment;\n                    else\n                        map.comment = keyProps.comment;\n                }\n                continue;\n            }\n            if (keyProps.hasNewlineAfterProp || containsNewline(key)) {\n                onError(key ?? start[start.length - 1], 'MULTILINE_IMPLICIT_KEY', 'Implicit keys need to be on a single line');\n            }\n        }\n        else if (keyProps.found?.indent !== bm.indent) {\n            onError(offset, 'BAD_INDENT', startColMsg);\n        }\n        // key value\n        const keyStart = keyProps.end;\n        const keyNode = key\n            ? composeNode(ctx, key, keyProps, onError)\n            : composeEmptyNode(ctx, keyStart, start, null, keyProps, onError);\n        if (ctx.schema.compat)\n            flowIndentCheck(bm.indent, key, onError);\n        if (mapIncludes(ctx, map.items, keyNode))\n            onError(keyStart, 'DUPLICATE_KEY', 'Map keys must be unique');\n        // value properties\n        const valueProps = resolveProps(sep ?? [], {\n            indicator: 'map-value-ind',\n            next: value,\n            offset: keyNode.range[2],\n            onError,\n            startOnNewline: !key || key.type === 'block-scalar'\n        });\n        offset = valueProps.end;\n        if (valueProps.found) {\n            if (implicitKey) {\n                if (value?.type === 'block-map' && !valueProps.hasNewline)\n                    onError(offset, 'BLOCK_AS_IMPLICIT_KEY', 'Nested mappings are not allowed in compact mappings');\n                if (ctx.options.strict &&\n                    keyProps.start < valueProps.found.offset - 1024)\n                    onError(keyNode.range, 'KEY_OVER_1024_CHARS', 'The : indicator must be at most 1024 chars after the start of an implicit block mapping key');\n            }\n            // value value\n            const valueNode = value\n                ? composeNode(ctx, value, valueProps, onError)\n                : composeEmptyNode(ctx, offset, sep, null, valueProps, onError);\n            if (ctx.schema.compat)\n                flowIndentCheck(bm.indent, value, onError);\n            offset = valueNode.range[2];\n            const pair = new Pair(keyNode, valueNode);\n            if (ctx.options.keepSourceTokens)\n                pair.srcToken = collItem;\n            map.items.push(pair);\n        }\n        else {\n            // key with no value\n            if (implicitKey)\n                onError(keyNode.range, 'MISSING_CHAR', 'Implicit map keys need to be followed by map values');\n            if (valueProps.comment) {\n                if (keyNode.comment)\n                    keyNode.comment += '\\n' + valueProps.comment;\n                else\n                    keyNode.comment = valueProps.comment;\n            }\n            const pair = new Pair(keyNode);\n            if (ctx.options.keepSourceTokens)\n                pair.srcToken = collItem;\n            map.items.push(pair);\n        }\n    }\n    if (commentEnd && commentEnd < offset)\n        onError(commentEnd, 'IMPOSSIBLE', 'Map comment with trailing content');\n    map.range = [bm.offset, offset, commentEnd ?? offset];\n    return map;\n}\n\nexport { resolveBlockMap };\n","function resolveEnd(end, offset, reqSpace, onError) {\n    let comment = '';\n    if (end) {\n        let hasSpace = false;\n        let sep = '';\n        for (const token of end) {\n            const { source, type } = token;\n            switch (type) {\n                case 'space':\n                    hasSpace = true;\n                    break;\n                case 'comment': {\n                    if (reqSpace && !hasSpace)\n                        onError(token, 'MISSING_CHAR', 'Comments must be separated from other tokens by white space characters');\n                    const cb = source.substring(1) || ' ';\n                    if (!comment)\n                        comment = cb;\n                    else\n                        comment += sep + cb;\n                    sep = '';\n                    break;\n                }\n                case 'newline':\n                    if (comment)\n                        sep += source;\n                    hasSpace = true;\n                    break;\n                default:\n                    onError(token, 'UNEXPECTED_TOKEN', `Unexpected ${type} at node end`);\n            }\n            offset += source.length;\n        }\n    }\n    return { comment, offset };\n}\n\nexport { resolveEnd };\n","import { isPair } from '../nodes/Node.js';\nimport { Pair } from '../nodes/Pair.js';\nimport { YAMLMap } from '../nodes/YAMLMap.js';\nimport { YAMLSeq } from '../nodes/YAMLSeq.js';\nimport { resolveEnd } from './resolve-end.js';\nimport { resolveProps } from './resolve-props.js';\nimport { containsNewline } from './util-contains-newline.js';\nimport { mapIncludes } from './util-map-includes.js';\n\nconst blockMsg = 'Block collections are not allowed within flow collections';\nconst isBlock = (token) => token && (token.type === 'block-map' || token.type === 'block-seq');\nfunction resolveFlowCollection({ composeNode, composeEmptyNode }, ctx, fc, onError) {\n    const isMap = fc.start.source === '{';\n    const fcName = isMap ? 'flow map' : 'flow sequence';\n    const coll = isMap\n        ? new YAMLMap(ctx.schema)\n        : new YAMLSeq(ctx.schema);\n    coll.flow = true;\n    const atRoot = ctx.atRoot;\n    if (atRoot)\n        ctx.atRoot = false;\n    let offset = fc.offset + fc.start.source.length;\n    for (let i = 0; i < fc.items.length; ++i) {\n        const collItem = fc.items[i];\n        const { start, key, sep, value } = collItem;\n        const props = resolveProps(start, {\n            flow: fcName,\n            indicator: 'explicit-key-ind',\n            next: key ?? sep?.[0],\n            offset,\n            onError,\n            startOnNewline: false\n        });\n        if (!props.found) {\n            if (!props.anchor && !props.tag && !sep && !value) {\n                if (i === 0 && props.comma)\n                    onError(props.comma, 'UNEXPECTED_TOKEN', `Unexpected , in ${fcName}`);\n                else if (i < fc.items.length - 1)\n                    onError(props.start, 'UNEXPECTED_TOKEN', `Unexpected empty item in ${fcName}`);\n                if (props.comment) {\n                    if (coll.comment)\n                        coll.comment += '\\n' + props.comment;\n                    else\n                        coll.comment = props.comment;\n                }\n                offset = props.end;\n                continue;\n            }\n            if (!isMap && ctx.options.strict && containsNewline(key))\n                onError(key, // checked by containsNewline()\n                'MULTILINE_IMPLICIT_KEY', 'Implicit keys of flow sequence pairs need to be on a single line');\n        }\n        if (i === 0) {\n            if (props.comma)\n                onError(props.comma, 'UNEXPECTED_TOKEN', `Unexpected , in ${fcName}`);\n        }\n        else {\n            if (!props.comma)\n                onError(props.start, 'MISSING_CHAR', `Missing , between ${fcName} items`);\n            if (props.comment) {\n                let prevItemComment = '';\n                loop: for (const st of start) {\n                    switch (st.type) {\n                        case 'comma':\n                        case 'space':\n                            break;\n                        case 'comment':\n                            prevItemComment = st.source.substring(1);\n                            break loop;\n                        default:\n                            break loop;\n                    }\n                }\n                if (prevItemComment) {\n                    let prev = coll.items[coll.items.length - 1];\n                    if (isPair(prev))\n                        prev = prev.value ?? prev.key;\n                    if (prev.comment)\n                        prev.comment += '\\n' + prevItemComment;\n                    else\n                        prev.comment = prevItemComment;\n                    props.comment = props.comment.substring(prevItemComment.length + 1);\n                }\n            }\n        }\n        if (!isMap && !sep && !props.found) {\n            // item is a value in a seq\n            //  key & sep are empty, start does not include ? or :\n            const valueNode = value\n                ? composeNode(ctx, value, props, onError)\n                : composeEmptyNode(ctx, props.end, sep, null, props, onError);\n            coll.items.push(valueNode);\n            offset = valueNode.range[2];\n            if (isBlock(value))\n                onError(valueNode.range, 'BLOCK_IN_FLOW', blockMsg);\n        }\n        else {\n            // item is a key+value pair\n            // key value\n            const keyStart = props.end;\n            const keyNode = key\n                ? composeNode(ctx, key, props, onError)\n                : composeEmptyNode(ctx, keyStart, start, null, props, onError);\n            if (isBlock(key))\n                onError(keyNode.range, 'BLOCK_IN_FLOW', blockMsg);\n            // value properties\n            const valueProps = resolveProps(sep ?? [], {\n                flow: fcName,\n                indicator: 'map-value-ind',\n                next: value,\n                offset: keyNode.range[2],\n                onError,\n                startOnNewline: false\n            });\n            if (valueProps.found) {\n                if (!isMap && !props.found && ctx.options.strict) {\n                    if (sep)\n                        for (const st of sep) {\n                            if (st === valueProps.found)\n                                break;\n                            if (st.type === 'newline') {\n                                onError(st, 'MULTILINE_IMPLICIT_KEY', 'Implicit keys of flow sequence pairs need to be on a single line');\n                                break;\n                            }\n                        }\n                    if (props.start < valueProps.found.offset - 1024)\n                        onError(valueProps.found, 'KEY_OVER_1024_CHARS', 'The : indicator must be at most 1024 chars after the start of an implicit flow sequence key');\n                }\n            }\n            else if (value) {\n                if ('source' in value && value.source && value.source[0] === ':')\n                    onError(value, 'MISSING_CHAR', `Missing space after : in ${fcName}`);\n                else\n                    onError(valueProps.start, 'MISSING_CHAR', `Missing , or : between ${fcName} items`);\n            }\n            // value value\n            const valueNode = value\n                ? composeNode(ctx, value, valueProps, onError)\n                : valueProps.found\n                    ? composeEmptyNode(ctx, valueProps.end, sep, null, valueProps, onError)\n                    : null;\n            if (valueNode) {\n                if (isBlock(value))\n                    onError(valueNode.range, 'BLOCK_IN_FLOW', blockMsg);\n            }\n            else if (valueProps.comment) {\n                if (keyNode.comment)\n                    keyNode.comment += '\\n' + valueProps.comment;\n                else\n                    keyNode.comment = valueProps.comment;\n            }\n            const pair = new Pair(keyNode, valueNode);\n            if (ctx.options.keepSourceTokens)\n                pair.srcToken = collItem;\n            if (isMap) {\n                const map = coll;\n                if (mapIncludes(ctx, map.items, keyNode))\n                    onError(keyStart, 'DUPLICATE_KEY', 'Map keys must be unique');\n                map.items.push(pair);\n            }\n            else {\n                const map = new YAMLMap(ctx.schema);\n                map.flow = true;\n                map.items.push(pair);\n                coll.items.push(map);\n            }\n            offset = valueNode ? valueNode.range[2] : valueProps.end;\n        }\n    }\n    const expectedEnd = isMap ? '}' : ']';\n    const [ce, ...ee] = fc.end;\n    let cePos = offset;\n    if (ce && ce.source === expectedEnd)\n        cePos = ce.offset + ce.source.length;\n    else {\n        const name = fcName[0].toUpperCase() + fcName.substring(1);\n        const msg = atRoot\n            ? `${name} must end with a ${expectedEnd}`\n            : `${name} in block collection must be sufficiently indented and end with a ${expectedEnd}`;\n        onError(offset, atRoot ? 'MISSING_CHAR' : 'BAD_INDENT', msg);\n        if (ce && ce.source.length !== 1)\n            ee.unshift(ce);\n    }\n    if (ee.length > 0) {\n        const end = resolveEnd(ee, cePos, ctx.options.strict, onError);\n        if (end.comment) {\n            if (coll.comment)\n                coll.comment += '\\n' + end.comment;\n            else\n                coll.comment = end.comment;\n        }\n        coll.range = [fc.offset, cePos, end.offset];\n    }\n    else {\n        coll.range = [fc.offset, cePos, cePos];\n    }\n    return coll;\n}\n\nexport { resolveFlowCollection };\n","import { isNode, isMap } from '../nodes/Node.js';\nimport { Scalar } from '../nodes/Scalar.js';\nimport { resolveBlockMap } from './resolve-block-map.js';\nimport { resolveBlockSeq } from './resolve-block-seq.js';\nimport { resolveFlowCollection } from './resolve-flow-collection.js';\n\nfunction composeCollection(CN, ctx, token, tagToken, onError) {\n    let coll;\n    switch (token.type) {\n        case 'block-map': {\n            coll = resolveBlockMap(CN, ctx, token, onError);\n            break;\n        }\n        case 'block-seq': {\n            coll = resolveBlockSeq(CN, ctx, token, onError);\n            break;\n        }\n        case 'flow-collection': {\n            coll = resolveFlowCollection(CN, ctx, token, onError);\n            break;\n        }\n    }\n    if (!tagToken)\n        return coll;\n    const tagName = ctx.directives.tagName(tagToken.source, msg => onError(tagToken, 'TAG_RESOLVE_FAILED', msg));\n    if (!tagName)\n        return coll;\n    // Cast needed due to: https://github.com/Microsoft/TypeScript/issues/3841\n    const Coll = coll.constructor;\n    if (tagName === '!' || tagName === Coll.tagName) {\n        coll.tag = Coll.tagName;\n        return coll;\n    }\n    const expType = isMap(coll) ? 'map' : 'seq';\n    let tag = ctx.schema.tags.find(t => t.collection === expType && t.tag === tagName);\n    if (!tag) {\n        const kt = ctx.schema.knownTags[tagName];\n        if (kt && kt.collection === expType) {\n            ctx.schema.tags.push(Object.assign({}, kt, { default: false }));\n            tag = kt;\n        }\n        else {\n            onError(tagToken, 'TAG_RESOLVE_FAILED', `Unresolved tag: ${tagName}`, true);\n            coll.tag = tagName;\n            return coll;\n        }\n    }\n    const res = tag.resolve(coll, msg => onError(tagToken, 'TAG_RESOLVE_FAILED', msg), ctx.options);\n    const node = isNode(res)\n        ? res\n        : new Scalar(res);\n    node.range = coll.range;\n    node.tag = tagName;\n    if (tag?.format)\n        node.format = tag.format;\n    return node;\n}\n\nexport { composeCollection };\n","import { YAMLSeq } from '../nodes/YAMLSeq.js';\nimport { resolveProps } from './resolve-props.js';\nimport { flowIndentCheck } from './util-flow-indent-check.js';\n\nfunction resolveBlockSeq({ composeNode, composeEmptyNode }, ctx, bs, onError) {\n    const seq = new YAMLSeq(ctx.schema);\n    if (ctx.atRoot)\n        ctx.atRoot = false;\n    let offset = bs.offset;\n    let commentEnd = null;\n    for (const { start, value } of bs.items) {\n        const props = resolveProps(start, {\n            indicator: 'seq-item-ind',\n            next: value,\n            offset,\n            onError,\n            startOnNewline: true\n        });\n        if (!props.found) {\n            if (props.anchor || props.tag || value) {\n                if (value && value.type === 'block-seq')\n                    onError(props.end, 'BAD_INDENT', 'All sequence items must start at the same column');\n                else\n                    onError(offset, 'MISSING_CHAR', 'Sequence item without - indicator');\n            }\n            else {\n                commentEnd = props.end;\n                if (props.comment)\n                    seq.comment = props.comment;\n                continue;\n            }\n        }\n        const node = value\n            ? composeNode(ctx, value, props, onError)\n            : composeEmptyNode(ctx, props.end, start, null, props, onError);\n        if (ctx.schema.compat)\n            flowIndentCheck(bs.indent, value, onError);\n        offset = node.range[2];\n        seq.items.push(node);\n    }\n    seq.range = [bs.offset, offset, commentEnd ?? offset];\n    return seq;\n}\n\nexport { resolveBlockSeq };\n","import { Scalar } from '../nodes/Scalar.js';\n\nfunction resolveBlockScalar(scalar, strict, onError) {\n    const start = scalar.offset;\n    const header = parseBlockScalarHeader(scalar, strict, onError);\n    if (!header)\n        return { value: '', type: null, comment: '', range: [start, start, start] };\n    const type = header.mode === '>' ? Scalar.BLOCK_FOLDED : Scalar.BLOCK_LITERAL;\n    const lines = scalar.source ? splitLines(scalar.source) : [];\n    // determine the end of content & start of chomping\n    let chompStart = lines.length;\n    for (let i = lines.length - 1; i >= 0; --i) {\n        const content = lines[i][1];\n        if (content === '' || content === '\\r')\n            chompStart = i;\n        else\n            break;\n    }\n    // shortcut for empty contents\n    if (chompStart === 0) {\n        const value = header.chomp === '+' && lines.length > 0\n            ? '\\n'.repeat(Math.max(1, lines.length - 1))\n            : '';\n        let end = start + header.length;\n        if (scalar.source)\n            end += scalar.source.length;\n        return { value, type, comment: header.comment, range: [start, end, end] };\n    }\n    // find the indentation level to trim from start\n    let trimIndent = scalar.indent + header.indent;\n    let offset = scalar.offset + header.length;\n    let contentStart = 0;\n    for (let i = 0; i < chompStart; ++i) {\n        const [indent, content] = lines[i];\n        if (content === '' || content === '\\r') {\n            if (header.indent === 0 && indent.length > trimIndent)\n                trimIndent = indent.length;\n        }\n        else {\n            if (indent.length < trimIndent) {\n                const message = 'Block scalars with more-indented leading empty lines must use an explicit indentation indicator';\n                onError(offset + indent.length, 'MISSING_CHAR', message);\n            }\n            if (header.indent === 0)\n                trimIndent = indent.length;\n            contentStart = i;\n            break;\n        }\n        offset += indent.length + content.length + 1;\n    }\n    // include trailing more-indented empty lines in content\n    for (let i = lines.length - 1; i >= chompStart; --i) {\n        if (lines[i][0].length > trimIndent)\n            chompStart = i + 1;\n    }\n    let value = '';\n    let sep = '';\n    let prevMoreIndented = false;\n    // leading whitespace is kept intact\n    for (let i = 0; i < contentStart; ++i)\n        value += lines[i][0].slice(trimIndent) + '\\n';\n    for (let i = contentStart; i < chompStart; ++i) {\n        let [indent, content] = lines[i];\n        offset += indent.length + content.length + 1;\n        const crlf = content[content.length - 1] === '\\r';\n        if (crlf)\n            content = content.slice(0, -1);\n        /* istanbul ignore if already caught in lexer */\n        if (content && indent.length < trimIndent) {\n            const src = header.indent\n                ? 'explicit indentation indicator'\n                : 'first line';\n            const message = `Block scalar lines must not be less indented than their ${src}`;\n            onError(offset - content.length - (crlf ? 2 : 1), 'BAD_INDENT', message);\n            indent = '';\n        }\n        if (type === Scalar.BLOCK_LITERAL) {\n            value += sep + indent.slice(trimIndent) + content;\n            sep = '\\n';\n        }\n        else if (indent.length > trimIndent || content[0] === '\\t') {\n            // more-indented content within a folded block\n            if (sep === ' ')\n                sep = '\\n';\n            else if (!prevMoreIndented && sep === '\\n')\n                sep = '\\n\\n';\n            value += sep + indent.slice(trimIndent) + content;\n            sep = '\\n';\n            prevMoreIndented = true;\n        }\n        else if (content === '') {\n            // empty line\n            if (sep === '\\n')\n                value += '\\n';\n            else\n                sep = '\\n';\n        }\n        else {\n            value += sep + content;\n            sep = ' ';\n            prevMoreIndented = false;\n        }\n    }\n    switch (header.chomp) {\n        case '-':\n            break;\n        case '+':\n            for (let i = chompStart; i < lines.length; ++i)\n                value += '\\n' + lines[i][0].slice(trimIndent);\n            if (value[value.length - 1] !== '\\n')\n                value += '\\n';\n            break;\n        default:\n            value += '\\n';\n    }\n    const end = start + header.length + scalar.source.length;\n    return { value, type, comment: header.comment, range: [start, end, end] };\n}\nfunction parseBlockScalarHeader({ offset, props }, strict, onError) {\n    /* istanbul ignore if should not happen */\n    if (props[0].type !== 'block-scalar-header') {\n        onError(props[0], 'IMPOSSIBLE', 'Block scalar header not found');\n        return null;\n    }\n    const { source } = props[0];\n    const mode = source[0];\n    let indent = 0;\n    let chomp = '';\n    let error = -1;\n    for (let i = 1; i < source.length; ++i) {\n        const ch = source[i];\n        if (!chomp && (ch === '-' || ch === '+'))\n            chomp = ch;\n        else {\n            const n = Number(ch);\n            if (!indent && n)\n                indent = n;\n            else if (error === -1)\n                error = offset + i;\n        }\n    }\n    if (error !== -1)\n        onError(error, 'UNEXPECTED_TOKEN', `Block scalar header includes extra characters: ${source}`);\n    let hasSpace = false;\n    let comment = '';\n    let length = source.length;\n    for (let i = 1; i < props.length; ++i) {\n        const token = props[i];\n        switch (token.type) {\n            case 'space':\n                hasSpace = true;\n            // fallthrough\n            case 'newline':\n                length += token.source.length;\n                break;\n            case 'comment':\n                if (strict && !hasSpace) {\n                    const message = 'Comments must be separated from other tokens by white space characters';\n                    onError(token, 'MISSING_CHAR', message);\n                }\n                length += token.source.length;\n                comment = token.source.substring(1);\n                break;\n            case 'error':\n                onError(token, 'UNEXPECTED_TOKEN', token.message);\n                length += token.source.length;\n                break;\n            /* istanbul ignore next should not happen */\n            default: {\n                const message = `Unexpected token in block scalar header: ${token.type}`;\n                onError(token, 'UNEXPECTED_TOKEN', message);\n                const ts = token.source;\n                if (ts && typeof ts === 'string')\n                    length += ts.length;\n            }\n        }\n    }\n    return { mode, indent, chomp, comment, length };\n}\n/** @returns Array of lines split up as `[indent, content]` */\nfunction splitLines(source) {\n    const split = source.split(/\\n( *)/);\n    const first = split[0];\n    const m = first.match(/^( *)/);\n    const line0 = m?.[1]\n        ? [m[1], first.slice(m[1].length)]\n        : ['', first];\n    const lines = [line0];\n    for (let i = 1; i < split.length; i += 2)\n        lines.push([split[i], split[i + 1]]);\n    return lines;\n}\n\nexport { resolveBlockScalar };\n","import { Scalar } from '../nodes/Scalar.js';\nimport { resolveEnd } from './resolve-end.js';\n\nfunction resolveFlowScalar(scalar, strict, onError) {\n    const { offset, type, source, end } = scalar;\n    let _type;\n    let value;\n    const _onError = (rel, code, msg) => onError(offset + rel, code, msg);\n    switch (type) {\n        case 'scalar':\n            _type = Scalar.PLAIN;\n            value = plainValue(source, _onError);\n            break;\n        case 'single-quoted-scalar':\n            _type = Scalar.QUOTE_SINGLE;\n            value = singleQuotedValue(source, _onError);\n            break;\n        case 'double-quoted-scalar':\n            _type = Scalar.QUOTE_DOUBLE;\n            value = doubleQuotedValue(source, _onError);\n            break;\n        /* istanbul ignore next should not happen */\n        default:\n            onError(scalar, 'UNEXPECTED_TOKEN', `Expected a flow scalar value, but found: ${type}`);\n            return {\n                value: '',\n                type: null,\n                comment: '',\n                range: [offset, offset + source.length, offset + source.length]\n            };\n    }\n    const valueEnd = offset + source.length;\n    const re = resolveEnd(end, valueEnd, strict, onError);\n    return {\n        value,\n        type: _type,\n        comment: re.comment,\n        range: [offset, valueEnd, re.offset]\n    };\n}\nfunction plainValue(source, onError) {\n    let badChar = '';\n    switch (source[0]) {\n        /* istanbul ignore next should not happen */\n        case '\\t':\n            badChar = 'a tab character';\n            break;\n        case ',':\n            badChar = 'flow indicator character ,';\n            break;\n        case '%':\n            badChar = 'directive indicator character %';\n            break;\n        case '|':\n        case '>': {\n            badChar = `block scalar indicator ${source[0]}`;\n            break;\n        }\n        case '@':\n        case '`': {\n            badChar = `reserved character ${source[0]}`;\n            break;\n        }\n    }\n    if (badChar)\n        onError(0, 'BAD_SCALAR_START', `Plain value cannot start with ${badChar}`);\n    return foldLines(source);\n}\nfunction singleQuotedValue(source, onError) {\n    if (source[source.length - 1] !== \"'\" || source.length === 1)\n        onError(source.length, 'MISSING_CHAR', \"Missing closing 'quote\");\n    return foldLines(source.slice(1, -1)).replace(/''/g, \"'\");\n}\nfunction foldLines(source) {\n    /**\n     * The negative lookbehind here and in the `re` RegExp is to\n     * prevent causing a polynomial search time in certain cases.\n     *\n     * The try-catch is for Safari, which doesn't support this yet:\n     * https://caniuse.com/js-regexp-lookbehind\n     */\n    let first, line;\n    try {\n        first = new RegExp('(.*?)(?<![ \\t])[ \\t]*\\r?\\n', 'sy');\n        line = new RegExp('[ \\t]*(.*?)(?:(?<![ \\t])[ \\t]*)?\\r?\\n', 'sy');\n    }\n    catch (_) {\n        first = /(.*?)[ \\t]*\\r?\\n/sy;\n        line = /[ \\t]*(.*?)[ \\t]*\\r?\\n/sy;\n    }\n    let match = first.exec(source);\n    if (!match)\n        return source;\n    let res = match[1];\n    let sep = ' ';\n    let pos = first.lastIndex;\n    line.lastIndex = pos;\n    while ((match = line.exec(source))) {\n        if (match[1] === '') {\n            if (sep === '\\n')\n                res += sep;\n            else\n                sep = '\\n';\n        }\n        else {\n            res += sep + match[1];\n            sep = ' ';\n        }\n        pos = line.lastIndex;\n    }\n    const last = /[ \\t]*(.*)/sy;\n    last.lastIndex = pos;\n    match = last.exec(source);\n    return res + sep + (match?.[1] ?? '');\n}\nfunction doubleQuotedValue(source, onError) {\n    let res = '';\n    for (let i = 1; i < source.length - 1; ++i) {\n        const ch = source[i];\n        if (ch === '\\r' && source[i + 1] === '\\n')\n            continue;\n        if (ch === '\\n') {\n            const { fold, offset } = foldNewline(source, i);\n            res += fold;\n            i = offset;\n        }\n        else if (ch === '\\\\') {\n            let next = source[++i];\n            const cc = escapeCodes[next];\n            if (cc)\n                res += cc;\n            else if (next === '\\n') {\n                // skip escaped newlines, but still trim the following line\n                next = source[i + 1];\n                while (next === ' ' || next === '\\t')\n                    next = source[++i + 1];\n            }\n            else if (next === '\\r' && source[i + 1] === '\\n') {\n                // skip escaped CRLF newlines, but still trim the following line\n                next = source[++i + 1];\n                while (next === ' ' || next === '\\t')\n                    next = source[++i + 1];\n            }\n            else if (next === 'x' || next === 'u' || next === 'U') {\n                const length = { x: 2, u: 4, U: 8 }[next];\n                res += parseCharCode(source, i + 1, length, onError);\n                i += length;\n            }\n            else {\n                const raw = source.substr(i - 1, 2);\n                onError(i - 1, 'BAD_DQ_ESCAPE', `Invalid escape sequence ${raw}`);\n                res += raw;\n            }\n        }\n        else if (ch === ' ' || ch === '\\t') {\n            // trim trailing whitespace\n            const wsStart = i;\n            let next = source[i + 1];\n            while (next === ' ' || next === '\\t')\n                next = source[++i + 1];\n            if (next !== '\\n' && !(next === '\\r' && source[i + 2] === '\\n'))\n                res += i > wsStart ? source.slice(wsStart, i + 1) : ch;\n        }\n        else {\n            res += ch;\n        }\n    }\n    if (source[source.length - 1] !== '\"' || source.length === 1)\n        onError(source.length, 'MISSING_CHAR', 'Missing closing \"quote');\n    return res;\n}\n/**\n * Fold a single newline into a space, multiple newlines to N - 1 newlines.\n * Presumes `source[offset] === '\\n'`\n */\nfunction foldNewline(source, offset) {\n    let fold = '';\n    let ch = source[offset + 1];\n    while (ch === ' ' || ch === '\\t' || ch === '\\n' || ch === '\\r') {\n        if (ch === '\\r' && source[offset + 2] !== '\\n')\n            break;\n        if (ch === '\\n')\n            fold += '\\n';\n        offset += 1;\n        ch = source[offset + 1];\n    }\n    if (!fold)\n        fold = ' ';\n    return { fold, offset };\n}\nconst escapeCodes = {\n    '0': '\\0',\n    a: '\\x07',\n    b: '\\b',\n    e: '\\x1b',\n    f: '\\f',\n    n: '\\n',\n    r: '\\r',\n    t: '\\t',\n    v: '\\v',\n    N: '\\u0085',\n    _: '\\u00a0',\n    L: '\\u2028',\n    P: '\\u2029',\n    ' ': ' ',\n    '\"': '\"',\n    '/': '/',\n    '\\\\': '\\\\',\n    '\\t': '\\t'\n};\nfunction parseCharCode(source, offset, length, onError) {\n    const cc = source.substr(offset, length);\n    const ok = cc.length === length && /^[0-9a-fA-F]+$/.test(cc);\n    const code = ok ? parseInt(cc, 16) : NaN;\n    if (isNaN(code)) {\n        const raw = source.substr(offset - 2, length + 2);\n        onError(offset - 2, 'BAD_DQ_ESCAPE', `Invalid escape sequence ${raw}`);\n        return raw;\n    }\n    return String.fromCodePoint(code);\n}\n\nexport { resolveFlowScalar };\n","import { SCALAR, isScalar } from '../nodes/Node.js';\nimport { Scalar } from '../nodes/Scalar.js';\nimport { resolveBlockScalar } from './resolve-block-scalar.js';\nimport { resolveFlowScalar } from './resolve-flow-scalar.js';\n\nfunction composeScalar(ctx, token, tagToken, onError) {\n    const { value, type, comment, range } = token.type === 'block-scalar'\n        ? resolveBlockScalar(token, ctx.options.strict, onError)\n        : resolveFlowScalar(token, ctx.options.strict, onError);\n    const tagName = tagToken\n        ? ctx.directives.tagName(tagToken.source, msg => onError(tagToken, 'TAG_RESOLVE_FAILED', msg))\n        : null;\n    const tag = tagToken && tagName\n        ? findScalarTagByName(ctx.schema, value, tagName, tagToken, onError)\n        : token.type === 'scalar'\n            ? findScalarTagByTest(ctx, value, token, onError)\n            : ctx.schema[SCALAR];\n    let scalar;\n    try {\n        const res = tag.resolve(value, msg => onError(tagToken ?? token, 'TAG_RESOLVE_FAILED', msg), ctx.options);\n        scalar = isScalar(res) ? res : new Scalar(res);\n    }\n    catch (error) {\n        const msg = error instanceof Error ? error.message : String(error);\n        onError(tagToken ?? token, 'TAG_RESOLVE_FAILED', msg);\n        scalar = new Scalar(value);\n    }\n    scalar.range = range;\n    scalar.source = value;\n    if (type)\n        scalar.type = type;\n    if (tagName)\n        scalar.tag = tagName;\n    if (tag.format)\n        scalar.format = tag.format;\n    if (comment)\n        scalar.comment = comment;\n    return scalar;\n}\nfunction findScalarTagByName(schema, value, tagName, tagToken, onError) {\n    if (tagName === '!')\n        return schema[SCALAR]; // non-specific tag\n    const matchWithTest = [];\n    for (const tag of schema.tags) {\n        if (!tag.collection && tag.tag === tagName) {\n            if (tag.default && tag.test)\n                matchWithTest.push(tag);\n            else\n                return tag;\n        }\n    }\n    for (const tag of matchWithTest)\n        if (tag.test?.test(value))\n            return tag;\n    const kt = schema.knownTags[tagName];\n    if (kt && !kt.collection) {\n        // Ensure that the known tag is available for stringifying,\n        // but does not get used by default.\n        schema.tags.push(Object.assign({}, kt, { default: false, test: undefined }));\n        return kt;\n    }\n    onError(tagToken, 'TAG_RESOLVE_FAILED', `Unresolved tag: ${tagName}`, tagName !== 'tag:yaml.org,2002:str');\n    return schema[SCALAR];\n}\nfunction findScalarTagByTest({ directives, schema }, value, token, onError) {\n    const tag = schema.tags.find(tag => tag.default && tag.test?.test(value)) || schema[SCALAR];\n    if (schema.compat) {\n        const compat = schema.compat.find(tag => tag.default && tag.test?.test(value)) ??\n            schema[SCALAR];\n        if (tag.tag !== compat.tag) {\n            const ts = directives.tagString(tag.tag);\n            const cs = directives.tagString(compat.tag);\n            const msg = `Value may be parsed as either ${ts} or ${cs}`;\n            onError(token, 'TAG_RESOLVE_FAILED', msg, true);\n        }\n    }\n    return tag;\n}\n\nexport { composeScalar };\n","function emptyScalarPosition(offset, before, pos) {\n    if (before) {\n        if (pos === null)\n            pos = before.length;\n        for (let i = pos - 1; i >= 0; --i) {\n            let st = before[i];\n            switch (st.type) {\n                case 'space':\n                case 'comment':\n                case 'newline':\n                    offset -= st.source.length;\n                    continue;\n            }\n            // Technically, an empty scalar is immediately after the last non-empty\n            // node, but it's more useful to place it after any whitespace.\n            st = before[++i];\n            while (st?.type === 'space') {\n                offset += st.source.length;\n                st = before[++i];\n            }\n            break;\n        }\n    }\n    return offset;\n}\n\nexport { emptyScalarPosition };\n","import { Alias } from '../nodes/Alias.js';\nimport { composeCollection } from './compose-collection.js';\nimport { composeScalar } from './compose-scalar.js';\nimport { resolveEnd } from './resolve-end.js';\nimport { emptyScalarPosition } from './util-empty-scalar-position.js';\n\nconst CN = { composeNode, composeEmptyNode };\nfunction composeNode(ctx, token, props, onError) {\n    const { spaceBefore, comment, anchor, tag } = props;\n    let node;\n    let isSrcToken = true;\n    switch (token.type) {\n        case 'alias':\n            node = composeAlias(ctx, token, onError);\n            if (anchor || tag)\n                onError(token, 'ALIAS_PROPS', 'An alias node must not specify any properties');\n            break;\n        case 'scalar':\n        case 'single-quoted-scalar':\n        case 'double-quoted-scalar':\n        case 'block-scalar':\n            node = composeScalar(ctx, token, tag, onError);\n            if (anchor)\n                node.anchor = anchor.source.substring(1);\n            break;\n        case 'block-map':\n        case 'block-seq':\n        case 'flow-collection':\n            node = composeCollection(CN, ctx, token, tag, onError);\n            if (anchor)\n                node.anchor = anchor.source.substring(1);\n            break;\n        default: {\n            const message = token.type === 'error'\n                ? token.message\n                : `Unsupported token (type: ${token.type})`;\n            onError(token, 'UNEXPECTED_TOKEN', message);\n            node = composeEmptyNode(ctx, token.offset, undefined, null, props, onError);\n            isSrcToken = false;\n        }\n    }\n    if (anchor && node.anchor === '')\n        onError(anchor, 'BAD_ALIAS', 'Anchor cannot be an empty string');\n    if (spaceBefore)\n        node.spaceBefore = true;\n    if (comment) {\n        if (token.type === 'scalar' && token.source === '')\n            node.comment = comment;\n        else\n            node.commentBefore = comment;\n    }\n    // @ts-expect-error Type checking misses meaning of isSrcToken\n    if (ctx.options.keepSourceTokens && isSrcToken)\n        node.srcToken = token;\n    return node;\n}\nfunction composeEmptyNode(ctx, offset, before, pos, { spaceBefore, comment, anchor, tag, end }, onError) {\n    const token = {\n        type: 'scalar',\n        offset: emptyScalarPosition(offset, before, pos),\n        indent: -1,\n        source: ''\n    };\n    const node = composeScalar(ctx, token, tag, onError);\n    if (anchor) {\n        node.anchor = anchor.source.substring(1);\n        if (node.anchor === '')\n            onError(anchor, 'BAD_ALIAS', 'Anchor cannot be an empty string');\n    }\n    if (spaceBefore)\n        node.spaceBefore = true;\n    if (comment) {\n        node.comment = comment;\n        node.range[2] = end;\n    }\n    return node;\n}\nfunction composeAlias({ options }, { offset, source, end }, onError) {\n    const alias = new Alias(source.substring(1));\n    if (alias.source === '')\n        onError(offset, 'BAD_ALIAS', 'Alias cannot be an empty string');\n    if (alias.source.endsWith(':'))\n        onError(offset + source.length - 1, 'BAD_ALIAS', 'Alias ending in : is ambiguous', true);\n    const valueEnd = offset + source.length;\n    const re = resolveEnd(end, valueEnd, options.strict, onError);\n    alias.range = [offset, valueEnd, re.offset];\n    if (re.comment)\n        alias.comment = re.comment;\n    return alias;\n}\n\nexport { composeEmptyNode, composeNode };\n","import { Document } from '../doc/Document.js';\nimport { composeNode, composeEmptyNode } from './compose-node.js';\nimport { resolveEnd } from './resolve-end.js';\nimport { resolveProps } from './resolve-props.js';\n\nfunction composeDoc(options, directives, { offset, start, value, end }, onError) {\n    const opts = Object.assign({ _directives: directives }, options);\n    const doc = new Document(undefined, opts);\n    const ctx = {\n        atRoot: true,\n        directives: doc.directives,\n        options: doc.options,\n        schema: doc.schema\n    };\n    const props = resolveProps(start, {\n        indicator: 'doc-start',\n        next: value ?? end?.[0],\n        offset,\n        onError,\n        startOnNewline: true\n    });\n    if (props.found) {\n        doc.directives.docStart = true;\n        if (value &&\n            (value.type === 'block-map' || value.type === 'block-seq') &&\n            !props.hasNewline)\n            onError(props.end, 'MISSING_CHAR', 'Block collection cannot start on same line with directives-end marker');\n    }\n    doc.contents = value\n        ? composeNode(ctx, value, props, onError)\n        : composeEmptyNode(ctx, props.end, start, null, props, onError);\n    const contentEnd = doc.contents.range[2];\n    const re = resolveEnd(end, contentEnd, false, onError);\n    if (re.comment)\n        doc.comment = re.comment;\n    doc.range = [offset, contentEnd, re.offset];\n    return doc;\n}\n\nexport { composeDoc };\n","import { Directives } from '../doc/directives.js';\nimport { Document } from '../doc/Document.js';\nimport { YAMLWarning, YAMLParseError } from '../errors.js';\nimport { isCollection, isPair } from '../nodes/Node.js';\nimport { composeDoc } from './compose-doc.js';\nimport { resolveEnd } from './resolve-end.js';\n\nfunction getErrorPos(src) {\n    if (typeof src === 'number')\n        return [src, src + 1];\n    if (Array.isArray(src))\n        return src.length === 2 ? src : [src[0], src[1]];\n    const { offset, source } = src;\n    return [offset, offset + (typeof source === 'string' ? source.length : 1)];\n}\nfunction parsePrelude(prelude) {\n    let comment = '';\n    let atComment = false;\n    let afterEmptyLine = false;\n    for (let i = 0; i < prelude.length; ++i) {\n        const source = prelude[i];\n        switch (source[0]) {\n            case '#':\n                comment +=\n                    (comment === '' ? '' : afterEmptyLine ? '\\n\\n' : '\\n') +\n                        (source.substring(1) || ' ');\n                atComment = true;\n                afterEmptyLine = false;\n                break;\n            case '%':\n                if (prelude[i + 1]?.[0] !== '#')\n                    i += 1;\n                atComment = false;\n                break;\n            default:\n                // This may be wrong after doc-end, but in that case it doesn't matter\n                if (!atComment)\n                    afterEmptyLine = true;\n                atComment = false;\n        }\n    }\n    return { comment, afterEmptyLine };\n}\n/**\n * Compose a stream of CST nodes into a stream of YAML Documents.\n *\n * ```ts\n * import { Composer, Parser } from 'yaml'\n *\n * const src: string = ...\n * const tokens = new Parser().parse(src)\n * const docs = new Composer().compose(tokens)\n * ```\n */\nclass Composer {\n    constructor(options = {}) {\n        this.doc = null;\n        this.atDirectives = false;\n        this.prelude = [];\n        this.errors = [];\n        this.warnings = [];\n        this.onError = (source, code, message, warning) => {\n            const pos = getErrorPos(source);\n            if (warning)\n                this.warnings.push(new YAMLWarning(pos, code, message));\n            else\n                this.errors.push(new YAMLParseError(pos, code, message));\n        };\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        this.directives = new Directives({ version: options.version || '1.2' });\n        this.options = options;\n    }\n    decorate(doc, afterDoc) {\n        const { comment, afterEmptyLine } = parsePrelude(this.prelude);\n        //console.log({ dc: doc.comment, prelude, comment })\n        if (comment) {\n            const dc = doc.contents;\n            if (afterDoc) {\n                doc.comment = doc.comment ? `${doc.comment}\\n${comment}` : comment;\n            }\n            else if (afterEmptyLine || doc.directives.docStart || !dc) {\n                doc.commentBefore = comment;\n            }\n            else if (isCollection(dc) && !dc.flow && dc.items.length > 0) {\n                let it = dc.items[0];\n                if (isPair(it))\n                    it = it.key;\n                const cb = it.commentBefore;\n                it.commentBefore = cb ? `${comment}\\n${cb}` : comment;\n            }\n            else {\n                const cb = dc.commentBefore;\n                dc.commentBefore = cb ? `${comment}\\n${cb}` : comment;\n            }\n        }\n        if (afterDoc) {\n            Array.prototype.push.apply(doc.errors, this.errors);\n            Array.prototype.push.apply(doc.warnings, this.warnings);\n        }\n        else {\n            doc.errors = this.errors;\n            doc.warnings = this.warnings;\n        }\n        this.prelude = [];\n        this.errors = [];\n        this.warnings = [];\n    }\n    /**\n     * Current stream status information.\n     *\n     * Mostly useful at the end of input for an empty stream.\n     */\n    streamInfo() {\n        return {\n            comment: parsePrelude(this.prelude).comment,\n            directives: this.directives,\n            errors: this.errors,\n            warnings: this.warnings\n        };\n    }\n    /**\n     * Compose tokens into documents.\n     *\n     * @param forceDoc - If the stream contains no document, still emit a final document including any comments and directives that would be applied to a subsequent document.\n     * @param endOffset - Should be set if `forceDoc` is also set, to set the document range end and to indicate errors correctly.\n     */\n    *compose(tokens, forceDoc = false, endOffset = -1) {\n        for (const token of tokens)\n            yield* this.next(token);\n        yield* this.end(forceDoc, endOffset);\n    }\n    /** Advance the composer by one CST token. */\n    *next(token) {\n        switch (token.type) {\n            case 'directive':\n                this.directives.add(token.source, (offset, message, warning) => {\n                    const pos = getErrorPos(token);\n                    pos[0] += offset;\n                    this.onError(pos, 'BAD_DIRECTIVE', message, warning);\n                });\n                this.prelude.push(token.source);\n                this.atDirectives = true;\n                break;\n            case 'document': {\n                const doc = composeDoc(this.options, this.directives, token, this.onError);\n                if (this.atDirectives && !doc.directives.docStart)\n                    this.onError(token, 'MISSING_CHAR', 'Missing directives-end/doc-start indicator line');\n                this.decorate(doc, false);\n                if (this.doc)\n                    yield this.doc;\n                this.doc = doc;\n                this.atDirectives = false;\n                break;\n            }\n            case 'byte-order-mark':\n            case 'space':\n                break;\n            case 'comment':\n            case 'newline':\n                this.prelude.push(token.source);\n                break;\n            case 'error': {\n                const msg = token.source\n                    ? `${token.message}: ${JSON.stringify(token.source)}`\n                    : token.message;\n                const error = new YAMLParseError(getErrorPos(token), 'UNEXPECTED_TOKEN', msg);\n                if (this.atDirectives || !this.doc)\n                    this.errors.push(error);\n                else\n                    this.doc.errors.push(error);\n                break;\n            }\n            case 'doc-end': {\n                if (!this.doc) {\n                    const msg = 'Unexpected doc-end without preceding document';\n                    this.errors.push(new YAMLParseError(getErrorPos(token), 'UNEXPECTED_TOKEN', msg));\n                    break;\n                }\n                this.doc.directives.docEnd = true;\n                const end = resolveEnd(token.end, token.offset + token.source.length, this.doc.options.strict, this.onError);\n                this.decorate(this.doc, true);\n                if (end.comment) {\n                    const dc = this.doc.comment;\n                    this.doc.comment = dc ? `${dc}\\n${end.comment}` : end.comment;\n                }\n                this.doc.range[2] = end.offset;\n                break;\n            }\n            default:\n                this.errors.push(new YAMLParseError(getErrorPos(token), 'UNEXPECTED_TOKEN', `Unsupported token ${token.type}`));\n        }\n    }\n    /**\n     * Call at end of input to yield any remaining document.\n     *\n     * @param forceDoc - If the stream contains no document, still emit a final document including any comments and directives that would be applied to a subsequent document.\n     * @param endOffset - Should be set if `forceDoc` is also set, to set the document range end and to indicate errors correctly.\n     */\n    *end(forceDoc = false, endOffset = -1) {\n        if (this.doc) {\n            this.decorate(this.doc, true);\n            yield this.doc;\n            this.doc = null;\n        }\n        else if (forceDoc) {\n            const opts = Object.assign({ _directives: this.directives }, this.options);\n            const doc = new Document(undefined, opts);\n            if (this.atDirectives)\n                this.onError(endOffset, 'MISSING_CHAR', 'Missing directives-end indicator line');\n            doc.range = [0, endOffset, endOffset];\n            this.decorate(doc, false);\n            yield doc;\n        }\n    }\n}\n\nexport { Composer };\n","import { resolveBlockScalar } from '../compose/resolve-block-scalar.js';\nimport { resolveFlowScalar } from '../compose/resolve-flow-scalar.js';\nimport { YAMLParseError } from '../errors.js';\nimport { stringifyString } from '../stringify/stringifyString.js';\n\nfunction resolveAsScalar(token, strict = true, onError) {\n    if (token) {\n        const _onError = (pos, code, message) => {\n            const offset = typeof pos === 'number' ? pos : Array.isArray(pos) ? pos[0] : pos.offset;\n            if (onError)\n                onError(offset, code, message);\n            else\n                throw new YAMLParseError([offset, offset + 1], code, message);\n        };\n        switch (token.type) {\n            case 'scalar':\n            case 'single-quoted-scalar':\n            case 'double-quoted-scalar':\n                return resolveFlowScalar(token, strict, _onError);\n            case 'block-scalar':\n                return resolveBlockScalar(token, strict, _onError);\n        }\n    }\n    return null;\n}\n/**\n * Create a new scalar token with `value`\n *\n * Values that represent an actual string but may be parsed as a different type should use a `type` other than `'PLAIN'`,\n * as this function does not support any schema operations and won't check for such conflicts.\n *\n * @param value The string representation of the value, which will have its content properly indented.\n * @param context.end Comments and whitespace after the end of the value, or after the block scalar header. If undefined, a newline will be added.\n * @param context.implicitKey Being within an implicit key may affect the resolved type of the token's value.\n * @param context.indent The indent level of the token.\n * @param context.inFlow Is this scalar within a flow collection? This may affect the resolved type of the token's value.\n * @param context.offset The offset position of the token.\n * @param context.type The preferred type of the scalar token. If undefined, the previous type of the `token` will be used, defaulting to `'PLAIN'`.\n */\nfunction createScalarToken(value, context) {\n    const { implicitKey = false, indent, inFlow = false, offset = -1, type = 'PLAIN' } = context;\n    const source = stringifyString({ type, value }, {\n        implicitKey,\n        indent: indent > 0 ? ' '.repeat(indent) : '',\n        inFlow,\n        options: { blockQuote: true, lineWidth: -1 }\n    });\n    const end = context.end ?? [\n        { type: 'newline', offset: -1, indent, source: '\\n' }\n    ];\n    switch (source[0]) {\n        case '|':\n        case '>': {\n            const he = source.indexOf('\\n');\n            const head = source.substring(0, he);\n            const body = source.substring(he + 1) + '\\n';\n            const props = [\n                { type: 'block-scalar-header', offset, indent, source: head }\n            ];\n            if (!addEndtoBlockProps(props, end))\n                props.push({ type: 'newline', offset: -1, indent, source: '\\n' });\n            return { type: 'block-scalar', offset, indent, props, source: body };\n        }\n        case '\"':\n            return { type: 'double-quoted-scalar', offset, indent, source, end };\n        case \"'\":\n            return { type: 'single-quoted-scalar', offset, indent, source, end };\n        default:\n            return { type: 'scalar', offset, indent, source, end };\n    }\n}\n/**\n * Set the value of `token` to the given string `value`, overwriting any previous contents and type that it may have.\n *\n * Best efforts are made to retain any comments previously associated with the `token`,\n * though all contents within a collection's `items` will be overwritten.\n *\n * Values that represent an actual string but may be parsed as a different type should use a `type` other than `'PLAIN'`,\n * as this function does not support any schema operations and won't check for such conflicts.\n *\n * @param token Any token. If it does not include an `indent` value, the value will be stringified as if it were an implicit key.\n * @param value The string representation of the value, which will have its content properly indented.\n * @param context.afterKey In most cases, values after a key should have an additional level of indentation.\n * @param context.implicitKey Being within an implicit key may affect the resolved type of the token's value.\n * @param context.inFlow Being within a flow collection may affect the resolved type of the token's value.\n * @param context.type The preferred type of the scalar token. If undefined, the previous type of the `token` will be used, defaulting to `'PLAIN'`.\n */\nfunction setScalarValue(token, value, context = {}) {\n    let { afterKey = false, implicitKey = false, inFlow = false, type } = context;\n    let indent = 'indent' in token ? token.indent : null;\n    if (afterKey && typeof indent === 'number')\n        indent += 2;\n    if (!type)\n        switch (token.type) {\n            case 'single-quoted-scalar':\n                type = 'QUOTE_SINGLE';\n                break;\n            case 'double-quoted-scalar':\n                type = 'QUOTE_DOUBLE';\n                break;\n            case 'block-scalar': {\n                const header = token.props[0];\n                if (header.type !== 'block-scalar-header')\n                    throw new Error('Invalid block scalar header');\n                type = header.source[0] === '>' ? 'BLOCK_FOLDED' : 'BLOCK_LITERAL';\n                break;\n            }\n            default:\n                type = 'PLAIN';\n        }\n    const source = stringifyString({ type, value }, {\n        implicitKey: implicitKey || indent === null,\n        indent: indent !== null && indent > 0 ? ' '.repeat(indent) : '',\n        inFlow,\n        options: { blockQuote: true, lineWidth: -1 }\n    });\n    switch (source[0]) {\n        case '|':\n        case '>':\n            setBlockScalarValue(token, source);\n            break;\n        case '\"':\n            setFlowScalarValue(token, source, 'double-quoted-scalar');\n            break;\n        case \"'\":\n            setFlowScalarValue(token, source, 'single-quoted-scalar');\n            break;\n        default:\n            setFlowScalarValue(token, source, 'scalar');\n    }\n}\nfunction setBlockScalarValue(token, source) {\n    const he = source.indexOf('\\n');\n    const head = source.substring(0, he);\n    const body = source.substring(he + 1) + '\\n';\n    if (token.type === 'block-scalar') {\n        const header = token.props[0];\n        if (header.type !== 'block-scalar-header')\n            throw new Error('Invalid block scalar header');\n        header.source = head;\n        token.source = body;\n    }\n    else {\n        const { offset } = token;\n        const indent = 'indent' in token ? token.indent : -1;\n        const props = [\n            { type: 'block-scalar-header', offset, indent, source: head }\n        ];\n        if (!addEndtoBlockProps(props, 'end' in token ? token.end : undefined))\n            props.push({ type: 'newline', offset: -1, indent, source: '\\n' });\n        for (const key of Object.keys(token))\n            if (key !== 'type' && key !== 'offset')\n                delete token[key];\n        Object.assign(token, { type: 'block-scalar', indent, props, source: body });\n    }\n}\n/** @returns `true` if last token is a newline */\nfunction addEndtoBlockProps(props, end) {\n    if (end)\n        for (const st of end)\n            switch (st.type) {\n                case 'space':\n                case 'comment':\n                    props.push(st);\n                    break;\n                case 'newline':\n                    props.push(st);\n                    return true;\n            }\n    return false;\n}\nfunction setFlowScalarValue(token, source, type) {\n    switch (token.type) {\n        case 'scalar':\n        case 'double-quoted-scalar':\n        case 'single-quoted-scalar':\n            token.type = type;\n            token.source = source;\n            break;\n        case 'block-scalar': {\n            const end = token.props.slice(1);\n            let oa = source.length;\n            if (token.props[0].type === 'block-scalar-header')\n                oa -= token.props[0].source.length;\n            for (const tok of end)\n                tok.offset += oa;\n            delete token.props;\n            Object.assign(token, { type, source, end });\n            break;\n        }\n        case 'block-map':\n        case 'block-seq': {\n            const offset = token.offset + source.length;\n            const nl = { type: 'newline', offset, indent: token.indent, source: '\\n' };\n            delete token.items;\n            Object.assign(token, { type, source, end: [nl] });\n            break;\n        }\n        default: {\n            const indent = 'indent' in token ? token.indent : -1;\n            const end = 'end' in token && Array.isArray(token.end)\n                ? token.end.filter(st => st.type === 'space' ||\n                    st.type === 'comment' ||\n                    st.type === 'newline')\n                : [];\n            for (const key of Object.keys(token))\n                if (key !== 'type' && key !== 'offset')\n                    delete token[key];\n            Object.assign(token, { type, indent, source, end });\n        }\n    }\n}\n\nexport { createScalarToken, resolveAsScalar, setScalarValue };\n","/**\n * Stringify a CST document, token, or collection item\n *\n * Fair warning: This applies no validation whatsoever, and\n * simply concatenates the sources in their logical order.\n */\nconst stringify = (cst) => 'type' in cst ? stringifyToken(cst) : stringifyItem(cst);\nfunction stringifyToken(token) {\n    switch (token.type) {\n        case 'block-scalar': {\n            let res = '';\n            for (const tok of token.props)\n                res += stringifyToken(tok);\n            return res + token.source;\n        }\n        case 'block-map':\n        case 'block-seq': {\n            let res = '';\n            for (const item of token.items)\n                res += stringifyItem(item);\n            return res;\n        }\n        case 'flow-collection': {\n            let res = token.start.source;\n            for (const item of token.items)\n                res += stringifyItem(item);\n            for (const st of token.end)\n                res += st.source;\n            return res;\n        }\n        case 'document': {\n            let res = stringifyItem(token);\n            if (token.end)\n                for (const st of token.end)\n                    res += st.source;\n            return res;\n        }\n        default: {\n            let res = token.source;\n            if ('end' in token && token.end)\n                for (const st of token.end)\n                    res += st.source;\n            return res;\n        }\n    }\n}\nfunction stringifyItem({ start, key, sep, value }) {\n    let res = '';\n    for (const st of start)\n        res += st.source;\n    if (key)\n        res += stringifyToken(key);\n    if (sep)\n        for (const st of sep)\n            res += st.source;\n    if (value)\n        res += stringifyToken(value);\n    return res;\n}\n\nexport { stringify };\n","const BREAK = Symbol('break visit');\nconst SKIP = Symbol('skip children');\nconst REMOVE = Symbol('remove item');\n/**\n * Apply a visitor to a CST document or item.\n *\n * Walks through the tree (depth-first) starting from the root, calling a\n * `visitor` function with two arguments when entering each item:\n *   - `item`: The current item, which included the following members:\n *     - `start: SourceToken[]`  Source tokens before the key or value,\n *       possibly including its anchor or tag.\n *     - `key?: Token | null`  Set for pair values. May then be `null`, if\n *       the key before the `:` separator is empty.\n *     - `sep?: SourceToken[]`  Source tokens between the key and the value,\n *       which should include the `:` map value indicator if `value` is set.\n *     - `value?: Token`  The value of a sequence item, or of a map pair.\n *   - `path`: The steps from the root to the current node, as an array of\n *     `['key' | 'value', number]` tuples.\n *\n * The return value of the visitor may be used to control the traversal:\n *   - `undefined` (default): Do nothing and continue\n *   - `visit.SKIP`: Do not visit the children of this token, continue with\n *      next sibling\n *   - `visit.BREAK`: Terminate traversal completely\n *   - `visit.REMOVE`: Remove the current item, then continue with the next one\n *   - `number`: Set the index of the next step. This is useful especially if\n *     the index of the current token has changed.\n *   - `function`: Define the next visitor for this item. After the original\n *     visitor is called on item entry, next visitors are called after handling\n *     a non-empty `key` and when exiting the item.\n */\nfunction visit(cst, visitor) {\n    if ('type' in cst && cst.type === 'document')\n        cst = { start: cst.start, value: cst.value };\n    _visit(Object.freeze([]), cst, visitor);\n}\n// Without the `as symbol` casts, TS declares these in the `visit`\n// namespace using `var`, but then complains about that because\n// `unique symbol` must be `const`.\n/** Terminate visit traversal completely */\nvisit.BREAK = BREAK;\n/** Do not visit the children of the current item */\nvisit.SKIP = SKIP;\n/** Remove the current item */\nvisit.REMOVE = REMOVE;\n/** Find the item at `path` from `cst` as the root */\nvisit.itemAtPath = (cst, path) => {\n    let item = cst;\n    for (const [field, index] of path) {\n        const tok = item?.[field];\n        if (tok && 'items' in tok) {\n            item = tok.items[index];\n        }\n        else\n            return undefined;\n    }\n    return item;\n};\n/**\n * Get the immediate parent collection of the item at `path` from `cst` as the root.\n *\n * Throws an error if the collection is not found, which should never happen if the item itself exists.\n */\nvisit.parentCollection = (cst, path) => {\n    const parent = visit.itemAtPath(cst, path.slice(0, -1));\n    const field = path[path.length - 1][0];\n    const coll = parent?.[field];\n    if (coll && 'items' in coll)\n        return coll;\n    throw new Error('Parent collection not found');\n};\nfunction _visit(path, item, visitor) {\n    let ctrl = visitor(item, path);\n    if (typeof ctrl === 'symbol')\n        return ctrl;\n    for (const field of ['key', 'value']) {\n        const token = item[field];\n        if (token && 'items' in token) {\n            for (let i = 0; i < token.items.length; ++i) {\n                const ci = _visit(Object.freeze(path.concat([[field, i]])), token.items[i], visitor);\n                if (typeof ci === 'number')\n                    i = ci - 1;\n                else if (ci === BREAK)\n                    return BREAK;\n                else if (ci === REMOVE) {\n                    token.items.splice(i, 1);\n                    i -= 1;\n                }\n            }\n            if (typeof ctrl === 'function' && field === 'key')\n                ctrl = ctrl(item, path);\n        }\n    }\n    return typeof ctrl === 'function' ? ctrl(item, path) : ctrl;\n}\n\nexport { visit };\n","export { createScalarToken, resolveAsScalar, setScalarValue } from './cst-scalar.js';\nexport { stringify } from './cst-stringify.js';\nexport { visit } from './cst-visit.js';\n\n/** The byte order mark */\nconst BOM = '\\u{FEFF}';\n/** Start of doc-mode */\nconst DOCUMENT = '\\x02'; // C0: Start of Text\n/** Unexpected end of flow-mode */\nconst FLOW_END = '\\x18'; // C0: Cancel\n/** Next token is a scalar value */\nconst SCALAR = '\\x1f'; // C0: Unit Separator\n/** @returns `true` if `token` is a flow or block collection */\nconst isCollection = (token) => !!token && 'items' in token;\n/** @returns `true` if `token` is a flow or block scalar; not an alias */\nconst isScalar = (token) => !!token &&\n    (token.type === 'scalar' ||\n        token.type === 'single-quoted-scalar' ||\n        token.type === 'double-quoted-scalar' ||\n        token.type === 'block-scalar');\n/* istanbul ignore next */\n/** Get a printable representation of a lexer token */\nfunction prettyToken(token) {\n    switch (token) {\n        case BOM:\n            return '<BOM>';\n        case DOCUMENT:\n            return '<DOC>';\n        case FLOW_END:\n            return '<FLOW_END>';\n        case SCALAR:\n            return '<SCALAR>';\n        default:\n            return JSON.stringify(token);\n    }\n}\n/** Identify the type of a lexer token. May return `null` for unknown tokens. */\nfunction tokenType(source) {\n    switch (source) {\n        case BOM:\n            return 'byte-order-mark';\n        case DOCUMENT:\n            return 'doc-mode';\n        case FLOW_END:\n            return 'flow-error-end';\n        case SCALAR:\n            return 'scalar';\n        case '---':\n            return 'doc-start';\n        case '...':\n            return 'doc-end';\n        case '':\n        case '\\n':\n        case '\\r\\n':\n            return 'newline';\n        case '-':\n            return 'seq-item-ind';\n        case '?':\n            return 'explicit-key-ind';\n        case ':':\n            return 'map-value-ind';\n        case '{':\n            return 'flow-map-start';\n        case '}':\n            return 'flow-map-end';\n        case '[':\n            return 'flow-seq-start';\n        case ']':\n            return 'flow-seq-end';\n        case ',':\n            return 'comma';\n    }\n    switch (source[0]) {\n        case ' ':\n        case '\\t':\n            return 'space';\n        case '#':\n            return 'comment';\n        case '%':\n            return 'directive-line';\n        case '*':\n            return 'alias';\n        case '&':\n            return 'anchor';\n        case '!':\n            return 'tag';\n        case \"'\":\n            return 'single-quoted-scalar';\n        case '\"':\n            return 'double-quoted-scalar';\n        case '|':\n        case '>':\n            return 'block-scalar-header';\n    }\n    return null;\n}\n\nexport { BOM, DOCUMENT, FLOW_END, SCALAR, isCollection, isScalar, prettyToken, tokenType };\n","import { BOM, DOCUMENT, FLOW_END, SCALAR } from './cst.js';\n\n/*\nSTART -> stream\n\nstream\n  directive -> line-end -> stream\n  indent + line-end -> stream\n  [else] -> line-start\n\nline-end\n  comment -> line-end\n  newline -> .\n  input-end -> END\n\nline-start\n  doc-start -> doc\n  doc-end -> stream\n  [else] -> indent -> block-start\n\nblock-start\n  seq-item-start -> block-start\n  explicit-key-start -> block-start\n  map-value-start -> block-start\n  [else] -> doc\n\ndoc\n  line-end -> line-start\n  spaces -> doc\n  anchor -> doc\n  tag -> doc\n  flow-start -> flow -> doc\n  flow-end -> error -> doc\n  seq-item-start -> error -> doc\n  explicit-key-start -> error -> doc\n  map-value-start -> doc\n  alias -> doc\n  quote-start -> quoted-scalar -> doc\n  block-scalar-header -> line-end -> block-scalar(min) -> line-start\n  [else] -> plain-scalar(false, min) -> doc\n\nflow\n  line-end -> flow\n  spaces -> flow\n  anchor -> flow\n  tag -> flow\n  flow-start -> flow -> flow\n  flow-end -> .\n  seq-item-start -> error -> flow\n  explicit-key-start -> flow\n  map-value-start -> flow\n  alias -> flow\n  quote-start -> quoted-scalar -> flow\n  comma -> flow\n  [else] -> plain-scalar(true, 0) -> flow\n\nquoted-scalar\n  quote-end -> .\n  [else] -> quoted-scalar\n\nblock-scalar(min)\n  newline + peek(indent < min) -> .\n  [else] -> block-scalar(min)\n\nplain-scalar(is-flow, min)\n  scalar-end(is-flow) -> .\n  peek(newline + (indent < min)) -> .\n  [else] -> plain-scalar(min)\n*/\nfunction isEmpty(ch) {\n    switch (ch) {\n        case undefined:\n        case ' ':\n        case '\\n':\n        case '\\r':\n        case '\\t':\n            return true;\n        default:\n            return false;\n    }\n}\nconst hexDigits = '0123456789ABCDEFabcdef'.split('');\nconst tagChars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()\".split('');\nconst invalidFlowScalarChars = ',[]{}'.split('');\nconst invalidAnchorChars = ' ,[]{}\\n\\r\\t'.split('');\nconst isNotAnchorChar = (ch) => !ch || invalidAnchorChars.includes(ch);\n/**\n * Splits an input string into lexical tokens, i.e. smaller strings that are\n * easily identifiable by `tokens.tokenType()`.\n *\n * Lexing starts always in a \"stream\" context. Incomplete input may be buffered\n * until a complete token can be emitted.\n *\n * In addition to slices of the original input, the following control characters\n * may also be emitted:\n *\n * - `\\x02` (Start of Text): A document starts with the next token\n * - `\\x18` (Cancel): Unexpected end of flow-mode (indicates an error)\n * - `\\x1f` (Unit Separator): Next token is a scalar value\n * - `\\u{FEFF}` (Byte order mark): Emitted separately outside documents\n */\nclass Lexer {\n    constructor() {\n        /**\n         * Flag indicating whether the end of the current buffer marks the end of\n         * all input\n         */\n        this.atEnd = false;\n        /**\n         * Explicit indent set in block scalar header, as an offset from the current\n         * minimum indent, so e.g. set to 1 from a header `|2+`. Set to -1 if not\n         * explicitly set.\n         */\n        this.blockScalarIndent = -1;\n        /**\n         * Block scalars that include a + (keep) chomping indicator in their header\n         * include trailing empty lines, which are otherwise excluded from the\n         * scalar's contents.\n         */\n        this.blockScalarKeep = false;\n        /** Current input */\n        this.buffer = '';\n        /**\n         * Flag noting whether the map value indicator : can immediately follow this\n         * node within a flow context.\n         */\n        this.flowKey = false;\n        /** Count of surrounding flow collection levels. */\n        this.flowLevel = 0;\n        /**\n         * Minimum level of indentation required for next lines to be parsed as a\n         * part of the current scalar value.\n         */\n        this.indentNext = 0;\n        /** Indentation level of the current line. */\n        this.indentValue = 0;\n        /** Position of the next \\n character. */\n        this.lineEndPos = null;\n        /** Stores the state of the lexer if reaching the end of incpomplete input */\n        this.next = null;\n        /** A pointer to `buffer`; the current position of the lexer. */\n        this.pos = 0;\n    }\n    /**\n     * Generate YAML tokens from the `source` string. If `incomplete`,\n     * a part of the last line may be left as a buffer for the next call.\n     *\n     * @returns A generator of lexical tokens\n     */\n    *lex(source, incomplete = false) {\n        if (source) {\n            this.buffer = this.buffer ? this.buffer + source : source;\n            this.lineEndPos = null;\n        }\n        this.atEnd = !incomplete;\n        let next = this.next ?? 'stream';\n        while (next && (incomplete || this.hasChars(1)))\n            next = yield* this.parseNext(next);\n    }\n    atLineEnd() {\n        let i = this.pos;\n        let ch = this.buffer[i];\n        while (ch === ' ' || ch === '\\t')\n            ch = this.buffer[++i];\n        if (!ch || ch === '#' || ch === '\\n')\n            return true;\n        if (ch === '\\r')\n            return this.buffer[i + 1] === '\\n';\n        return false;\n    }\n    charAt(n) {\n        return this.buffer[this.pos + n];\n    }\n    continueScalar(offset) {\n        let ch = this.buffer[offset];\n        if (this.indentNext > 0) {\n            let indent = 0;\n            while (ch === ' ')\n                ch = this.buffer[++indent + offset];\n            if (ch === '\\r') {\n                const next = this.buffer[indent + offset + 1];\n                if (next === '\\n' || (!next && !this.atEnd))\n                    return offset + indent + 1;\n            }\n            return ch === '\\n' || indent >= this.indentNext || (!ch && !this.atEnd)\n                ? offset + indent\n                : -1;\n        }\n        if (ch === '-' || ch === '.') {\n            const dt = this.buffer.substr(offset, 3);\n            if ((dt === '---' || dt === '...') && isEmpty(this.buffer[offset + 3]))\n                return -1;\n        }\n        return offset;\n    }\n    getLine() {\n        let end = this.lineEndPos;\n        if (typeof end !== 'number' || (end !== -1 && end < this.pos)) {\n            end = this.buffer.indexOf('\\n', this.pos);\n            this.lineEndPos = end;\n        }\n        if (end === -1)\n            return this.atEnd ? this.buffer.substring(this.pos) : null;\n        if (this.buffer[end - 1] === '\\r')\n            end -= 1;\n        return this.buffer.substring(this.pos, end);\n    }\n    hasChars(n) {\n        return this.pos + n <= this.buffer.length;\n    }\n    setNext(state) {\n        this.buffer = this.buffer.substring(this.pos);\n        this.pos = 0;\n        this.lineEndPos = null;\n        this.next = state;\n        return null;\n    }\n    peek(n) {\n        return this.buffer.substr(this.pos, n);\n    }\n    *parseNext(next) {\n        switch (next) {\n            case 'stream':\n                return yield* this.parseStream();\n            case 'line-start':\n                return yield* this.parseLineStart();\n            case 'block-start':\n                return yield* this.parseBlockStart();\n            case 'doc':\n                return yield* this.parseDocument();\n            case 'flow':\n                return yield* this.parseFlowCollection();\n            case 'quoted-scalar':\n                return yield* this.parseQuotedScalar();\n            case 'block-scalar':\n                return yield* this.parseBlockScalar();\n            case 'plain-scalar':\n                return yield* this.parsePlainScalar();\n        }\n    }\n    *parseStream() {\n        let line = this.getLine();\n        if (line === null)\n            return this.setNext('stream');\n        if (line[0] === BOM) {\n            yield* this.pushCount(1);\n            line = line.substring(1);\n        }\n        if (line[0] === '%') {\n            let dirEnd = line.length;\n            const cs = line.indexOf('#');\n            if (cs !== -1) {\n                const ch = line[cs - 1];\n                if (ch === ' ' || ch === '\\t')\n                    dirEnd = cs - 1;\n            }\n            while (true) {\n                const ch = line[dirEnd - 1];\n                if (ch === ' ' || ch === '\\t')\n                    dirEnd -= 1;\n                else\n                    break;\n            }\n            const n = (yield* this.pushCount(dirEnd)) + (yield* this.pushSpaces(true));\n            yield* this.pushCount(line.length - n); // possible comment\n            this.pushNewline();\n            return 'stream';\n        }\n        if (this.atLineEnd()) {\n            const sp = yield* this.pushSpaces(true);\n            yield* this.pushCount(line.length - sp);\n            yield* this.pushNewline();\n            return 'stream';\n        }\n        yield DOCUMENT;\n        return yield* this.parseLineStart();\n    }\n    *parseLineStart() {\n        const ch = this.charAt(0);\n        if (!ch && !this.atEnd)\n            return this.setNext('line-start');\n        if (ch === '-' || ch === '.') {\n            if (!this.atEnd && !this.hasChars(4))\n                return this.setNext('line-start');\n            const s = this.peek(3);\n            if (s === '---' && isEmpty(this.charAt(3))) {\n                yield* this.pushCount(3);\n                this.indentValue = 0;\n                this.indentNext = 0;\n                return 'doc';\n            }\n            else if (s === '...' && isEmpty(this.charAt(3))) {\n                yield* this.pushCount(3);\n                return 'stream';\n            }\n        }\n        this.indentValue = yield* this.pushSpaces(false);\n        if (this.indentNext > this.indentValue && !isEmpty(this.charAt(1)))\n            this.indentNext = this.indentValue;\n        return yield* this.parseBlockStart();\n    }\n    *parseBlockStart() {\n        const [ch0, ch1] = this.peek(2);\n        if (!ch1 && !this.atEnd)\n            return this.setNext('block-start');\n        if ((ch0 === '-' || ch0 === '?' || ch0 === ':') && isEmpty(ch1)) {\n            const n = (yield* this.pushCount(1)) + (yield* this.pushSpaces(true));\n            this.indentNext = this.indentValue + 1;\n            this.indentValue += n;\n            return yield* this.parseBlockStart();\n        }\n        return 'doc';\n    }\n    *parseDocument() {\n        yield* this.pushSpaces(true);\n        const line = this.getLine();\n        if (line === null)\n            return this.setNext('doc');\n        let n = yield* this.pushIndicators();\n        switch (line[n]) {\n            case '#':\n                yield* this.pushCount(line.length - n);\n            // fallthrough\n            case undefined:\n                yield* this.pushNewline();\n                return yield* this.parseLineStart();\n            case '{':\n            case '[':\n                yield* this.pushCount(1);\n                this.flowKey = false;\n                this.flowLevel = 1;\n                return 'flow';\n            case '}':\n            case ']':\n                // this is an error\n                yield* this.pushCount(1);\n                return 'doc';\n            case '*':\n                yield* this.pushUntil(isNotAnchorChar);\n                return 'doc';\n            case '\"':\n            case \"'\":\n                return yield* this.parseQuotedScalar();\n            case '|':\n            case '>':\n                n += yield* this.parseBlockScalarHeader();\n                n += yield* this.pushSpaces(true);\n                yield* this.pushCount(line.length - n);\n                yield* this.pushNewline();\n                return yield* this.parseBlockScalar();\n            default:\n                return yield* this.parsePlainScalar();\n        }\n    }\n    *parseFlowCollection() {\n        let nl, sp;\n        let indent = -1;\n        do {\n            nl = yield* this.pushNewline();\n            if (nl > 0) {\n                sp = yield* this.pushSpaces(false);\n                this.indentValue = indent = sp;\n            }\n            else {\n                sp = 0;\n            }\n            sp += yield* this.pushSpaces(true);\n        } while (nl + sp > 0);\n        const line = this.getLine();\n        if (line === null)\n            return this.setNext('flow');\n        if ((indent !== -1 && indent < this.indentNext && line[0] !== '#') ||\n            (indent === 0 &&\n                (line.startsWith('---') || line.startsWith('...')) &&\n                isEmpty(line[3]))) {\n            // Allowing for the terminal ] or } at the same (rather than greater)\n            // indent level as the initial [ or { is technically invalid, but\n            // failing here would be surprising to users.\n            const atFlowEndMarker = indent === this.indentNext - 1 &&\n                this.flowLevel === 1 &&\n                (line[0] === ']' || line[0] === '}');\n            if (!atFlowEndMarker) {\n                // this is an error\n                this.flowLevel = 0;\n                yield FLOW_END;\n                return yield* this.parseLineStart();\n            }\n        }\n        let n = 0;\n        while (line[n] === ',') {\n            n += yield* this.pushCount(1);\n            n += yield* this.pushSpaces(true);\n            this.flowKey = false;\n        }\n        n += yield* this.pushIndicators();\n        switch (line[n]) {\n            case undefined:\n                return 'flow';\n            case '#':\n                yield* this.pushCount(line.length - n);\n                return 'flow';\n            case '{':\n            case '[':\n                yield* this.pushCount(1);\n                this.flowKey = false;\n                this.flowLevel += 1;\n                return 'flow';\n            case '}':\n            case ']':\n                yield* this.pushCount(1);\n                this.flowKey = true;\n                this.flowLevel -= 1;\n                return this.flowLevel ? 'flow' : 'doc';\n            case '*':\n                yield* this.pushUntil(isNotAnchorChar);\n                return 'flow';\n            case '\"':\n            case \"'\":\n                this.flowKey = true;\n                return yield* this.parseQuotedScalar();\n            case ':': {\n                const next = this.charAt(1);\n                if (this.flowKey || isEmpty(next) || next === ',') {\n                    this.flowKey = false;\n                    yield* this.pushCount(1);\n                    yield* this.pushSpaces(true);\n                    return 'flow';\n                }\n            }\n            // fallthrough\n            default:\n                this.flowKey = false;\n                return yield* this.parsePlainScalar();\n        }\n    }\n    *parseQuotedScalar() {\n        const quote = this.charAt(0);\n        let end = this.buffer.indexOf(quote, this.pos + 1);\n        if (quote === \"'\") {\n            while (end !== -1 && this.buffer[end + 1] === \"'\")\n                end = this.buffer.indexOf(\"'\", end + 2);\n        }\n        else {\n            // double-quote\n            while (end !== -1) {\n                let n = 0;\n                while (this.buffer[end - 1 - n] === '\\\\')\n                    n += 1;\n                if (n % 2 === 0)\n                    break;\n                end = this.buffer.indexOf('\"', end + 1);\n            }\n        }\n        // Only looking for newlines within the quotes\n        const qb = this.buffer.substring(0, end);\n        let nl = qb.indexOf('\\n', this.pos);\n        if (nl !== -1) {\n            while (nl !== -1) {\n                const cs = this.continueScalar(nl + 1);\n                if (cs === -1)\n                    break;\n                nl = qb.indexOf('\\n', cs);\n            }\n            if (nl !== -1) {\n                // this is an error caused by an unexpected unindent\n                end = nl - (qb[nl - 1] === '\\r' ? 2 : 1);\n            }\n        }\n        if (end === -1) {\n            if (!this.atEnd)\n                return this.setNext('quoted-scalar');\n            end = this.buffer.length;\n        }\n        yield* this.pushToIndex(end + 1, false);\n        return this.flowLevel ? 'flow' : 'doc';\n    }\n    *parseBlockScalarHeader() {\n        this.blockScalarIndent = -1;\n        this.blockScalarKeep = false;\n        let i = this.pos;\n        while (true) {\n            const ch = this.buffer[++i];\n            if (ch === '+')\n                this.blockScalarKeep = true;\n            else if (ch > '0' && ch <= '9')\n                this.blockScalarIndent = Number(ch) - 1;\n            else if (ch !== '-')\n                break;\n        }\n        return yield* this.pushUntil(ch => isEmpty(ch) || ch === '#');\n    }\n    *parseBlockScalar() {\n        let nl = this.pos - 1; // may be -1 if this.pos === 0\n        let indent = 0;\n        let ch;\n        loop: for (let i = this.pos; (ch = this.buffer[i]); ++i) {\n            switch (ch) {\n                case ' ':\n                    indent += 1;\n                    break;\n                case '\\n':\n                    nl = i;\n                    indent = 0;\n                    break;\n                case '\\r': {\n                    const next = this.buffer[i + 1];\n                    if (!next && !this.atEnd)\n                        return this.setNext('block-scalar');\n                    if (next === '\\n')\n                        break;\n                } // fallthrough\n                default:\n                    break loop;\n            }\n        }\n        if (!ch && !this.atEnd)\n            return this.setNext('block-scalar');\n        if (indent >= this.indentNext) {\n            if (this.blockScalarIndent === -1)\n                this.indentNext = indent;\n            else\n                this.indentNext += this.blockScalarIndent;\n            do {\n                const cs = this.continueScalar(nl + 1);\n                if (cs === -1)\n                    break;\n                nl = this.buffer.indexOf('\\n', cs);\n            } while (nl !== -1);\n            if (nl === -1) {\n                if (!this.atEnd)\n                    return this.setNext('block-scalar');\n                nl = this.buffer.length;\n            }\n        }\n        if (!this.blockScalarKeep) {\n            do {\n                let i = nl - 1;\n                let ch = this.buffer[i];\n                if (ch === '\\r')\n                    ch = this.buffer[--i];\n                const lastChar = i; // Drop the line if last char not more indented\n                while (ch === ' ' || ch === '\\t')\n                    ch = this.buffer[--i];\n                if (ch === '\\n' && i >= this.pos && i + 1 + indent > lastChar)\n                    nl = i;\n                else\n                    break;\n            } while (true);\n        }\n        yield SCALAR;\n        yield* this.pushToIndex(nl + 1, true);\n        return yield* this.parseLineStart();\n    }\n    *parsePlainScalar() {\n        const inFlow = this.flowLevel > 0;\n        let end = this.pos - 1;\n        let i = this.pos - 1;\n        let ch;\n        while ((ch = this.buffer[++i])) {\n            if (ch === ':') {\n                const next = this.buffer[i + 1];\n                if (isEmpty(next) || (inFlow && next === ','))\n                    break;\n                end = i;\n            }\n            else if (isEmpty(ch)) {\n                let next = this.buffer[i + 1];\n                if (ch === '\\r') {\n                    if (next === '\\n') {\n                        i += 1;\n                        ch = '\\n';\n                        next = this.buffer[i + 1];\n                    }\n                    else\n                        end = i;\n                }\n                if (next === '#' || (inFlow && invalidFlowScalarChars.includes(next)))\n                    break;\n                if (ch === '\\n') {\n                    const cs = this.continueScalar(i + 1);\n                    if (cs === -1)\n                        break;\n                    i = Math.max(i, cs - 2); // to advance, but still account for ' #'\n                }\n            }\n            else {\n                if (inFlow && invalidFlowScalarChars.includes(ch))\n                    break;\n                end = i;\n            }\n        }\n        if (!ch && !this.atEnd)\n            return this.setNext('plain-scalar');\n        yield SCALAR;\n        yield* this.pushToIndex(end + 1, true);\n        return inFlow ? 'flow' : 'doc';\n    }\n    *pushCount(n) {\n        if (n > 0) {\n            yield this.buffer.substr(this.pos, n);\n            this.pos += n;\n            return n;\n        }\n        return 0;\n    }\n    *pushToIndex(i, allowEmpty) {\n        const s = this.buffer.slice(this.pos, i);\n        if (s) {\n            yield s;\n            this.pos += s.length;\n            return s.length;\n        }\n        else if (allowEmpty)\n            yield '';\n        return 0;\n    }\n    *pushIndicators() {\n        switch (this.charAt(0)) {\n            case '!':\n                return ((yield* this.pushTag()) +\n                    (yield* this.pushSpaces(true)) +\n                    (yield* this.pushIndicators()));\n            case '&':\n                return ((yield* this.pushUntil(isNotAnchorChar)) +\n                    (yield* this.pushSpaces(true)) +\n                    (yield* this.pushIndicators()));\n            case '-': // this is an error\n            case '?': // this is an error outside flow collections\n            case ':': {\n                const inFlow = this.flowLevel > 0;\n                const ch1 = this.charAt(1);\n                if (isEmpty(ch1) || (inFlow && invalidFlowScalarChars.includes(ch1))) {\n                    if (!inFlow)\n                        this.indentNext = this.indentValue + 1;\n                    else if (this.flowKey)\n                        this.flowKey = false;\n                    return ((yield* this.pushCount(1)) +\n                        (yield* this.pushSpaces(true)) +\n                        (yield* this.pushIndicators()));\n                }\n            }\n        }\n        return 0;\n    }\n    *pushTag() {\n        if (this.charAt(1) === '<') {\n            let i = this.pos + 2;\n            let ch = this.buffer[i];\n            while (!isEmpty(ch) && ch !== '>')\n                ch = this.buffer[++i];\n            return yield* this.pushToIndex(ch === '>' ? i + 1 : i, false);\n        }\n        else {\n            let i = this.pos + 1;\n            let ch = this.buffer[i];\n            while (ch) {\n                if (tagChars.includes(ch))\n                    ch = this.buffer[++i];\n                else if (ch === '%' &&\n                    hexDigits.includes(this.buffer[i + 1]) &&\n                    hexDigits.includes(this.buffer[i + 2])) {\n                    ch = this.buffer[(i += 3)];\n                }\n                else\n                    break;\n            }\n            return yield* this.pushToIndex(i, false);\n        }\n    }\n    *pushNewline() {\n        const ch = this.buffer[this.pos];\n        if (ch === '\\n')\n            return yield* this.pushCount(1);\n        else if (ch === '\\r' && this.charAt(1) === '\\n')\n            return yield* this.pushCount(2);\n        else\n            return 0;\n    }\n    *pushSpaces(allowTabs) {\n        let i = this.pos - 1;\n        let ch;\n        do {\n            ch = this.buffer[++i];\n        } while (ch === ' ' || (allowTabs && ch === '\\t'));\n        const n = i - this.pos;\n        if (n > 0) {\n            yield this.buffer.substr(this.pos, n);\n            this.pos = i;\n        }\n        return n;\n    }\n    *pushUntil(test) {\n        let i = this.pos;\n        let ch = this.buffer[i];\n        while (!test(ch))\n            ch = this.buffer[++i];\n        return yield* this.pushToIndex(i, false);\n    }\n}\n\nexport { Lexer };\n","/**\n * Tracks newlines during parsing in order to provide an efficient API for\n * determining the one-indexed `{ line, col }` position for any offset\n * within the input.\n */\nclass LineCounter {\n    constructor() {\n        this.lineStarts = [];\n        /**\n         * Should be called in ascending order. Otherwise, call\n         * `lineCounter.lineStarts.sort()` before calling `linePos()`.\n         */\n        this.addNewLine = (offset) => this.lineStarts.push(offset);\n        /**\n         * Performs a binary search and returns the 1-indexed { line, col }\n         * position of `offset`. If `line === 0`, `addNewLine` has never been\n         * called or `offset` is before the first known newline.\n         */\n        this.linePos = (offset) => {\n            let low = 0;\n            let high = this.lineStarts.length;\n            while (low < high) {\n                const mid = (low + high) >> 1; // Math.floor((low + high) / 2)\n                if (this.lineStarts[mid] < offset)\n                    low = mid + 1;\n                else\n                    high = mid;\n            }\n            if (this.lineStarts[low] === offset)\n                return { line: low + 1, col: 1 };\n            if (low === 0)\n                return { line: 0, col: offset };\n            const start = this.lineStarts[low - 1];\n            return { line: low, col: offset - start + 1 };\n        };\n    }\n}\n\nexport { LineCounter };\n","import { tokenType } from './cst.js';\nimport { Lexer } from './lexer.js';\n\nfunction includesToken(list, type) {\n    for (let i = 0; i < list.length; ++i)\n        if (list[i].type === type)\n            return true;\n    return false;\n}\nfunction findNonEmptyIndex(list) {\n    for (let i = 0; i < list.length; ++i) {\n        switch (list[i].type) {\n            case 'space':\n            case 'comment':\n            case 'newline':\n                break;\n            default:\n                return i;\n        }\n    }\n    return -1;\n}\nfunction isFlowToken(token) {\n    switch (token?.type) {\n        case 'alias':\n        case 'scalar':\n        case 'single-quoted-scalar':\n        case 'double-quoted-scalar':\n        case 'flow-collection':\n            return true;\n        default:\n            return false;\n    }\n}\nfunction getPrevProps(parent) {\n    switch (parent.type) {\n        case 'document':\n            return parent.start;\n        case 'block-map': {\n            const it = parent.items[parent.items.length - 1];\n            return it.sep ?? it.start;\n        }\n        case 'block-seq':\n            return parent.items[parent.items.length - 1].start;\n        /* istanbul ignore next should not happen */\n        default:\n            return [];\n    }\n}\n/** Note: May modify input array */\nfunction getFirstKeyStartProps(prev) {\n    if (prev.length === 0)\n        return [];\n    let i = prev.length;\n    loop: while (--i >= 0) {\n        switch (prev[i].type) {\n            case 'doc-start':\n            case 'explicit-key-ind':\n            case 'map-value-ind':\n            case 'seq-item-ind':\n            case 'newline':\n                break loop;\n        }\n    }\n    while (prev[++i]?.type === 'space') {\n        /* loop */\n    }\n    return prev.splice(i, prev.length);\n}\nfunction fixFlowSeqItems(fc) {\n    if (fc.start.type === 'flow-seq-start') {\n        for (const it of fc.items) {\n            if (it.sep &&\n                !it.value &&\n                !includesToken(it.start, 'explicit-key-ind') &&\n                !includesToken(it.sep, 'map-value-ind')) {\n                if (it.key)\n                    it.value = it.key;\n                delete it.key;\n                if (isFlowToken(it.value)) {\n                    if (it.value.end)\n                        Array.prototype.push.apply(it.value.end, it.sep);\n                    else\n                        it.value.end = it.sep;\n                }\n                else\n                    Array.prototype.push.apply(it.start, it.sep);\n                delete it.sep;\n            }\n        }\n    }\n}\n/**\n * A YAML concrete syntax tree (CST) parser\n *\n * ```ts\n * const src: string = ...\n * for (const token of new Parser().parse(src)) {\n *   // token: Token\n * }\n * ```\n *\n * To use the parser with a user-provided lexer:\n *\n * ```ts\n * function* parse(source: string, lexer: Lexer) {\n *   const parser = new Parser()\n *   for (const lexeme of lexer.lex(source))\n *     yield* parser.next(lexeme)\n *   yield* parser.end()\n * }\n *\n * const src: string = ...\n * const lexer = new Lexer()\n * for (const token of parse(src, lexer)) {\n *   // token: Token\n * }\n * ```\n */\nclass Parser {\n    /**\n     * @param onNewLine - If defined, called separately with the start position of\n     *   each new line (in `parse()`, including the start of input).\n     */\n    constructor(onNewLine) {\n        /** If true, space and sequence indicators count as indentation */\n        this.atNewLine = true;\n        /** If true, next token is a scalar value */\n        this.atScalar = false;\n        /** Current indentation level */\n        this.indent = 0;\n        /** Current offset since the start of parsing */\n        this.offset = 0;\n        /** On the same line with a block map key */\n        this.onKeyLine = false;\n        /** Top indicates the node that's currently being built */\n        this.stack = [];\n        /** The source of the current token, set in parse() */\n        this.source = '';\n        /** The type of the current token, set in parse() */\n        this.type = '';\n        // Must be defined after `next()`\n        this.lexer = new Lexer();\n        this.onNewLine = onNewLine;\n    }\n    /**\n     * Parse `source` as a YAML stream.\n     * If `incomplete`, a part of the last line may be left as a buffer for the next call.\n     *\n     * Errors are not thrown, but yielded as `{ type: 'error', message }` tokens.\n     *\n     * @returns A generator of tokens representing each directive, document, and other structure.\n     */\n    *parse(source, incomplete = false) {\n        if (this.onNewLine && this.offset === 0)\n            this.onNewLine(0);\n        for (const lexeme of this.lexer.lex(source, incomplete))\n            yield* this.next(lexeme);\n        if (!incomplete)\n            yield* this.end();\n    }\n    /**\n     * Advance the parser by the `source` of one lexical token.\n     */\n    *next(source) {\n        this.source = source;\n        if (this.atScalar) {\n            this.atScalar = false;\n            yield* this.step();\n            this.offset += source.length;\n            return;\n        }\n        const type = tokenType(source);\n        if (!type) {\n            const message = `Not a YAML token: ${source}`;\n            yield* this.pop({ type: 'error', offset: this.offset, message, source });\n            this.offset += source.length;\n        }\n        else if (type === 'scalar') {\n            this.atNewLine = false;\n            this.atScalar = true;\n            this.type = 'scalar';\n        }\n        else {\n            this.type = type;\n            yield* this.step();\n            switch (type) {\n                case 'newline':\n                    this.atNewLine = true;\n                    this.indent = 0;\n                    if (this.onNewLine)\n                        this.onNewLine(this.offset + source.length);\n                    break;\n                case 'space':\n                    if (this.atNewLine && source[0] === ' ')\n                        this.indent += source.length;\n                    break;\n                case 'explicit-key-ind':\n                case 'map-value-ind':\n                case 'seq-item-ind':\n                    if (this.atNewLine)\n                        this.indent += source.length;\n                    break;\n                case 'doc-mode':\n                case 'flow-error-end':\n                    return;\n                default:\n                    this.atNewLine = false;\n            }\n            this.offset += source.length;\n        }\n    }\n    /** Call at end of input to push out any remaining constructions */\n    *end() {\n        while (this.stack.length > 0)\n            yield* this.pop();\n    }\n    get sourceToken() {\n        const st = {\n            type: this.type,\n            offset: this.offset,\n            indent: this.indent,\n            source: this.source\n        };\n        return st;\n    }\n    *step() {\n        const top = this.peek(1);\n        if (this.type === 'doc-end' && (!top || top.type !== 'doc-end')) {\n            while (this.stack.length > 0)\n                yield* this.pop();\n            this.stack.push({\n                type: 'doc-end',\n                offset: this.offset,\n                source: this.source\n            });\n            return;\n        }\n        if (!top)\n            return yield* this.stream();\n        switch (top.type) {\n            case 'document':\n                return yield* this.document(top);\n            case 'alias':\n            case 'scalar':\n            case 'single-quoted-scalar':\n            case 'double-quoted-scalar':\n                return yield* this.scalar(top);\n            case 'block-scalar':\n                return yield* this.blockScalar(top);\n            case 'block-map':\n                return yield* this.blockMap(top);\n            case 'block-seq':\n                return yield* this.blockSequence(top);\n            case 'flow-collection':\n                return yield* this.flowCollection(top);\n            case 'doc-end':\n                return yield* this.documentEnd(top);\n        }\n        /* istanbul ignore next should not happen */\n        yield* this.pop();\n    }\n    peek(n) {\n        return this.stack[this.stack.length - n];\n    }\n    *pop(error) {\n        const token = error ?? this.stack.pop();\n        /* istanbul ignore if should not happen */\n        if (!token) {\n            const message = 'Tried to pop an empty stack';\n            yield { type: 'error', offset: this.offset, source: '', message };\n        }\n        else if (this.stack.length === 0) {\n            yield token;\n        }\n        else {\n            const top = this.peek(1);\n            if (token.type === 'block-scalar') {\n                // Block scalars use their parent rather than header indent\n                token.indent = 'indent' in top ? top.indent : 0;\n            }\n            else if (token.type === 'flow-collection' && top.type === 'document') {\n                // Ignore all indent for top-level flow collections\n                token.indent = 0;\n            }\n            if (token.type === 'flow-collection')\n                fixFlowSeqItems(token);\n            switch (top.type) {\n                case 'document':\n                    top.value = token;\n                    break;\n                case 'block-scalar':\n                    top.props.push(token); // error\n                    break;\n                case 'block-map': {\n                    const it = top.items[top.items.length - 1];\n                    if (it.value) {\n                        top.items.push({ start: [], key: token, sep: [] });\n                        this.onKeyLine = true;\n                        return;\n                    }\n                    else if (it.sep) {\n                        it.value = token;\n                    }\n                    else {\n                        Object.assign(it, { key: token, sep: [] });\n                        this.onKeyLine = !includesToken(it.start, 'explicit-key-ind');\n                        return;\n                    }\n                    break;\n                }\n                case 'block-seq': {\n                    const it = top.items[top.items.length - 1];\n                    if (it.value)\n                        top.items.push({ start: [], value: token });\n                    else\n                        it.value = token;\n                    break;\n                }\n                case 'flow-collection': {\n                    const it = top.items[top.items.length - 1];\n                    if (!it || it.value)\n                        top.items.push({ start: [], key: token, sep: [] });\n                    else if (it.sep)\n                        it.value = token;\n                    else\n                        Object.assign(it, { key: token, sep: [] });\n                    return;\n                }\n                /* istanbul ignore next should not happen */\n                default:\n                    yield* this.pop();\n                    yield* this.pop(token);\n            }\n            if ((top.type === 'document' ||\n                top.type === 'block-map' ||\n                top.type === 'block-seq') &&\n                (token.type === 'block-map' || token.type === 'block-seq')) {\n                const last = token.items[token.items.length - 1];\n                if (last &&\n                    !last.sep &&\n                    !last.value &&\n                    last.start.length > 0 &&\n                    findNonEmptyIndex(last.start) === -1 &&\n                    (token.indent === 0 ||\n                        last.start.every(st => st.type !== 'comment' || st.indent < token.indent))) {\n                    if (top.type === 'document')\n                        top.end = last.start;\n                    else\n                        top.items.push({ start: last.start });\n                    token.items.splice(-1, 1);\n                }\n            }\n        }\n    }\n    *stream() {\n        switch (this.type) {\n            case 'directive-line':\n                yield { type: 'directive', offset: this.offset, source: this.source };\n                return;\n            case 'byte-order-mark':\n            case 'space':\n            case 'comment':\n            case 'newline':\n                yield this.sourceToken;\n                return;\n            case 'doc-mode':\n            case 'doc-start': {\n                const doc = {\n                    type: 'document',\n                    offset: this.offset,\n                    start: []\n                };\n                if (this.type === 'doc-start')\n                    doc.start.push(this.sourceToken);\n                this.stack.push(doc);\n                return;\n            }\n        }\n        yield {\n            type: 'error',\n            offset: this.offset,\n            message: `Unexpected ${this.type} token in YAML stream`,\n            source: this.source\n        };\n    }\n    *document(doc) {\n        if (doc.value)\n            return yield* this.lineEnd(doc);\n        switch (this.type) {\n            case 'doc-start': {\n                if (findNonEmptyIndex(doc.start) !== -1) {\n                    yield* this.pop();\n                    yield* this.step();\n                }\n                else\n                    doc.start.push(this.sourceToken);\n                return;\n            }\n            case 'anchor':\n            case 'tag':\n            case 'space':\n            case 'comment':\n            case 'newline':\n                doc.start.push(this.sourceToken);\n                return;\n        }\n        const bv = this.startBlockValue(doc);\n        if (bv)\n            this.stack.push(bv);\n        else {\n            yield {\n                type: 'error',\n                offset: this.offset,\n                message: `Unexpected ${this.type} token in YAML document`,\n                source: this.source\n            };\n        }\n    }\n    *scalar(scalar) {\n        if (this.type === 'map-value-ind') {\n            const prev = getPrevProps(this.peek(2));\n            const start = getFirstKeyStartProps(prev);\n            let sep;\n            if (scalar.end) {\n                sep = scalar.end;\n                sep.push(this.sourceToken);\n                delete scalar.end;\n            }\n            else\n                sep = [this.sourceToken];\n            const map = {\n                type: 'block-map',\n                offset: scalar.offset,\n                indent: scalar.indent,\n                items: [{ start, key: scalar, sep }]\n            };\n            this.onKeyLine = true;\n            this.stack[this.stack.length - 1] = map;\n        }\n        else\n            yield* this.lineEnd(scalar);\n    }\n    *blockScalar(scalar) {\n        switch (this.type) {\n            case 'space':\n            case 'comment':\n            case 'newline':\n                scalar.props.push(this.sourceToken);\n                return;\n            case 'scalar':\n                scalar.source = this.source;\n                // block-scalar source includes trailing newline\n                this.atNewLine = true;\n                this.indent = 0;\n                if (this.onNewLine) {\n                    let nl = this.source.indexOf('\\n') + 1;\n                    while (nl !== 0) {\n                        this.onNewLine(this.offset + nl);\n                        nl = this.source.indexOf('\\n', nl) + 1;\n                    }\n                }\n                yield* this.pop();\n                break;\n            /* istanbul ignore next should not happen */\n            default:\n                yield* this.pop();\n                yield* this.step();\n        }\n    }\n    *blockMap(map) {\n        const it = map.items[map.items.length - 1];\n        // it.sep is true-ish if pair already has key or : separator\n        switch (this.type) {\n            case 'newline':\n                this.onKeyLine = false;\n                if (it.value) {\n                    const end = 'end' in it.value ? it.value.end : undefined;\n                    const last = Array.isArray(end) ? end[end.length - 1] : undefined;\n                    if (last?.type === 'comment')\n                        end?.push(this.sourceToken);\n                    else\n                        map.items.push({ start: [this.sourceToken] });\n                }\n                else if (it.sep) {\n                    it.sep.push(this.sourceToken);\n                }\n                else {\n                    it.start.push(this.sourceToken);\n                }\n                return;\n            case 'space':\n            case 'comment':\n                if (it.value) {\n                    map.items.push({ start: [this.sourceToken] });\n                }\n                else if (it.sep) {\n                    it.sep.push(this.sourceToken);\n                }\n                else {\n                    if (this.atIndentedComment(it.start, map.indent)) {\n                        const prev = map.items[map.items.length - 2];\n                        const end = prev?.value?.end;\n                        if (Array.isArray(end)) {\n                            Array.prototype.push.apply(end, it.start);\n                            end.push(this.sourceToken);\n                            map.items.pop();\n                            return;\n                        }\n                    }\n                    it.start.push(this.sourceToken);\n                }\n                return;\n        }\n        if (this.indent >= map.indent) {\n            const atNextItem = !this.onKeyLine && this.indent === map.indent && it.sep;\n            // For empty nodes, assign newline-separated not indented empty tokens to following node\n            let start = [];\n            if (atNextItem && it.sep && !it.value) {\n                const nl = [];\n                for (let i = 0; i < it.sep.length; ++i) {\n                    const st = it.sep[i];\n                    switch (st.type) {\n                        case 'newline':\n                            nl.push(i);\n                            break;\n                        case 'space':\n                            break;\n                        case 'comment':\n                            if (st.indent > map.indent)\n                                nl.length = 0;\n                            break;\n                        default:\n                            nl.length = 0;\n                    }\n                }\n                if (nl.length >= 2)\n                    start = it.sep.splice(nl[1]);\n            }\n            switch (this.type) {\n                case 'anchor':\n                case 'tag':\n                    if (atNextItem || it.value) {\n                        start.push(this.sourceToken);\n                        map.items.push({ start });\n                        this.onKeyLine = true;\n                    }\n                    else if (it.sep) {\n                        it.sep.push(this.sourceToken);\n                    }\n                    else {\n                        it.start.push(this.sourceToken);\n                    }\n                    return;\n                case 'explicit-key-ind':\n                    if (!it.sep && !includesToken(it.start, 'explicit-key-ind')) {\n                        it.start.push(this.sourceToken);\n                    }\n                    else if (atNextItem || it.value) {\n                        start.push(this.sourceToken);\n                        map.items.push({ start });\n                    }\n                    else {\n                        this.stack.push({\n                            type: 'block-map',\n                            offset: this.offset,\n                            indent: this.indent,\n                            items: [{ start: [this.sourceToken] }]\n                        });\n                    }\n                    this.onKeyLine = true;\n                    return;\n                case 'map-value-ind':\n                    if (includesToken(it.start, 'explicit-key-ind')) {\n                        if (!it.sep) {\n                            if (includesToken(it.start, 'newline')) {\n                                Object.assign(it, { key: null, sep: [this.sourceToken] });\n                            }\n                            else {\n                                const start = getFirstKeyStartProps(it.start);\n                                this.stack.push({\n                                    type: 'block-map',\n                                    offset: this.offset,\n                                    indent: this.indent,\n                                    items: [{ start, key: null, sep: [this.sourceToken] }]\n                                });\n                            }\n                        }\n                        else if (it.value) {\n                            map.items.push({ start: [], key: null, sep: [this.sourceToken] });\n                        }\n                        else if (includesToken(it.sep, 'map-value-ind')) {\n                            this.stack.push({\n                                type: 'block-map',\n                                offset: this.offset,\n                                indent: this.indent,\n                                items: [{ start, key: null, sep: [this.sourceToken] }]\n                            });\n                        }\n                        else if (isFlowToken(it.key) &&\n                            !includesToken(it.sep, 'newline')) {\n                            const start = getFirstKeyStartProps(it.start);\n                            const key = it.key;\n                            const sep = it.sep;\n                            sep.push(this.sourceToken);\n                            // @ts-expect-error type guard is wrong here\n                            delete it.key, delete it.sep;\n                            this.stack.push({\n                                type: 'block-map',\n                                offset: this.offset,\n                                indent: this.indent,\n                                items: [{ start, key, sep }]\n                            });\n                        }\n                        else if (start.length > 0) {\n                            // Not actually at next item\n                            it.sep = it.sep.concat(start, this.sourceToken);\n                        }\n                        else {\n                            it.sep.push(this.sourceToken);\n                        }\n                    }\n                    else {\n                        if (!it.sep) {\n                            Object.assign(it, { key: null, sep: [this.sourceToken] });\n                        }\n                        else if (it.value || atNextItem) {\n                            map.items.push({ start, key: null, sep: [this.sourceToken] });\n                        }\n                        else if (includesToken(it.sep, 'map-value-ind')) {\n                            this.stack.push({\n                                type: 'block-map',\n                                offset: this.offset,\n                                indent: this.indent,\n                                items: [{ start: [], key: null, sep: [this.sourceToken] }]\n                            });\n                        }\n                        else {\n                            it.sep.push(this.sourceToken);\n                        }\n                    }\n                    this.onKeyLine = true;\n                    return;\n                case 'alias':\n                case 'scalar':\n                case 'single-quoted-scalar':\n                case 'double-quoted-scalar': {\n                    const fs = this.flowScalar(this.type);\n                    if (atNextItem || it.value) {\n                        map.items.push({ start, key: fs, sep: [] });\n                        this.onKeyLine = true;\n                    }\n                    else if (it.sep) {\n                        this.stack.push(fs);\n                    }\n                    else {\n                        Object.assign(it, { key: fs, sep: [] });\n                        this.onKeyLine = true;\n                    }\n                    return;\n                }\n                default: {\n                    const bv = this.startBlockValue(map);\n                    if (bv) {\n                        if (atNextItem &&\n                            bv.type !== 'block-seq' &&\n                            includesToken(it.start, 'explicit-key-ind')) {\n                            map.items.push({ start });\n                        }\n                        this.stack.push(bv);\n                        return;\n                    }\n                }\n            }\n        }\n        yield* this.pop();\n        yield* this.step();\n    }\n    *blockSequence(seq) {\n        const it = seq.items[seq.items.length - 1];\n        switch (this.type) {\n            case 'newline':\n                if (it.value) {\n                    const end = 'end' in it.value ? it.value.end : undefined;\n                    const last = Array.isArray(end) ? end[end.length - 1] : undefined;\n                    if (last?.type === 'comment')\n                        end?.push(this.sourceToken);\n                    else\n                        seq.items.push({ start: [this.sourceToken] });\n                }\n                else\n                    it.start.push(this.sourceToken);\n                return;\n            case 'space':\n            case 'comment':\n                if (it.value)\n                    seq.items.push({ start: [this.sourceToken] });\n                else {\n                    if (this.atIndentedComment(it.start, seq.indent)) {\n                        const prev = seq.items[seq.items.length - 2];\n                        const end = prev?.value?.end;\n                        if (Array.isArray(end)) {\n                            Array.prototype.push.apply(end, it.start);\n                            end.push(this.sourceToken);\n                            seq.items.pop();\n                            return;\n                        }\n                    }\n                    it.start.push(this.sourceToken);\n                }\n                return;\n            case 'anchor':\n            case 'tag':\n                if (it.value || this.indent <= seq.indent)\n                    break;\n                it.start.push(this.sourceToken);\n                return;\n            case 'seq-item-ind':\n                if (this.indent !== seq.indent)\n                    break;\n                if (it.value || includesToken(it.start, 'seq-item-ind'))\n                    seq.items.push({ start: [this.sourceToken] });\n                else\n                    it.start.push(this.sourceToken);\n                return;\n        }\n        if (this.indent > seq.indent) {\n            const bv = this.startBlockValue(seq);\n            if (bv) {\n                this.stack.push(bv);\n                return;\n            }\n        }\n        yield* this.pop();\n        yield* this.step();\n    }\n    *flowCollection(fc) {\n        const it = fc.items[fc.items.length - 1];\n        if (this.type === 'flow-error-end') {\n            let top;\n            do {\n                yield* this.pop();\n                top = this.peek(1);\n            } while (top && top.type === 'flow-collection');\n        }\n        else if (fc.end.length === 0) {\n            switch (this.type) {\n                case 'comma':\n                case 'explicit-key-ind':\n                    if (!it || it.sep)\n                        fc.items.push({ start: [this.sourceToken] });\n                    else\n                        it.start.push(this.sourceToken);\n                    return;\n                case 'map-value-ind':\n                    if (!it || it.value)\n                        fc.items.push({ start: [], key: null, sep: [this.sourceToken] });\n                    else if (it.sep)\n                        it.sep.push(this.sourceToken);\n                    else\n                        Object.assign(it, { key: null, sep: [this.sourceToken] });\n                    return;\n                case 'space':\n                case 'comment':\n                case 'newline':\n                case 'anchor':\n                case 'tag':\n                    if (!it || it.value)\n                        fc.items.push({ start: [this.sourceToken] });\n                    else if (it.sep)\n                        it.sep.push(this.sourceToken);\n                    else\n                        it.start.push(this.sourceToken);\n                    return;\n                case 'alias':\n                case 'scalar':\n                case 'single-quoted-scalar':\n                case 'double-quoted-scalar': {\n                    const fs = this.flowScalar(this.type);\n                    if (!it || it.value)\n                        fc.items.push({ start: [], key: fs, sep: [] });\n                    else if (it.sep)\n                        this.stack.push(fs);\n                    else\n                        Object.assign(it, { key: fs, sep: [] });\n                    return;\n                }\n                case 'flow-map-end':\n                case 'flow-seq-end':\n                    fc.end.push(this.sourceToken);\n                    return;\n            }\n            const bv = this.startBlockValue(fc);\n            /* istanbul ignore else should not happen */\n            if (bv)\n                this.stack.push(bv);\n            else {\n                yield* this.pop();\n                yield* this.step();\n            }\n        }\n        else {\n            const parent = this.peek(2);\n            if (parent.type === 'block-map' &&\n                ((this.type === 'map-value-ind' && parent.indent === fc.indent) ||\n                    (this.type === 'newline' &&\n                        !parent.items[parent.items.length - 1].sep))) {\n                yield* this.pop();\n                yield* this.step();\n            }\n            else if (this.type === 'map-value-ind' &&\n                parent.type !== 'flow-collection') {\n                const prev = getPrevProps(parent);\n                const start = getFirstKeyStartProps(prev);\n                fixFlowSeqItems(fc);\n                const sep = fc.end.splice(1, fc.end.length);\n                sep.push(this.sourceToken);\n                const map = {\n                    type: 'block-map',\n                    offset: fc.offset,\n                    indent: fc.indent,\n                    items: [{ start, key: fc, sep }]\n                };\n                this.onKeyLine = true;\n                this.stack[this.stack.length - 1] = map;\n            }\n            else {\n                yield* this.lineEnd(fc);\n            }\n        }\n    }\n    flowScalar(type) {\n        if (this.onNewLine) {\n            let nl = this.source.indexOf('\\n') + 1;\n            while (nl !== 0) {\n                this.onNewLine(this.offset + nl);\n                nl = this.source.indexOf('\\n', nl) + 1;\n            }\n        }\n        return {\n            type,\n            offset: this.offset,\n            indent: this.indent,\n            source: this.source\n        };\n    }\n    startBlockValue(parent) {\n        switch (this.type) {\n            case 'alias':\n            case 'scalar':\n            case 'single-quoted-scalar':\n            case 'double-quoted-scalar':\n                return this.flowScalar(this.type);\n            case 'block-scalar-header':\n                return {\n                    type: 'block-scalar',\n                    offset: this.offset,\n                    indent: this.indent,\n                    props: [this.sourceToken],\n                    source: ''\n                };\n            case 'flow-map-start':\n            case 'flow-seq-start':\n                return {\n                    type: 'flow-collection',\n                    offset: this.offset,\n                    indent: this.indent,\n                    start: this.sourceToken,\n                    items: [],\n                    end: []\n                };\n            case 'seq-item-ind':\n                return {\n                    type: 'block-seq',\n                    offset: this.offset,\n                    indent: this.indent,\n                    items: [{ start: [this.sourceToken] }]\n                };\n            case 'explicit-key-ind': {\n                this.onKeyLine = true;\n                const prev = getPrevProps(parent);\n                const start = getFirstKeyStartProps(prev);\n                start.push(this.sourceToken);\n                return {\n                    type: 'block-map',\n                    offset: this.offset,\n                    indent: this.indent,\n                    items: [{ start }]\n                };\n            }\n            case 'map-value-ind': {\n                this.onKeyLine = true;\n                const prev = getPrevProps(parent);\n                const start = getFirstKeyStartProps(prev);\n                return {\n                    type: 'block-map',\n                    offset: this.offset,\n                    indent: this.indent,\n                    items: [{ start, key: null, sep: [this.sourceToken] }]\n                };\n            }\n        }\n        return null;\n    }\n    atIndentedComment(start, indent) {\n        if (this.type !== 'comment')\n            return false;\n        if (this.indent <= indent)\n            return false;\n        return start.every(st => st.type === 'newline' || st.type === 'space');\n    }\n    *documentEnd(docEnd) {\n        if (this.type !== 'doc-mode') {\n            if (docEnd.end)\n                docEnd.end.push(this.sourceToken);\n            else\n                docEnd.end = [this.sourceToken];\n            if (this.type === 'newline')\n                yield* this.pop();\n        }\n    }\n    *lineEnd(token) {\n        switch (this.type) {\n            case 'comma':\n            case 'doc-start':\n            case 'doc-end':\n            case 'flow-seq-end':\n            case 'flow-map-end':\n            case 'map-value-ind':\n                yield* this.pop();\n                yield* this.step();\n                break;\n            case 'newline':\n                this.onKeyLine = false;\n            // fallthrough\n            case 'space':\n            case 'comment':\n            default:\n                // all other values are errors\n                if (token.end)\n                    token.end.push(this.sourceToken);\n                else\n                    token.end = [this.sourceToken];\n                if (this.type === 'newline')\n                    yield* this.pop();\n        }\n    }\n}\n\nexport { Parser };\n","import { Composer } from './compose/composer.js';\nimport { Document } from './doc/Document.js';\nimport { prettifyError, YAMLParseError } from './errors.js';\nimport { warn } from './log.js';\nimport { LineCounter } from './parse/line-counter.js';\nimport { Parser } from './parse/parser.js';\n\nfunction parseOptions(options) {\n    const prettyErrors = options.prettyErrors !== false;\n    const lineCounter = options.lineCounter || (prettyErrors && new LineCounter()) || null;\n    return { lineCounter, prettyErrors };\n}\n/**\n * Parse the input as a stream of YAML documents.\n *\n * Documents should be separated from each other by `...` or `---` marker lines.\n *\n * @returns If an empty `docs` array is returned, it will be of type\n *   EmptyStream and contain additional stream information. In\n *   TypeScript, you should use `'empty' in docs` as a type guard for it.\n */\nfunction parseAllDocuments(source, options = {}) {\n    const { lineCounter, prettyErrors } = parseOptions(options);\n    const parser = new Parser(lineCounter?.addNewLine);\n    const composer = new Composer(options);\n    const docs = Array.from(composer.compose(parser.parse(source)));\n    if (prettyErrors && lineCounter)\n        for (const doc of docs) {\n            doc.errors.forEach(prettifyError(source, lineCounter));\n            doc.warnings.forEach(prettifyError(source, lineCounter));\n        }\n    if (docs.length > 0)\n        return docs;\n    return Object.assign([], { empty: true }, composer.streamInfo());\n}\n/** Parse an input string into a single YAML.Document */\nfunction parseDocument(source, options = {}) {\n    const { lineCounter, prettyErrors } = parseOptions(options);\n    const parser = new Parser(lineCounter?.addNewLine);\n    const composer = new Composer(options);\n    // `doc` is always set by compose.end(true) at the very latest\n    let doc = null;\n    for (const _doc of composer.compose(parser.parse(source), true, source.length)) {\n        if (!doc)\n            doc = _doc;\n        else if (doc.options.logLevel !== 'silent') {\n            doc.errors.push(new YAMLParseError(_doc.range.slice(0, 2), 'MULTIPLE_DOCS', 'Source contains multiple documents; please use YAML.parseAllDocuments()'));\n            break;\n        }\n    }\n    if (prettyErrors && lineCounter) {\n        doc.errors.forEach(prettifyError(source, lineCounter));\n        doc.warnings.forEach(prettifyError(source, lineCounter));\n    }\n    return doc;\n}\nfunction parse(src, reviver, options) {\n    let _reviver = undefined;\n    if (typeof reviver === 'function') {\n        _reviver = reviver;\n    }\n    else if (options === undefined && reviver && typeof reviver === 'object') {\n        options = reviver;\n    }\n    const doc = parseDocument(src, options);\n    if (!doc)\n        return null;\n    doc.warnings.forEach(warning => warn(doc.options.logLevel, warning));\n    if (doc.errors.length > 0) {\n        if (doc.options.logLevel !== 'silent')\n            throw doc.errors[0];\n        else\n            doc.errors = [];\n    }\n    return doc.toJS(Object.assign({ reviver: _reviver }, options));\n}\nfunction stringify(value, replacer, options) {\n    let _replacer = null;\n    if (typeof replacer === 'function' || Array.isArray(replacer)) {\n        _replacer = replacer;\n    }\n    else if (options === undefined && replacer) {\n        options = replacer;\n    }\n    if (typeof options === 'string')\n        options = options.length;\n    if (typeof options === 'number') {\n        const indent = Math.round(options);\n        options = indent < 1 ? undefined : indent > 8 ? { indent: 8 } : { indent };\n    }\n    if (value === undefined) {\n        const { keepUndefined } = options ?? replacer ?? {};\n        if (!keepUndefined)\n            return undefined;\n    }\n    return new Document(value, _replacer, options).toString(options);\n}\n\nexport { parse, parseAllDocuments, parseDocument, stringify };\n","// `export * as default from ...` fails on Webpack v4\n// https://github.com/eemeli/yaml/issues/228\nimport * as YAML from './dist/index.js'\nexport default YAML\nexport * from './dist/index.js'\n"],"names":["CodeMirror","dialogDiv","cm","template","bottom","dialog","wrap","getWrapperElement","appendChild","document","createElement","className","innerHTML","addClass","closeNotification","newVal","state","currentNotificationClose","defineExtension","callback","options","this","closed","me","close","inp","value","rmClass","parentNode","removeChild","focus","onClose","button","getElementsByTagName","selectValueOnOpen","select","onInput","on","e","onKeyUp","onKeyDown","keyCode","closeOnEnter","blur","e_stop","closeOnBlur","evt","relatedTarget","callbacks","buttons","blurring","i","length","b","e_preventDefault","setTimeout","doneTimer","duration","clearTimeout","mod","require","HINT_ELEMENT_CLASS","ACTIVE_HINT_ELEMENT_CLASS","Completion","widget","debounce","tick","startPos","getCursor","startLen","getLine","line","getSelection","updateOnCursorActivity","self","activityFunc","cursorActivity","showHint","getHints","async","newOpts","hint","prop","parseOptions","selections","listSelections","somethingSelected","supportsSelection","head","anchor","completionActive","completion","signal","update","requestAnimationFrame","window","fn","cancelAnimationFrame","pos","editor","hintOptions","out","defaultOptions","undefined","resolve","getText","text","buildKeyMap","handle","baseMap","Up","moveFocus","Down","PageUp","menuSize","PageDown","Home","setFocus","End","Enter","pick","Tab","Esc","test","navigator","platform","custom","customKeys","ourMap","addBinding","key","val","bound","hasOwnProperty","extra","extraKeys","getHintElement","hintsElement","el","nodeName","toUpperCase","Widget","data","id","Math","floor","random","picked","ownerDocument","getInputField","parentWindow","defaultView","hints","setAttribute","theme","selectedHint","completions","list","elt","cur","render","createTextNode","displayText","hintId","container","body","cursorCoords","alignWithWord","from","left","top","below","offsetLeft","offsetTop","offsetParent","indexOf","getComputedStyle","position","offsetParentPosition","getBoundingClientRect","bodyPosition","scrollLeft","scrollTop","style","winW","innerWidth","max","offsetWidth","documentElement","winH","innerHeight","offsetHeight","startScroll","box","moveOnOverlap","DOMRect","scrolls","paddingForScrollbar","scrollHeight","clientHeight","getScrollInfo","height","spaceAbove","closingOnBlur","overlapX","right","display","nativeBarWidth","width","node","firstChild","nextSibling","paddingRight","addKeyMap","keyMap","n","avoidWrap","changeActive","screenAmount","closeOnUnfocus","onBlur","onFocus","onScroll","curScroll","newTop","point","pageYOffset","t","target","srcElement","completeOnSingleClick","selectedHintRange","getSelectedHintRange","to","scrollToActive","childNodes","applicableHelpers","helpers","result","push","fetchHints","then","resolveAutoHints","words","getHelpers","resolved","app","run","getHelper","fromList","anyword","prototype","active","off","operation","replaceRange","scrollIntoView","closeOnPick","identStart","ch","closeCharacters","charAt","disable","first","myTick","finishUpdate","completeSingle","removeKeyMap","input","removeAttribute","replace","node1","node2","firstNode","margin","scrollMargin","min","registerHelper","term","token","getTokenAt","Pos","start","string","substr","found","word","slice","commands","autocomplete","auto","defineOption","searchOverlay","query","caseInsensitive","RegExp","global","source","ignoreCase","stream","lastIndex","match","exec","index","skipToEnd","SearchState","posFrom","posTo","lastQuery","overlay","getSearchState","search","queryCaseInsensitive","toLowerCase","getSearchCursor","caseFold","multiline","persistentDialog","deflt","onEnter","openDialog","clearSearch","shortText","f","prompt","confirmDialog","fs","openConfirm","confirm","parseString","parseQuery","isRE","startSearch","queryText","removeOverlay","addOverlay","showMatchesOnScrollbar","annotate","clear","doSearch","rev","persistent","immediate","findNext","q","hiding","searchNext","event","opacity","shiftKey","_","querySelector","wrapper","getQueryDialog","keyName","getOption","cmd","execCommand","cursor","find","lastLine","firstLine","setSelection","tag","attrs","element","createDocumentFragment","arguments","child","label","phrase","type","getReplaceQueryDialog","getReplacementQueryDialog","getDoReplaceConfirm","replaceAll","getRange","all","dialogText","fragment","advance","doReplace","findPersistent","findPersistentNext","findPersistentPrev","findPrev","doFold","noFold","regexpFlags","regexp","flags","ensureFlags","current","maybeMultiline","searchRegexpForward","doc","last","searchRegexpForwardMultiline","chunk","curLine","before","split","inside","startLine","startCh","lastMatchIn","endMargin","newMatch","end","searchRegexpBackward","searchRegexpBackwardMultiline","chunkSize","adjustPos","orig","folded","foldFunc","mid","len","searchStringForward","fold","lines","cutFrom","endString","searchStringBackward","lastIndexOf","topString","SearchCursor","atOccurrence","afterEmptyMatch","clipPos","matches","reverse","String","normalize","str","findPrevious","cmpPos","newText","origin","splitLines","defineDocExtension","ranges","setSelections","module","exports","userAgent","gecko","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","chrome","chrome_version","presto","safari","vendor","mac_geMountainLion","phantom","ios","maxTouchPoints","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","cls","range","after","removeChildren","count","removeChildrenAndAdd","parent","content","cssText","eltP","contains","nodeType","host","activeElt","activeElement","shadowRoot","joinClasses","a","as","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","win","bind","args","Array","call","apply","copyObj","obj","overwrite","countColumn","tabSize","startIndex","startValue","nextTab","selectionStart","selectionEnd","_e","Delayed","time","handler","onTimeout","array","Date","set","ms","scrollerGap","Pass","toString","sel_dontScroll","scroll","sel_mouse","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","lst","arr","map","insertSorted","score","priority","splice","nothing","createObj","base","props","inst","Object","create","nonASCIISingleCaseWordChar","isWordCharBasic","isWordChar","helper","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","dir","findFirst","pred","midF","ceil","iterateBidiSections","order","part","level","bidiOther","getBidiPartAt","sticky","bidiOrdering","lowTypes","arabicTypes","charType","code","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","direction","outerType","types","i$1","prev","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","j","i$5","cur$1","type$4","i$6","end$1","replace$1","j$1","m","i$7","at","isRTL","j$2","nstart","unshift","getOrder","noHandlers","emitter","addEventListener","attachEvent","_handlers","concat","getHandlers","removeEventListener","detachEvent","handlers","signalDOMEvent","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_target","e_button","which","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","hasBadBidiRects","txt","r0","r1","splitLinesAuto","l","nl","rt","hasSelection","te","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","normal","fromRange","abs","modes","mimeModes","defineMode","name","mode","dependencies","defineMIME","mime","spec","resolveMode","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","size","Error","children","sz","getBetween","iter","getLines","updateLineHeight","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","clipToLen","linelen","clipPosArray","eol","sol","peek","next","eat","eatWhile","eatSpace","skipTo","backUp","column","indentation","pattern","consume","cased","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","callBlankLine","readToken","blankLine","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","op","inThisOp","WeakSet","markedSpans","has","add","attachLine","markedSpansBefore","old","isInsert","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","startsBefore","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","found$1","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","special","specialChars","mustWrap","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","operationGroup","pushOperation","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","updateLineBackground","background","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","k","gutterSpecs","gutterWidth","alignable","isWidget","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","marginLeft","widgetHeight","parentStyle","gutters","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","paddingVert","paddingH","cachedPaddingH","currentStyle","parseInt","isNaN","scrollGap","displayWidth","scroller","barWidth","displayHeight","barHeight","ensureLineHeights","rect","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","measureText","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","pageScrollY","marginTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","clientLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","e$1","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","customCursor","$customCursor","sel","primIndex","empty","drawSelectionCursor","showCursorWhenSelecting","drawSelectionRange","cursorHeight","charPos","defaultCharWidth","otherCursor","cmpCoords","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","hasFocus","ensureFocus","delayBlurEvent","delayingBlurEvent","draggingText","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","viewTop","oldHeight","mustScroll","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","scrollNode","scrollPosIntoView","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollbars","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","markArrays","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","removeAllRanges","addRange","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","reportedViewFrom","reportedViewTo","updateNumbersFrom","rm","currentWheelTarget","updateNumber","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","clipPath","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","chromeScrollHack","pointerEvents","pixelsPerUnit","deltaMode","deltaX","deltaY","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","assign","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","remaining","leaf","maybeSpill","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","addLineWidget","insertAt","aboveVisible","this$1","oldH","nextMarkerId","TextMarker","markText","markTextShared","replacedWith","addToHistory","clearOnEnter","clearHistory","withOp","visual","dHeight","SharedTextMarker","cloneNode","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","join","lineSeparator","setValue","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","readTextFromFile","file","allowDropFileTypes","reader","onerror","onload","readAsText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","setSize","keyNames","fromCharCode","normalizeKeyName","alt","ctrl","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","altKey","metaKey","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","moveVisually","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","basic","pcDefault","emacsy","macDefault","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","getField","handled","showCrossHair","up","onKeyPress","charCode","lastClick","lastDoubleClick","DOUBLECLICK_DELAY","PastClick","clickRepeat","now","compare","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","onContextMenu","configureMouse","option","unit","addNew","moveOnDrag","contained","behavior","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","rangeForUnit","findWordAt","doc$1","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","bidiSimplify","editorSize","counter","curCount","move","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","Init","defaults","optionHandlers","defineOptions","notOnInit","newBreaks","refresh","spellcheck","autocorrect","autocapitalize","detach","attach","wrappingChanged","integer","readOnlyChanged","screenReaderLabelChanged","dragDropChanged","resetPosition","funcs","dragFunctions","toggle","enter","over","leave","drop","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","registerEventHandlers","finishInit","initHooks","textRendering","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","addEditorMethods","setOption","getDoc","modeSpec","newRanges","getLineTokens","getTokenTypeAt","help","_global","getStateAfter","defaultTextHeight","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","hitSide","rtlMoveVisually","findPosV","goalColumn","goals","headPos","startChar","check","scrollTo","interpret","swapDoc","phraseText","phrases","getScrollerElement","getGutterElement","registerGlobalHelper","predicate","origDir","lineDir","findNextLine","moveOnce","boundToLine","astral","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","isInGutter","scan","badPos","bad","domTextBetween","closing","extraLinebreak","recognizeMarker","addText","walk","cmText","markerID","isBlock","textContent","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","previousSibling","dist$1","belongsToInput","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","contentEditable","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","poll","pollSelection","pollInterval","pollContent","fromIndex","fromNode","toNode","toIndex","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","TextareaInput","prevInput","pollingFast","resetting","fromTextArea","textarea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","createField","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","opts","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","dontDelegate","method","func","version","factory","_extends","_typeof","Symbol","iterator","__extends","_extendStatics","setPrototypeOf","__proto__","__","React","SERVER_RENDERED","Helper","_this","tx","ty","every","Shared","delegateCursor","delegateScroll","coordinates","delegateSelection","autoScroll","applyNext","preserved","autoCursor","applyUserDefined","wire","forEach","onCopy","onCursor","onCursorActivity","onCut","onDblClick","onDragEnter","onDragLeave","onGutterClick","EditorChangeEvent","onInputRead","onKeyHandled","onPaste","onRenderLine","onSelection","onTouchStart","onUpdate","onViewportChange","Controlled","_super","applied","appliedNext","appliedUserDefined","deferred","emulating","hydrated","initCb","editorDidConfigure","mounted","hydrate","_options","userDefinedOptions","some","mirror","resolveChange","initChange","lastChar","mirrorChange","componentDidMount","phantomChange","onBeforeChange","onChange","editorDidMount","componentDidUpdate","prevProps","componentWillUnmount","editorWillUnmount","shouldComponentUpdate","nextProps","nextState","Component","UnControlled","continueChange","detached","onBeforeChangeCb","editorDidAttach","editorDidDetach","_get","Reflect","property","receiver","object","getPrototypeOf","desc","getOwnPropertyDescriptor","ALIAS","for","DOC","MAP","PAIR","SCALAR","SEQ","NODE_TYPE","isAlias","isDocument","isMap","isPair","isScalar","isSeq","isCollection","isNode","hasAnchor","NodeBase","_classCallCheck","defineProperty","_createClass","getOwnPropertyDescriptors","BREAK","SKIP","REMOVE","visit","visitor","visitor_","initVisitor","visit_","contents","freeze","path","callVisitor","replaceNode","items","ci","ck","cv","visitAsync","_x","_x2","_visitAsync","_asyncToGenerator","_regeneratorRuntime","_callee","_context","visitAsync_","sent","stop","_x3","_x4","_x5","_x6","_visitAsync_","_callee2","_context2","abrupt","Collection","Node","Value","Alias","Map","Scalar","Seq","_visitor$Map","_visitor$Seq","_visitor$Pair","_visitor$Scalar","_visitor$Alias","Pair","pt","escapeChars","Directives","yaml","tags","docStart","docEnd","defaultYaml","defaultTags","atNextDocument","explicit","onError","trim","_parts","_slicedToArray","prefix","isValid","verbatim","_source$match","_source$match2","suffix","decodeURIComponent","_i","_Object$entries","entries","_Object$entries$_i","startsWith","substring","tagNames","tagEntries","_key","_loop","_tagEntries$_i","_tagEntries","_i2","tn","anchorIsValid","sa","JSON","stringify","msg","anchorNames","root","anchors","Set","findNewAnchor","exclude","_NodeBase","_inherits","_createSuper","_assertThisInitialized","_this2","_arg","ctx","maxAliasCount","ReferenceError","aliasCount","getAliasCount","_onComment","_onChompKeep","verifyAliasOrder","implicitKey","_step","_iterator","_createForOfIteratorHelper","s","c","err","kc","vc","toJS","arg","isArray","toJSON","onCreate","keep","isScalarValue","BLOCK_FOLDED","BLOCK_LITERAL","PLAIN","QUOTE_DOUBLE","QUOTE_SINGLE","defaultTagPrefix","createNode","tagName","_tagName","_tagObj","_ctx$schema$MAP$creat","_ctx$schema$MAP","schema","Boolean","BigInt","valueOf","aliasDuplicateObjects","onAnchor","onTagObj","sourceObjects","tagObj","_match$find","format","_t$identify","identify","findTagObject","collectionFromPath","isInteger","keepUndefined","isEmptyPath","configurable","enumerable","writable","it","clone","_path","_toArray","addIn","_path2","delete","deleteIn","keepScalar","_path3","getIn","allowScalar","commentBefore","comment","_path4","hasIn","_path5","setIn","maxFlowStringSingleLineLength","stringifyComment","indentComment","lineComment","endsWith","includes","FOLD_FLOW","FOLD_BLOCK","FOLD_QUOTED","foldFlowLines","_ref","indentAtStart","_ref$lineWidth","lineWidth","_ref$minContentWidth","minContentWidth","onFold","onOverflow","endStep","folds","escapedFolds","overflow","escStart","escEnd","consumeMoreIndentedLines","getFoldOptions","containsDocumentMarker","doubleQuotedString","json","doubleQuotedAsJSON","minMultiLineLength","doubleQuotedMinMultiLineLength","singleQuotedString","singleQuote","quotedString","qs","hasDouble","hasSingle","blockString","onComment","onChompKeep","_ctx$options","blockQuote","commentString","chomp","endStart","forceBlockIndent","literal","indentLength","strLen","lineLengthOverLimit","endNlPos","startEnd","startWithSpace","startNlPos","header","stringifyString","item","inFlow","ss","_stringify","_type","actualString","indentStep","_tag$test","default","_ctx$doc$schema","compat","plainString","_ctx$options2","defaultKeyType","defaultStringType","createStringifyContext","directives","falseStr","flowCollectionPadding","indentSeq","nullStr","simpleKeys","trueStr","toStringOptions","collectionStyle","_ctx$indentAtStart","_ctx$resolvedAliases","resolvedAliases","TypeError","_match$find2","nodeClass","_obj$constructor$name","_obj","_obj$constructor","getTagObject","tagString","stringifyProps","warn","logLevel","warning","process","emitWarning","console","addPairToJSMap","merge","isMergeKey","mergeToJSMap","_step2","_iterator2","jsKey","stringKey","strCtx","_step4","_iterator4","inStringifyKey","strKey","mapKeyWarned","jsonStr","stringifyKey","jsValue","_step3","srcMap","_iterator3","_step3$value","createPair","mapAsMap","_ctx","allNullValues","keyComment","explicitKey","vsb","vcb","valueComment","keyCommentDone","chompKeep","flow","valueCommentDone","valueStr","cs","_ref2","_ctx$inFlow","vs0","nl0","hasNewline","hasPropsLine","sp0","stringifyPair","stringifyCollection","collection","stringifyFlowCollection","stringifyBlockCollection","blockItemPrefix","flowChars","itemIndent","itemCtx","addCommentBefore","ik","_ref3","_ref4","fcPadding","reqNewline","linesAtValue","_loop2","iv","reduce","sum","_ref5","ic","trimStart","findPair","YAMLMap","_Collection","pair","_this$schema","_pair","sortEntries","sortMapEntries","findIndex","Type","hasAllNullValues","replacer","_step$value","_Object$keys","YAMLSeq","idx","asItemIndex","nullTag","boolTag","stringifyNumber","minFractionDigits","num","isFinite","floatNaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","floatExp","parseFloat","toExponential","float","dot","intIdentify","intResolve","radix","intAsBigInt","intStringify","intOct","_onError","int","intHex","stringifyJSON","binary","Uint8Array","Buffer","atob","buffer","buf","btoa","resolvePairs","_pair$value","cn","createPairs","iterable","pairs","YAMLOMap","_YAMLSeq","_getPrototypeOf","omap","seenKeys","boolStringify","trueTag","falseTag","sign","intBin","YAMLSet","_YAMLMap","keepPair","parseSexagesimal","asBigInt","stringifySexagesimal","_60","intTime","floatTime","timestamp","_match$map","_match$map2","year","month","day","hour","minute","second","millisec","date","UTC","tz","toISOString","schemas","schema$1","schema$2","tagsByName","bool","null","coreKnownTags","getTags","customTags","schemaName","sortMapEntriesByKey","Schema","resolveKnownTags","toStringDefaults","knownTags","applyReviver","reviver","v0","v1","_Array$from","_Array$from2","_i3","Document","errors","warnings","_replacer","keepSourceTokens","prettyErrors","strict","uniqueKeys","_directives","atDocument","setSchema","_defineProperty","assertCollection","_options2","asStr","anchorPrefix","_createNodeAnchors","aliasObjects","prevAnchors","setAnchors","_aliasObjects","error","createNodeAnchors","sv","jsonArg","values","_doc$directives","hasDirectives","contentComment","dc","stringifyDocument","YAMLError","_Error","message","_wrapNativeSuper","YAMLParseError","_YAMLError","_super2","YAMLWarning","_YAMLError2","_super3","prettifyError","lc","linePos","_error$linePos$","lineStr","lineStarts","pointer","resolveProps","_start","indicator","startOnNewline","atNewline","hasSpace","commentSep","hasNewlineAfterProp","reqSpace","comma","cb","containsNewline","sep","flowIndentCheck","fc","mapIncludes","isEqual","startColMsg","resolveEnd","blockMsg","composeCollection","CN","tagToken","_tag","coll","bm","_commentEnd","composeNode","composeEmptyNode","atRoot","commentEnd","_keyProps$found","collItem","keyProps","keyStart","keyNode","valueProps","valueNode","srcToken","resolveBlockMap","bs","resolveBlockSeq","fcName","prevItemComment","_prev$value","expectedEnd","_fc$end","ce","ee","cePos","resolveFlowCollection","Coll","expType","kt","resolveBlockScalar","scalar","ts","parseBlockScalarHeader","chompStart","trimIndent","contentStart","_lines$_i","prevMoreIndented","_lines$_i2","crlf","resolveFlowScalar","badChar","foldLines","plainValue","singleQuotedValue","_foldNewline","foldNewline","cc","escapeCodes","u","U","parseCharCode","raw","wsStart","doubleQuotedValue","valueEnd","re","_match$","_match","N","L","P","fromCodePoint","composeScalar","matchWithTest","_matchWithTest","findScalarTagByName","_tag$test2","_schema$compat$find","_tag$test3","findScalarTagByTest","emptyScalarPosition","_st","isSrcToken","alias","composeAlias","composeDoc","contentEnd","getErrorPos","parsePrelude","prelude","_prelude","atComment","afterEmptyLine","Composer","atDirectives","afterDoc","_parsePrelude","forceDoc","endOffset","delegateYield","t1","_this3","t0","decorate","_this4","_context3","resolveAsScalar","createScalarToken","_context$end","_context$implicitKey","_context$inFlow","_context$offset","_context$type","he","addEndtoBlockProps","setScalarValue","_context$afterKey","afterKey","_context$implicitKey2","_context$inFlow2","setBlockScalarValue","setFlowScalarValue","oa","_Object$keys2","cst","stringifyToken","stringifyItem","_step5","_iterator5","_step6","_iterator6","_step7","_iterator7","_step8","_iterator8","_visit","_arr","itemAtPath","_item","tok","parentCollection","BOM","DOCUMENT","FLOW_END","prettyToken","tokenType","hexDigits","tagChars","invalidFlowScalarChars","invalidAnchorChars","isNotAnchorChar","Lexer","atEnd","blockScalarIndent","blockScalarKeep","flowKey","flowLevel","indentNext","indentValue","lineEndPos","incomplete","_this$next","hasChars","parseNext","dt","parseStream","parseLineStart","t2","parseBlockStart","t3","parseDocument","t4","parseFlowCollection","t5","parseQuotedScalar","t6","parseBlockScalar","t7","parsePlainScalar","t8","dirEnd","_ch","setNext","pushCount","pushSpaces","pushNewline","atLineEnd","t9","_context4","_this$peek","_this$peek2","ch0","ch1","_context5","_context6","pushIndicators","pushUntil","t10","t11","t12","t13","t16","t17","_context7","t19","quote","qb","_context8","continueScalar","pushToIndex","_context9","_ch2","_context10","_next","_context11","_context12","allowEmpty","_context13","_context14","pushTag","t14","t15","t18","t21","t20","_ch3","_context15","_context16","allowTabs","_context17","_context18","LineCounter","addNewLine","low","high","includesToken","findNonEmptyIndex","isFlowToken","getPrevProps","_it$sep","getFirstKeyStartProps","_prev$i","fixFlowSeqItems","Parser","onNewLine","atNewLine","atScalar","onKeyLine","stack","lexer","lexeme","lex","step","blockScalar","blockMap","blockSequence","flowCollection","documentEnd","_it","_it2","sourceToken","bv","startBlockValue","_end","_end2","atNextItem","_start2","atIndentedComment","flowScalar","_end3","_prev$value2","_end4","lineCounter","parseAllDocuments","_parseOptions","parser","composer","docs","compose","parse","streamInfo","_parseOptions2","_doc","_reviver"],"sourceRoot":""}
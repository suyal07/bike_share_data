"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[741],{33908:function(e,n,t){t.d(n,{K:function(){return b},w:function(){return C}});var r=t(33028),i=t(32723),o=t(34795),s=t(96234),a=t(59740),l=t(60319),c=t(80018),d=t(20356),u=t(47515),p=t(83473),h=t(44229),m=t(61623),x=t(32667),f=t(78193),g=t(97412),j=t(82182),y=t(22260),v=t(35936),S=["assetKey"],b=function(e){var n=e.assetKey,t=(0,a.Z)(e,S),l=(0,y.m)(),c=n.path.join("/"),g=f.useState(!1),b=(0,s.Z)(g,2),C=b[0],P=b[1],E=f.useRef(),A=f.useCallback((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.current&&clearTimeout(E.current),l(c),P(!0),e.next=5,(0,j.B7)({icon:"done",intent:"primary",message:"Copied asset key!"});case 5:E.current=setTimeout((function(){P(!1)}),2e3);case 6:case"end":return e.stop()}}),e)}))),[l,c]),R=f.useMemo((function(){var e=[{text:"Assets",href:"/assets"}];return n.path.reduce((function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r}),"/assets"),e}),[n.path]);return(0,v.jsx)(d.m,(0,r.Z)({title:(0,v.jsxs)(u.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,v.jsx)(N,{items:R,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,v.jsx)(p.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,v.jsx)(p.X6,{children:(0,v.jsx)(k,{to:t||"#",children:n})})}}),(0,v.jsx)(h.u,{placement:"bottom",content:"Copy asset key",children:(0,v.jsx)(w,{onClick:A,children:(0,v.jsx)(m.JO,{name:C?"copy_to_clipboard_done":"copy_to_clipboard",color:x.w.Gray400})})})]})},t))},w=l.ZP.button.withConfig({displayName:"AssetPageHeader__CopyButton",componentId:"sc-1hk7vw2-0"})(["border:none;background:transparent;cursor:pointer;padding:3px;margin-top:2px;:focus{outline:none;}","{transition:background-color 100ms linear;}:hover ","{background-color:",";}"],m.a1,m.a1,x.w.Gray800),C=function(){return(0,v.jsx)(g.rU,{to:"/asset-groups",children:(0,v.jsxs)(u.x,{flex:{gap:4},children:[(0,v.jsx)(m.JO,{color:x.w.Link,name:"schema"}),"View global asset lineage"]})})},N=(0,l.ZP)(c.Oo).withConfig({displayName:"AssetPageHeader__BreadcrumbsWithSlashes",componentId:"sc-1hk7vw2-1"})(["& li:not(:first-child)::after{background:none;font-size:20px;font-weight:bold;color:#5c7080;content:'/';width:8px;line-height:16px;}"]),k=(0,l.ZP)(g.rU).withConfig({displayName:"AssetPageHeader__BreadcrumbLink",componentId:"sc-1hk7vw2-2"})(["color:",";:hover,:active{color:",";}"],x.w.Gray800,x.w.Gray800)},10893:function(e,n,t){t.d(n,{CY:function(){return w},N9:function(){return C}});var r,i=t(71171),o=t(96234),s=t(90239),a=t(31623),l=t(78193),c=t(50032),d=t(62638),u=t(74894),p=t(14228),h=t(85514),m=t(67099),x=t(84674),f=t(13422),g=t(92761),j=t(55500),y=t(25620),v=t(44907),S=t(48341),b=t(35936),w=function(){(0,u.Px)();var e=(0,c.UO)(),n=(0,S.p3)(e[0]),t=n.pipelineName,r=n.snapshotId,i=(0,c.k6)();return(0,m.j)("Snapshot: ".concat(t).concat(r?"@".concat(r.slice(0,8)):"")),(0,b.jsx)(C,{explorerPath:n,onChangeExplorerPath:function(e,n){i[n]("/snapshots/".concat((0,S.gY)(e)))},onNavigateToSourceAssetNode:function(e){var n=e.assetKey;i.push((0,h.p)(n))}})},C=function(e){var n,t=e.explorerPath,r=e.repoAddress,i=e.onChangeExplorerPath,a=e.onNavigateToSourceAssetNode,c=e.isGraph,d=void 0!==c&&c,u=l.useState({explodeComposites:null!==(n=t.explodeComposites)&&void 0!==n&&n,preferAssetRendering:!0}),h=(0,o.Z)(u,2),m=h[0],x=h[1],S=t.opNames.slice(0,t.opNames.length-1),w=(0,g._T)(r||null,t.pipelineName),C=(0,s.a)(N,{variables:{snapshotPipelineSelector:t.snapshotId?void 0:w,snapshotId:t.snapshotId?t.snapshotId:void 0,rootHandleID:S.join("."),requestScopeHandleID:m.explodeComposites?void 0:S.join(".")}});return(0,b.jsx)(f.g,{queryResult:C,children:function(e){var n=e.pipelineSnapshotOrError;if("PipelineSnapshot"!==n.__typename)return(0,b.jsx)(v.Q,{isGraph:d,result:n,repoAddress:r});var o=n.solidHandle,s=m.explodeComposites?(0,j.i)(n.solidHandles):n.solidHandles,l=n.solidHandles.some((function(e){return e.solid.definition.assetNodes.length>0}));return m.preferAssetRendering&&l?(0,b.jsx)(p.OK,{options:m,setOptions:x,fetchOptions:{pipelineSelector:w},explorerPath:t,onChangeExplorerPath:i,onNavigateToSourceAssetNode:a}):(0,b.jsx)(y.m0,{options:m,setOptions:x,explorerPath:t,onChangeExplorerPath:i,container:n,repoAddress:r,handles:s,parentHandle:o||void 0,isGraph:d,getInvocations:function(e){return s.filter((function(n){return n.solid.definition.name===e})).map((function(e){return{handleID:e.handleID}}))}})}})},N=(0,a.Ps)(r||(r=(0,i.Z)(["\n  query PipelineExplorerRootQuery(\n    $snapshotPipelineSelector: PipelineSelector\n    $snapshotId: String\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    pipelineSnapshotOrError(\n      snapshotId: $snapshotId\n      activePipelineSelector: $snapshotPipelineSelector\n    ) {\n      ... on PipelineSnapshot {\n        id\n        name\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n            definition {\n              assetNodes {\n                id\n                ...GraphExplorerAssetNodeFragment\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),x.it,y.Sm,y.Q,y.bg,d.B)},76408:function(e,n,t){t.d(n,{G:function(){return $}});var r,i=t(71171),o=t(33028),s=t(68079),a=t(96234),l=t(31623),c=t(29845),d=t(3586),u=t(47515),p=t(67445),h=t(95714),m=t(92555),x=t(86562),f=t(61623),g=t(78193),j=t(50032),y=t(62638),v=t(39707),S=t(74894),b=t(8709),w=t(68506),C=t(89622),N=t(95904),k=t(4774),P=t(85279),E=t(13422),A=t(42468),R=t(92761),O=t(9610),I=t(63167),T=t(48341),F=t(53683),Z=t(35936),_=["status","tag","created_date_before","created_date_after"],$=function(e){(0,S.Px)();var n=(0,j.UO)().pipelinePath,t=e.repoAddress,r=void 0===t?null:t,i=(0,T.p3)(n),l=i.pipelineName,f=i.snapshotId,y=(0,R.Ux)(r),P=(0,R.E8)(y,l);(0,F.b)(i,P);var I=(0,N.oD)(_),$=(0,a.Z)(I,2),L=$[0],U=$[1],G=g.useMemo((function(){return[P?{token:"job",value:l}:{token:"pipeline",value:l},f?{token:"snapshotId",value:f}:null].filter(Boolean)}),[P,l,f]),H=[].concat((0,s.Z)(L),(0,s.Z)(G));if(r){var q={token:"tag",value:"".concat(w.H.RepositoryLabelTag,"=").concat((0,O.Wg)(r))};H.push(q)}var K=(0,k.l)({query:D,pageSize:25,variables:{filter:(0,o.Z)((0,o.Z)({},(0,N.VH)(H)),{},{pipelineName:l,snapshotId:f})},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}}),M=K.queryResult,B=K.paginationProps,V=g.useCallback((function(e){var n=(0,c.HY)(e);L.some((function(e){return(0,c.HY)(e)===n}))||U([].concat((0,s.Z)(L),[e]))}),[L,U]),W=(0,v.C4)(M,v.dT),J=(0,N.Vv)({enabledFilters:_,tokens:L,onChange:U,loading:M.loading}),Q=J.button,Y=J.activeFiltersJsx;return(0,Z.jsx)(C.Lw.Provider,{value:{refetch:M.refetch},children:(0,Z.jsx)(d.T,{children:(0,Z.jsx)(E.g,{queryResult:M,allowStaleData:!0,children:function(e){var t=e.pipelineRunsOrError;if("Runs"!==t.__typename)return(0,Z.jsx)(u.x,{padding:{vertical:64},children:(0,Z.jsx)(p.t,{icon:"error",title:"Query Error",description:t.message})});var i=t.results.slice(0,25),s=B.hasNextCursor,a=B.hasPrevCursor;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(A.Y,{$top:0,children:(0,Z.jsx)(b.A,{runs:i,onAddTag:V,actionBarComponents:(0,Z.jsxs)(u.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[Q,(0,Z.jsx)(v.xi,{refreshState:W})]}),belowActionBarComponents:(0,Z.jsxs)(Z.Fragment,{children:[G.map((function(e){var n=e.token,t=e.value;return(0,Z.jsx)(h.V,{children:"".concat(n,":").concat(t)},n)})),Y.length?(0,Z.jsxs)(Z.Fragment,{children:[Y,(0,Z.jsx)(m.Z,{onClick:function(){U([])},children:"Clear all"})]}):null]}),emptyState:function(){return(0,Z.jsx)(z,{repoAddress:r,anyFilter:L.length>0,jobName:l,jobPath:n})}})}),s||a?(0,Z.jsx)("div",{style:{marginTop:"20px"},children:(0,Z.jsx)(x.pI,(0,o.Z)({},B))}):null]})}})})})},z=function(e){var n=e.repoAddress,t=e.anyFilter,r=e.jobName,i=e.jobPath,o=(0,R.Ux)(n),s=(0,R.Hb)(o,r);return(0,Z.jsx)(u.x,{padding:{vertical:64},children:(0,Z.jsx)(p.t,{icon:"run",title:"No runs found",description:n?s?(0,Z.jsxs)(u.x,{flex:{direction:"column",gap:12},children:[(0,Z.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,Z.jsx)("div",{children:(0,Z.jsx)(P.A,{icon:(0,Z.jsx)(f.JO,{name:"materialization"}),to:(0,I.$U)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,Z.jsxs)(u.x,{flex:{direction:"column",gap:12},children:[(0,Z.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,Z.jsx)("div",{children:(0,Z.jsx)(P.A,{icon:(0,Z.jsx)(f.JO,{name:"add_circle"}),to:(0,I.$U)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,Z.jsx)("div",{children:"You have not launched any runs for this job."})})})},D=(0,l.Ps)(r||(r=(0,i.Z)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),b.Z,y.B)},42468:function(e,n,t){t.d(n,{Y:function(){return o}});var r=t(60319),i=t(32667),o=r.ZP.div.withConfig({displayName:"StickyTableContainer",componentId:"sc-n96aw9-0"})(["thead tr{position:sticky;top:","px;background-color:",";z-index:1;}thead tr th{position:relative;}thead tr th::after{content:'';display:block;height:1px;background-color:",";position:absolute;bottom:-1px;left:0;right:0;}"],(function(e){var n=e.$top;return void 0===n?0:n}),i.w.White,i.w.KeylineGray)},34319:function(e,n,t){t.d(n,{i:function(){return m}});var r=t(96234),i=t(44229),o=t(45519),s=t(61623),a=t(3077),l=t(78193),c=t(35740),d=t(92014),u=t(49009),p=t(99246),h=t(35936),m=function(e){var n=e.label,t=void 0===n?"Reload all":n,m=(0,c.WB)(),x=m.permissions.canReloadWorkspace,f=m.disabledReasons,g=(0,u.Dc)({scope:"workspace",reloadFn:u.rL}),j=g.reloading,y=g.tryReload,v=g.error,S=g.errorLocationId,b=l.useState(!!v),w=(0,r.Z)(b,2),C=w[0],N=w[1];return l.useEffect((function(){return N(!!v)}),[v]),x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.zx,{onClick:y,icon:(0,h.jsx)(s.JO,{name:"refresh"}),loading:j,intent:"none",children:t}),S?(0,h.jsx)(p.V,{error:v,location:S,reloading:j,onTryReload:y,onDismiss:function(){return N(!1)},isOpen:C}):(0,h.jsxs)(a.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:C,children:[(0,h.jsx)(a.a7,{children:v&&(0,h.jsx)(d.T9,{error:v})}),(0,h.jsx)(a.cN,{children:(0,h.jsx)(o.zx,{onClick:function(){return N(!1)},children:"Dismiss"})})]})]}):(0,h.jsx)(i.u,{content:f.canReloadWorkspace,children:(0,h.jsx)(o.zx,{icon:(0,h.jsx)(s.JO,{name:"refresh"}),disabled:!0,intent:"none",children:t})})}},41479:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return ao},default:function(){return lo}});var r,i,o,s,a=t(47515),l=t(67445),c=t(92375),d=t(78193),u=t(50032),p=t(71171),h=t(31623),m=t(90239),x=t(3586),f=t(20356),g=t(83473),j=t(16185),y=t(95714),v=t(74894),S=t(14228),b=t(67099),w=t(12434),C=t(48341),N=t(4248),k=t(34319),P=t(63167),E=t(33908),A=t(31127),R=t(99304),O=t(85514),I=t(35936),T=function(e){var n=e.repoAddress,t=e.tab;(0,v.Px)();var r=(0,u.UO)(),i=r.groupName,o=r[0],s=(0,u.k6)();(0,b.j)("Asset Group: ".concat(i));var l=(0,P.$U)(n,"/asset-groups/".concat(i)),c=d.useMemo((function(){return{groupName:i,repositoryLocationName:n.location,repositoryName:n.name}}),[i,n]),p=d.useCallback((function(e,n){s[n]("".concat(l,"/").concat((0,C.gY)(e)))}),[l,s]),h=d.useCallback((function(e){e.groupName&&e.repoAddress?s.replace((0,P.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):s.push((0,O.p)(e.assetKey,{view:"definition"}))}),[s]);return(0,I.jsxs)(x.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,I.jsx)(f.m,{title:(0,I.jsx)(g.X6,{children:i}),right:(0,I.jsx)("div",{style:{marginBottom:-8},children:(0,I.jsx)(k.i,{label:"Reload definitions"})}),tags:(0,I.jsx)(Z,{groupSelector:c,repoAddress:n}),tabs:(0,I.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,I.jsxs)(j.mQ,{selectedTabId:t,children:[(0,I.jsx)(N.f,{id:"lineage",title:"Lineage",to:"".concat(l,"/lineage")}),(0,I.jsx)(N.f,{id:"list",title:"List",to:"".concat(l,"/list")})]}),(0,I.jsx)(E.w,{})]})}),"lineage"===t?(0,I.jsx)(S.OK,{fetchOptions:{groupSelector:c},options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,C.p3)(o||"lineage/"),onChangeExplorerPath:p,onNavigateToSourceAssetNode:h}):(0,I.jsx)(A.fv,{groupSelector:c,prefixPath:o.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return s.push("".concat(l,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},F=(0,h.Ps)(r||(r=(0,p.Z)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        policyType\n      }\n    }\n  }\n"]))),Z=function(e){var n,t=e.repoAddress,r=e.groupSelector,i=(0,m.a)(F,{variables:{selector:r}}).data;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(y.V,{icon:"asset_group",children:["Asset Group in ",(0,I.jsx)(w.b,{repoAddress:t})]}),(null===i||void 0===i||null===(n=i.assetNodes)||void 0===n?void 0:n.some((function(e){return!!e.autoMaterializePolicy})))&&(0,I.jsx)(R.mM,{})]})},_=t(20358),$=t(96234),z=t(29006),D=t(35740),L=t(62638),U=t(53683),G=t(92761),H=t(18897),q=t(29156),K=function(e){var n=e.repoAddress,t=(0,D.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,o=r.pipelinePath,s=r.runId;return t?(0,I.jsx)(M,{pipelinePath:o,repoAddress:n,runId:s}):(0,I.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(o)})},M=function(e){var n=e.pipelinePath,t=e.repoAddress,r=e.runId,i=(0,C.p3)(n),o=i.pipelineName,s=(0,G.Ux)(t),a=(0,G.E8)(s,o);(0,U.b)(i,a);var l=(0,z.aC)(t,o),c=(0,$.Z)(l,2),p=c[0],h=c[1],x=(0,m.a)(B,{variables:{runId:r}}),f=x.data,g=x.loading,j=null===f||void 0===f?void 0:f.runOrError,y="Run"===(null===j||void 0===j?void 0:j.__typename)?j:null;return d.useEffect((function(){if(y){var e=y.runConfigYaml,n=y.mode,t=y.solidSelection;if(e||n||t){var r={name:"From run ".concat(y.id.slice(0,8))};"string"===typeof e&&(r.runConfigYaml=e),"string"===typeof n&&(r.mode=n),t instanceof Array&&t.length>0?r.solidSelection=t:"string"===typeof t&&t&&(r.solidSelection=[t]),h((0,z.f0)(p,r))}}}),[y,p,h]),g?(0,I.jsx)(q.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,I.jsx)(H.U,{icon:"error",title:"Python error",description:j.message}):(0,I.jsx)(u.l_,{to:{pathname:(0,P.$U)(t,"/".concat(a?"jobs":"pipelines","/").concat(o,"/playground"))}}):(0,I.jsx)(H.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},B=(0,h.Ps)(i||(i=(0,p.Z)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),L.B),V=t(76892),W=t.n(V),J=function(e){var n=e.repoAddress,t=(0,D.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,o=r.pipelinePath;return t?(0,I.jsx)(Q,{pipelinePath:o,repoAddress:n}):(0,I.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(o)})},Q=function(e){var n=e.pipelinePath,t=e.repoAddress,r=(0,C.p3)(n),i=r.pipelineName,o=(0,G.Ux)(t),s=(0,G.E8)(o,i);(0,U.b)(r,s);var a=(0,z.aC)(t,i),l=(0,$.Z)(a,2),c=l[0],p=l[1],h=W().parse(window.location.search,{ignoreQueryPrefix:!0});return d.useEffect((function(){if(h.config||h.mode||h.solidSelection||h.tags||h.assetSelection){var e={};"string"===typeof h.config&&(e.runConfigYaml=h.config),"string"===typeof h.mode&&(e.mode=h.mode),h.solidSelection instanceof Array&&h.solidSelection.length>0?e.solidSelection=h.solidSelection:"string"===typeof h.solidSelection&&h.solidSelection&&(e.solidSelection=[h.solidSelection]),"string"===typeof h.solidSelectionQuery&&(e.solidSelectionQuery=h.solidSelectionQuery),Array.isArray(h.tags)&&(e.tags=h.tags),Array.isArray(h.assetSelection)&&(e.assetSelection=h.assetSelection),p((0,z.f0)(c,e))}})),(0,I.jsx)(u.l_,{to:{pathname:(0,P.$U)(t,"/".concat(s?"jobs":"pipelines","/").concat(i,"/playground"))}})},Y=t(33028),X=t(44229),ee=t(92555),ne=t(32667),te=t(3077),re=t(45519),ie=t(23662),oe=t.n(ie),se=t(97412),ae=t(20822),le=t(68506),ce=t(89622),de=t(26756),ue=t(20876),pe=t(9610),he=t(90519),me=t(39707),xe=t(23555),fe=t(24138),ge=t(15734),je=t(46856),ye={showSeconds:!0,showTimezone:!1},ve=function(e){var n=e.pipelineName,t=e.repoAddress,r=(0,m.a)(Se,{variables:{runsFilter:{pipelineName:n,tags:[{key:le.H.RepositoryLabelTag,value:(0,pe.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,me.C4)(r,me.dT);var i=d.useMemo((function(){var e,n=null===(e=r.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null}),[r]);if(!i)return null;var o={start:i.startTime,end:i.endTime,status:i.status};return(0,I.jsx)(y.V,{intent:function(){switch(i.status){case xe.VOA.SUCCESS:return"success";case xe.VOA.CANCELED:case xe.VOA.CANCELING:case xe.VOA.FAILURE:return"danger";default:return"none"}}(),children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,I.jsx)(ge.K9,{status:i.status,size:10}),"Latest run:",o?(0,I.jsx)(X.u,{placement:"bottom",content:(0,I.jsx)(he.k6,{children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{style:{color:ne.w.Gray300},children:(0,I.jsx)(a.x,{padding:{right:16},children:"Started"})}),(0,I.jsx)("td",{children:o.start?(0,I.jsx)(je.v,{timestamp:o.start,timeFormat:ye}):(0,fe.Z0)(o.status)})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{style:{color:ne.w.Gray300},children:"Ended"}),(0,I.jsx)("td",{children:o.end?(0,I.jsx)(je.v,{timestamp:o.end,timeFormat:ye}):(0,fe.Z0)(o.status)})]})]})}),children:(0,I.jsx)(se.rU,{to:"/runs/".concat(i.id),children:(0,I.jsx)(ce.Zr,{run:i})})}):null]})})},Se=(0,h.Ps)(o||(o=(0,p.Z)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on PipelineRuns {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"])),ce.$X),be=t(73765);var we=function(e){var n=e.pipelineName,t=e.repoAddress,r=function(e,n){var t=(0,m.a)(Pe,{variables:{runsFilter:{pipelineName:n,tags:[{key:le.H.RepositoryLabelTag,value:(0,pe.Wg)(e)}]},params:{pipelineName:n,repositoryName:e.name,repositoryLocationName:e.location}}}).data;return d.useMemo((function(){return{assetNodes:(null===t||void 0===t?void 0:t.assetNodes)||null,job:null!==t&&void 0!==t&&t.pipelineOrError&&"Pipeline"===t.pipelineOrError.__typename?t.pipelineOrError:null,runsForAssetScan:null!==t&&void 0!==t&&t.pipelineRunsOrError&&"Runs"===t.pipelineRunsOrError.__typename?t.pipelineRunsOrError.results:[]}}),[t])}(t,n);return(0,I.jsxs)(I.Fragment,{children:[r.job?(0,I.jsx)(Ce,{job:r.job,repoAddress:t}):null,(0,I.jsx)(ve,{pipelineName:n,repoAddress:t}),r.assetNodes&&r.assetNodes.some((function(e){return!!e.autoMaterializePolicy}))&&(0,I.jsx)(R.mM,{}),r.runsForAssetScan?(0,I.jsx)(ke,{relatedAssets:Ne(r)}):null]})},Ce=function(e){var n=e.job,t=e.repoAddress,r=d.useMemo((function(){return"Pipeline"===(null===n||void 0===n?void 0:n.__typename)&&n.schedules.length?n.schedules:[]}),[n]),i=d.useMemo((function(){return"Pipeline"===(null===n||void 0===n?void 0:n.__typename)&&n.sensors.length?n.sensors:[]}),[n]);return(0,I.jsx)(be.I,{schedules:r,sensors:i,repoAddress:t})};function Ne(e){return e.assetNodes?e.assetNodes.map((function(e){return(0,ae.Je)(e.assetKey)})):oe()(e.runsForAssetScan.flatMap((function(e){return e.assets.map((function(e){return(0,ae.Je)(e.key)}))})))}var ke=function(e){var n=e.relatedAssets,t=d.useState(!1),r=(0,$.Z)(t,2),i=r[0],o=r[1];if(0===n.length)return null;if(1===n.length){var s=n[0];return(0,I.jsxs)(y.V,{icon:"asset",children:["Asset: ",(0,I.jsx)(se.rU,{to:"/assets/".concat(s),children:s})]})}return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(y.V,{icon:"asset",children:(0,I.jsx)(ee.Z,{color:ne.w.Link,onClick:function(){return o(!0)},children:"View ".concat(n.length," assets")})}),(0,I.jsxs)(te.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:i,onClose:function(){return o(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map((function(e,t){return(0,I.jsx)(a.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?{side:"bottom",width:1,color:ne.w.KeylineGray}:null,children:(0,I.jsx)(se.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)})),(0,I.jsx)(te.cN,{topBorder:!0,children:(0,I.jsx)(re.zx,{intent:"primary",onClick:function(){return o(!1)},children:"OK"})})]})]})},Pe=(0,h.Ps)(s||(s=(0,p.Z)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      policyType\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"])),de.J,ue.U,ce.$X),Ee={overview:{title:"Overview",pathComponent:""},playground:{title:"Launchpad",pathComponent:"playground",getPermissionsResult:function(e){return(0,D.mr)(e,"canLaunchPipelineExecution")}},runs:{title:"Runs",pathComponent:"runs"},partitions:{title:"Partitions",pathComponent:"partitions"}},Ae=["overview","playground","runs","partitions"];var Re,Oe=function(e){var n=e.repoAddress,t=(0,D.xz)(n.location),r=(0,u.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),i=function(e){var n=Object.keys(Ee),t=n.find((function(n){return Ee[n].pathComponent===e}))||n.find((function(e){return""===Ee[e].pathComponent}));return Ee[t]}(r.params.tab),o=(0,C.p3)(r.params.selector),s=o.pipelineName,l=o.snapshotId,c=(0,G.Ux)(n),d=null===c||void 0===c?void 0:c.repository.pipelines.find((function(e){return e.name===s})),p=!(null===d||void 0===d||!d.isJob),h=!(null===d||void 0===d||!d.isAssetJob),m=(null===c||void 0===c?void 0:c.repository.partitionSets)||[],x=!h,v=m.some((function(e){return e.pipelineName===s})),S=Ae.filter((function(e){return(x||"playground"!==e)&&(v||"partitions"!==e)})).map(function(e,n,t){var r=(0,C.gY)((0,Y.Z)((0,Y.Z)({},t),{},{opNames:[]}));return function(t){var i=Ee[t];return{text:i.title,href:(0,P.$U)(e,"/".concat(n?"jobs":"pipelines","/").concat(r).concat(i.pathComponent)),getPermissionsResult:i.getPermissionsResult}}}(n,p,o));return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(f.m,{title:(0,I.jsx)(g.X6,{children:s}),tags:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,I.jsxs)(y.V,{icon:"job",children:[p?"Job in ":"Pipeline in ",(0,I.jsx)(w.b,{repoAddress:n})]}),l?null:(0,I.jsx)(we,{pipelineName:s,repoAddress:n})]}),tabs:(0,I.jsx)(j.mQ,{size:"large",selectedTabId:i.title,children:S.map((function(e){var n=e.href,r=e.text,i=e.getPermissionsResult,o=null;i&&(o=i(t));var s=!(!o||o.enabled),a=o&&s?(0,I.jsx)(X.u,{content:o.disabledReason,placement:"top",children:r}):r;return(0,I.jsx)(N.f,{id:r,title:a,disabled:s,to:n},r)}))})})})};var Ie,Te=(0,h.Ps)(Re||(Re=(0,p.Z)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),L.B),Fe=t(13422),Ze=t(2838),_e=t(34570),$e=t(87519),ze=t(30559),De=t(30557),Le=t(52072),Ue=t(2191),Ge=t(68079),He=t(86562),qe=t(97021),Ke=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.repositorySelector,i=e.refetchCounter,o=d.useState((function(){return[]})),s=(0,$.Z)(o,2),c=s[0],u=s[1],p=d.useState(),h=(0,$.Z)(p,2),x=h[0],f=h[1],g=(0,m.a)(Me,{variables:{partitionSetName:n,repositorySelector:r,cursor:x,limit:10}}),j=g.refetch;return d.useEffect((function(){i&&j()}),[j,i]),(0,I.jsx)(Fe.g,{queryResult:g,children:function(e){var n=e.partitionSetOrError;if("PartitionSetNotFoundError"===n.__typename)return(0,I.jsx)(a.x,{margin:{vertical:20},children:(0,I.jsx)(l.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,I.jsx)(a.x,{margin:{vertical:20},children:(0,I.jsx)(l.t,{title:"An error occurred.",icon:"no-results"})});var r=n.backfills,i=n.pipelineName;if(!r.length)return(0,I.jsx)(a.x,{margin:{vertical:20},children:(0,I.jsx)(l.t,{title:"No backfills for ".concat(i),icon:"no-results"})});var o={hasPrevCursor:!!x,hasNextCursor:r&&10===r.length,popCursor:function(){var e=(0,Ge.Z)(c);f(e.pop()),u(e)},advanceCursor:function(){x&&u((function(e){return[].concat((0,Ge.Z)(e),[x])}));var e=r&&r[r.length-1].id;e&&f(e)},reset:function(){u([]),f(void 0)}};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(qe.G,{backfills:r,refetch:j,showBackfillTarget:!1,allPartitions:t}),(0,I.jsx)(He.b$,(0,Y.Z)({},o))]})}})},Me=(0,h.Ps)(Ie||(Ie=(0,p.Z)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"])),qe.b),Be=t(62459),Ve=t(61623),We=t(92014),Je=t(32723),Qe=t(34795),Ye=t(15541),Xe=t(17914),en=t(62709),nn=t(99641),tn=t(29982),rn=t(33258),on=t(20722),sn=t(83305),an=t(55500),ln=t(25620),cn=t(64218),dn=t(13079),un=t(97186),pn=t(41361),hn=t(56666),mn=t(25465),xn=t(18517);var fn,gn,jn=function(e){var n=e.counts,t=e.value,r=e.onChange,i=e.allowed,o=e.disabled;return(0,I.jsx)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:i.map((function(e){return(0,I.jsx)(Xe.X,{"data-testid":(0,xn.N)("run-status-".concat(e,"-checkbox")),disabled:o,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!o,label:"".concat((0,mn.fi)(e)," (").concat(n[e],")"),onChange:function(){return r(t.includes(e)?t.filter((function(n){return n!==e})):[].concat((0,Ge.Z)(t),[e]))}},e)}))})},yn=function(e){var n=e.partitionSetName,t=e.onLaunch,r=e.onCancel,i=e.onSubmit,o=e.repoAddress,s=e.runStatusData,c=e.pipelineName,p=e.partitionNames,h=(0,u.k6)(),x=d.useState(Object.keys(s).filter((function(e){return!s[e]||s[e]===xe.VOA.FAILURE}))),f=(0,$.Z)(x,2),g=f[0],j=f[1],y=d.useState([xe.VOA.NOT_STARTED,xe.VOA.FAILURE]),v=(0,$.Z)(y,2),S=v[0],b=v[1],w=d.useMemo((function(){return g.filter((function(e){return S.includes(s[e])}))}),[g,S,s]),C=d.useState(!1),N=(0,$.Z)(C,2),k=N[0],P=N[1],E=d.useState([]),A=(0,$.Z)(E,2),R=A[0],O=A[1],T=d.useState(""),F=(0,$.Z)(T,2),Z=F[0],_=F[1],z=d.useState({reexecute:!1,fromFailure:!1}),D=(0,$.Z)(z,2),L=D[0],U=D[1],G=(0,Ue.$)(o),H=(0,m.a)(Sn,{variables:{pipelineSelector:(0,Y.Z)((0,Y.Z)({},G),{},{pipelineName:c})},fetchPolicy:"network-only"}).data,q=d.useRef(!0);d.useEffect((function(){return q.current=!0,function(){q.current=!1}}),[t]);if(!H)return(0,I.jsx)(a.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,I.jsx)(Be.$,{purpose:"section"})});if("PipelineSnapshot"!==H.pipelineSnapshotOrError.__typename)return(0,I.jsx)(a.x,{margin:20,children:(0,I.jsx)(l.t,{icon:"error",title:"Could not fetch job details"})});var K=H.pipelineSnapshotOrError,M=H.instance,B=(0,an.i)(K.solidHandles).map((function(e){return e.solid})),V=(0,en.V)(B,Z),W=(0,tn.tc)({nodes:V.all,mode:nn.hS.FLAT}).boxes.map((function(e){return{x:e.x,name:e.node.name}})),J=function(e){return s[e]===xe.VOA.FAILURE},Q=p.filter(J),ee=function(e){var n,t,r=(n={},(0,hn.Z)(n,xe.VOA.SUCCESS,0),(0,hn.Z)(n,xe.VOA.NOT_STARTED,0),(0,hn.Z)(n,xe.VOA.FAILURE,0),(0,hn.Z)(n,xe.VOA.QUEUED,0),(0,hn.Z)(n,xe.VOA.STARTED,0),n),i=(0,pn.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r[o.state]=(r[o.state]||0)+1}}catch(s){i.e(s)}finally{i.f()}return r}(g.map((function(e){return{partitionKey:e,state:s[e]}})));return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(te.a7,{children:(0,I.jsxs)(a.x,{flex:{direction:"column",gap:24},children:[(0,I.jsxs)(bn,{title:"Partitions",children:[(0,I.jsx)(a.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,I.jsx)(un.x,{selected:g,setSelected:function(e){var n=new Set(e);j(p.filter((function(e){return n.has(e)}))),L.fromFailure&&e.filter((function(e){return!J(e)})).length>0&&U((0,Y.Z)((0,Y.Z)({},L),{},{fromFailure:!1}))},health:{runStatusForPartitionKey:function(e){return s[e]}},partitionKeys:p,dimensionType:(0,De.vH)(p[0])?xe.iVC.TIME_WINDOW:xe.iVC.STATIC}),(0,I.jsx)(jn,{value:S,onChange:b,counts:ee,allowed:L.fromFailure?[xe.VOA.FAILURE]:[xe.VOA.NOT_STARTED,xe.VOA.FAILURE,xe.VOA.QUEUED,xe.VOA.STARTED,xe.VOA.SUCCESS]})]}),Q.length?(0,I.jsx)(bn,{title:"Reexecution",children:(0,I.jsx)(Xe.X,{checked:L.fromFailure,disabled:!w.every(J),onChange:function(){var e=(0,Y.Z)((0,Y.Z)({},L),{},{fromFailure:!L.fromFailure,reexecute:!L.reexecute});e.fromFailure&&b([xe.VOA.FAILURE]),_(""),U(e)},label:(0,I.jsxs)(a.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,I.jsx)(a.x,{margin:{right:4},children:"Re-execute from failures"}),(0,I.jsx)(X.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,I.jsx)(Ve.JO,{name:"info",color:ne.w.Gray500})})]})})}):null,(0,I.jsx)(bn,{title:(0,I.jsxs)(a.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,I.jsx)(a.x,{margin:{right:4},children:"Step subset"}),(0,I.jsx)(X.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,I.jsx)(Ve.JO,{name:"info",color:ne.w.Gray500})})]}),children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,I.jsx)(cn.j,{disabled:L.fromFailure,width:520,items:B,value:Z,placeholder:"Type a step subset",onChange:_,autoApplyChanges:!0}),Z?(0,I.jsxs)("div",{style:{color:ne.w.Gray500},children:[W.length," step",1===W.length?"":"s"," selected"]}):null]})}),(0,I.jsxs)(bn,{title:"Tags",children:[(0,I.jsx)(sn.U,{tagsFromSession:R,onChange:O,open:k,onRequestClose:function(){return P(!1)}}),R.length?(0,I.jsx)("div",{style:{border:"1px solid ".concat(ne.w.Gray300),borderRadius:8,padding:3},children:(0,I.jsx)(sn.x,{tagsFromSession:R,onRequestEdit:function(){return P(!0)}})}):(0,I.jsx)("div",{children:(0,I.jsx)(re.zx,{onClick:function(){return P(!0)},children:"Add tags to backfill runs"})})]}),(0,I.jsxs)(a.x,{flex:{direction:"column",gap:16},children:[(0,I.jsx)(dn.So,{instance:M}),(0,I.jsx)(dn.d,{instance:M})]})]})}),(0,I.jsxs)(te.cN,{children:[(0,I.jsx)(re.zx,{intent:"none",onClick:r,children:"Cancel"}),(0,I.jsx)(vn,{partitionNames:w,partitionSetName:n,reexecutionSteps:!L.fromFailure&&V.all.length<B.length?W.map((function(e){return e.name})):void 0,fromFailure:L.fromFailure,tags:R,onSubmit:i,onSuccess:function(e){(0,dn.Xd)(h,e,!1),null===t||void 0===t||t(e,Z)},onError:function(e){(0,dn.mv)(e)},repoAddress:o})]})]})},vn=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.reexecutionSteps,i=e.fromFailure,o=e.tags,s=e.onSuccess,a=e.onError,l=e.onSubmit,c=e.repoAddress,u=(0,Ue.$)(c),p=d.useRef(!0),h=(0,Ye.D)(rn.f),m=(0,$.Z)(h,2),x=m[0],f=m[1].loading;d.useEffect((function(){return p.current=!0,function(){p.current=!1}}),[s]);var g=function(){var e=(0,Qe.Z)((0,Je.Z)().mark((function e(){var c,d;return(0,Je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,x({variables:{backfillParams:{selector:{partitionSetName:n,repositorySelector:u},partitionNames:t,reexecutionSteps:r,fromFailure:i,tags:o}}});case 3:if(c=e.sent,d=c.data,p.current){e.next=7;break}return e.abrupt("return");case 7:d&&"LaunchBackfillSuccess"===d.launchPartitionBackfill.__typename?null===s||void 0===s||s(d.launchPartitionBackfill.backfillId,!1):null===a||void 0===a||a(d);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=t.length,y=null===r||void 0===r?void 0:r.length,v=[f?"Submitting ".concat(j," ").concat(1===j?"run":"runs","\u2026"):j?"Submit ".concat(j," ").concat(1===j?"run":"runs"):"Select partitions to submit",!f&&y?"(".concat(y," selected ").concat(1===y?"step":"steps",")"):""].join(" ");return(0,I.jsx)(on.C,{runCount:j,config:{title:v,icon:"open_in_new",disabled:!j||f,onClick:g}})},Sn=(0,h.Ps)(fn||(fn=(0,p.Z)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),ln.Q,dn.op,dn.EC),bn=function(e){var n=e.title,t=e.children;return(0,I.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,I.jsx)(g.pm,{children:n}),(0,I.jsx)(a.x,{flex:{direction:"column",gap:8},padding:{top:16},border:{width:1,color:ne.w.KeylineGray,side:"top"},children:t})]})},wn=t(60319),Cn=t(16019),Nn=t(88949),kn=function(e){var n=e.partitionNames,t=e.jobDataByPartition,r=e.stepDataByPartition,i=e.title,o=e.yLabel,s=e.isJob,a=e.hiddenStepKeys,l=d.useState((function(){return{}})),c=(0,$.Z)(l,2),u=c[0],p=c[1],h=d.useRef(null),m=d.useCallback((function(e){var n=h.current;if(n){var t=n.scales["x-axis-0"];if(t){var r=e.offsetX,i=e.offsetY;if("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=t.getValueForPixel(r),s=n.data.labels[o];p((function(e){return(0,Y.Z)((0,Y.Z)({},e),{},(0,hn.Z)({},s,!e[s]))}))}}}}),[]),x=d.useMemo((function(){return{title:i?{display:!0,text:i}:void 0,animation:!1,scales:o?{y:{id:"y",title:{display:!0,text:o}},x:{id:"x",title:{display:!0,text:i}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:m,maintainAspectRatio:!1}}),[m,i,o]),f=function(){var e=[],i={};return n.forEach((function(n){var o=!!u[n];if(t&&e.push({x:n,y:o?void 0:t[n]}),r){var s=r[n];Object.entries(s||{}).forEach((function(e){var t=(0,$.Z)(e,2),r=t[0],s=t[1];null!==a&&void 0!==a&&a.includes(r)||!s||(i[r]=[].concat((0,Ge.Z)(i[r]||[]),[{x:n,y:o?void 0:s}]))}))}})),Object.keys(i).forEach((function(e){i[e]=Pn(n,i[e])})),{jobData:e,stepData:i}}(),g=f.jobData,j=f.stepData,y=s?"Total job":"Total pipeline",v={labels:n,datasets:[].concat((0,Ge.Z)(!t||a&&a.includes(y)?[]:[{label:y,data:g,borderColor:ne.w.Gray500,backgroundColor:"rgba(0,0,0,0)"}]),(0,Ge.Z)(Object.keys(j).map((function(e){return{label:e,data:j[e],borderColor:(0,Nn.kU)(e),backgroundColor:"rgba(0,0,0,0)"}}))))};return(0,I.jsx)(En,{children:(0,I.jsx)(Cn.x1,{data:function(){return v},height:300,options:x,ref:h})})},Pn=function(e,n){var t={};return n.forEach((function(e){t[e.x]=e.y})),e.map((function(e){return{x:e,y:t[e]}}))},En=wn.ZP.div.withConfig({displayName:"PartitionGraph__PartitionGraphContainer",componentId:"sc-182vuwm-0"})(["display:flex;color:",";padding:24px 12px;text-decoration:none;"],ne.w.Gray700),An=t(72374),Rn=t(46715),On=t(80620),In=t(73383),Tn=function(e){var n=e.partitionSetName,t=e.repoAddress,r=(0,Ue.$)(t),i=(0,m.a)(Hn,{variables:{partitionSetName:n,repositorySelector:r}}),o=i.data,s=i.loading;if(!o)return s?(0,I.jsx)(a.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,I.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,I.jsx)(Be.$,{purpose:"body-text"}),(0,I.jsx)("div",{children:"Loading partitions\u2026"})]})}):(0,I.jsx)(a.x,{padding:32,children:(0,I.jsx)(l.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});var c=o.partitionSetOrError;if("PartitionSetNotFoundError"===c.__typename)return(0,I.jsx)(a.x,{padding:32,children:(0,I.jsx)(l.t,{icon:"search",title:"Partition set not found",description:c.message})});if("PythonError"===c.__typename)return(0,I.jsx)(a.x,{padding:32,children:(0,I.jsx)(We.T9,{error:c})});if("PythonError"===c.partitionsOrError.__typename)return(0,I.jsx)(a.x,{padding:32,children:(0,I.jsx)(We.T9,{error:c.partitionsOrError})});var d=c.partitionsOrError.results.map((function(e){return e.name}));return(0,I.jsx)(Un,{partitionNames:d,partitionSet:c,repoAddress:t})};function Fn(e){return d.useMemo((function(){var n={},t={};return e.forEach((function(e){if(e.runsLoaded&&0!==e.runs.length){var r=e.runs.sort((function(e,n){return e.startTime||0-(n.startTime||0)})),i=r[r.length-1];n[e.name]={},t[e.name]=null!==i&&void 0!==i&&i.endTime&&null!==i&&void 0!==i&&i.startTime?i.endTime-i.startTime:void 0,i.stepStats.forEach((function(t){n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]}))}})),{runDurationData:t,stepDurationData:n}}),[e])}var Zn,_n,$n,zn,Dn,Ln,Un=function(e){var n=e.partitionSet,t=e.partitionNames,r=e.repoAddress,i=(0,D.xz)(r.location),o=i.permissions.canLaunchPartitionBackfill,s=i.disabledReasons,l=(0,Ze.S)(),c=l.viewport,u=l.containerProps,p=d.useState(60),h=(0,$.Z)(p,2),m=h[0],x=h[1],f=d.useState(0),j=(0,$.Z)(f,2),y=j[0],v=j[1],S=d.useState(!1),b=(0,$.Z)(S,2),w=b[0],C=b[1],N=d.useState(!1),k=(0,$.Z)(N,2),P=k[0],E=k[1],A=d.useState(!1),R=(0,$.Z)(A,2),O=R[0],T=R[1],F=(0,Ue.$)(r),Z=d.useState(0),_=(0,$.Z)(Z,2),z=_[0],L=_[1],U=(0,In.T)({partitionSetName:n.name,partitionTagName:le.H.Partition,partitionNames:t,pageSize:m,runsFilter:[],repositorySelector:F,jobName:n.pipelineName,offset:y,skipQuery:!w});d.useEffect((function(){if(c.width&&!w){var e=(0,Rn.Rc)(c.width-On.AQ);x(e)}}),[c.width,w,x]);var G=w?t.slice(Math.max(0,t.length-1-y-m),t.length-y):t,H=Fn(U).stepDurationData,q=d.useCallback((function(){return T(!0)}),[]),K=n.partitionStatusesOrError,M=d.useMemo((function(){return"PartitionStatuses"===K.__typename?K.results:[]}),[K]),B=d.useMemo((function(){var e={},n={};return M.forEach((function(t){e[t.partitionName]=t.runStatus||xe.VOA.NOT_STARTED,G.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)})),{runStatusData:e,runDurationData:n}}),[M,G]),V=B.runStatusData,W=B.runDurationData,J=d.useMemo((function(){return{runStatusForPartitionKey:function(e){return V[e]}}}),[V]);return(0,I.jsxs)("div",{children:[(0,I.jsx)(te.Vq,{canEscapeKeyClose:!O,canOutsideClickClose:!O,onClose:function(){return E(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:P,children:P&&(0,I.jsx)(yn,{partitionSetName:n.name,partitionNames:t,runStatusData:V,pipelineName:n.pipelineName,onCancel:function(){return E(!1)},onLaunch:function(e,n){L(z+1),E(!1)},onSubmit:q,repoAddress:r})}),(0,I.jsxs)(a.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:{width:1,side:"bottom",color:ne.w.KeylineGray},padding:{vertical:16,horizontal:24},children:[(0,I.jsx)(g.pm,{children:"Status"}),(0,I.jsxs)(a.x,{flex:{gap:8},children:[(0,I.jsx)(re.zx,{onClick:function(){return C(!w)},active:P,children:w?"Hide per-step status":"Show per-step status"}),o?(0,I.jsx)(re.zx,{onClick:function(){return E(!P)},icon:(0,I.jsx)(Ve.JO,{name:"add_circle"}),active:P,children:"Launch backfill\u2026"}):(0,I.jsx)(X.u,{content:s.canLaunchPartitionBackfill,children:(0,I.jsx)(re.zx,{icon:(0,I.jsx)(Ve.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill\u2026"})})]})]}),(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center"},border:{width:1,side:"bottom",color:ne.w.KeylineGray},padding:{left:8},children:[(0,I.jsx)(Gn,{count:t.length,label:"Total partitions"}),(0,I.jsx)(Gn,{count:t.filter((function(e){return V[e]===xe.VOA.FAILURE})).length,label:"Failed partitions"}),(0,I.jsx)(Gn,{count:t.filter((function(e){return!V[e]||V[e]===xe.VOA.NOT_STARTED})).length,label:"Missing partitions"})]}),(0,I.jsxs)(a.x,{padding:{vertical:16,horizontal:24},children:[(0,I.jsx)("div",(0,Y.Z)((0,Y.Z)({},u),{},{children:(0,I.jsx)(An.b,{partitionNames:t,health:J,selected:w?G:void 0,selectionWindowSize:m,onClick:function(e){var n=t.length-1,r=t.indexOf(e),i=Math.min(n,Math.max(0,n-r-.5*m));v(i),w||C(!0)},tooltipMessage:"Click to view per-step status"})})),w?(0,I.jsx)(a.x,{margin:{top:16},children:(0,I.jsx)(Rn.ux,{partitionNames:t,partitions:U,pipelineName:n.pipelineName,repoAddress:r,setPageSize:x,offset:y,setOffset:v})}):null]}),(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"horizontal",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(g.pm,{children:"Run duration"})}),(0,I.jsx)(a.x,{margin:24,children:(0,I.jsx)(kn,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:w?G:t,jobDataByPartition:W})}),w?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,I.jsx)(g.pm,{children:"Step duration"})}),(0,I.jsx)(a.x,{margin:24,children:(0,I.jsx)(kn,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:G,stepDataByPartition:H})})]}):null,(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"horizontal",color:ne.w.KeylineGray,width:1},style:{marginBottom:-1},children:(0,I.jsx)(g.pm,{children:"Backfill history"})}),(0,I.jsx)(a.x,{margin:{bottom:20},children:(0,I.jsx)(Ke,{partitionSetName:n.name,repositorySelector:F,partitionNames:t,refetchCounter:z})})]})},Gn=function(e){var n=e.count,t=e.label;return(0,I.jsxs)(a.x,{padding:16,style:{flex:1},border:{side:"right",width:1,color:ne.w.KeylineGray},children:[(0,I.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,I.jsx)("strong",{children:n})}),(0,I.jsx)("div",{children:t})]})},Hn=(0,h.Ps)(gn||(gn=(0,p.Z)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"])),L.B),qn=t(36980),Kn=function(e){var n=e.partitionSetName,t=e.repoAddress,r=e.pipelineName,i=(0,Ze.S)(),o=i.viewport,s=i.containerProps,l=(0,Ue.$)(t),c=(0,_e.uc)("",{pipelineSelector:{pipelineName:r,repositoryName:t.name,repositoryLocationName:t.location}}),u=(0,Le.mR)(c.graphAssetKeys),p=d.useMemo((function(){var e=(0,De.$G)(u.filter((function(e){return e.dimensions.length>0}))),n=e.dimensions.map((function(e){return{selectedKeys:e.partitionKeys,selectedRanges:[(0,qn.$0)(e)],dimension:e}})),t=(0,De.f1)(n,e.stateForKey);return{merged:e,total:t.length,missing:t.filter((function(e){return e.state.includes($e.yo.MISSING)})).length}}),[u]),h=p.total,m=p.missing,x=p.merged,f=d.useState(60),j=(0,$.Z)(f,2),y=j[0],v=j[1],S=d.useState(0),b=(0,$.Z)(S,2),w=b[0],C=b[1],N=d.useState(!1),k=(0,$.Z)(N,2),P=k[0],E=k[1];d.useEffect((function(){if(o.width){var e=(0,Rn.Rc)(o.width-On.AQ);v(e)}}),[o.width,v]);var A=x.dimensions.findIndex(De.nv);-1===A&&(A=0);var R=x.dimensions[A]?x.dimensions[A]:null,O=(null===R||void 0===R?void 0:R.partitionKeys)||[],T=O.slice(Math.max(0,O.length-1-w-y),O.length-w);return(0,I.jsxs)("div",{children:[(0,I.jsxs)(a.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:{width:1,side:"bottom",color:ne.w.KeylineGray},padding:{vertical:16,horizontal:24},children:[(0,I.jsx)(g.pm,{children:"Status"}),(0,I.jsxs)(a.x,{flex:{gap:8},children:[(0,I.jsx)(re.zx,{onClick:function(){return E(!P)},children:P?"Hide per-asset status":"Show per-asset status"}),(0,I.jsx)(ze.XE,{scope:{all:c.graphQueryItems.map((function(e){return e.node})),skipAllTerm:!0},preferredJobName:r})]})]}),(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center"},border:{width:1,side:"bottom",color:ne.w.KeylineGray},padding:{left:8},children:[(0,I.jsx)(Gn,{count:h,label:"Total partitions"}),(0,I.jsx)(Gn,{count:m,label:"Missing partitions"})]}),(0,I.jsxs)(a.x,{padding:{vertical:16,horizontal:24},children:[(0,I.jsx)("div",(0,Y.Z)((0,Y.Z)({},s),{},{children:(0,I.jsx)(An.b,{partitionNames:O,splitPartitions:!!R&&!(0,De.nv)(R),health:{ranges:x.rangesForSingleDimension(A)},selected:T,selectionWindowSize:y,tooltipMessage:"Click to view per-asset status",onClick:function(e){var n=O.length-1,t=O.indexOf(e),r=Math.min(n,Math.max(0,n-t-.5*y));C(r)}})})),P&&R&&(0,I.jsx)(a.x,{margin:{top:16},children:(0,I.jsx)(Rn.ac,{rangeDimensionIdx:A,rangeDimension:R,assetHealth:u,assetQueryItems:c.graphQueryItems,pipelineName:r,setPageSize:v,offset:w,setOffset:C})})]}),P&&(0,I.jsx)(Mn,{repositorySelector:l,pipelineName:r,partitionSetName:n,multidimensional:((null===x||void 0===x?void 0:x.dimensions.length)||0)>1,dimensionName:R?R.name:null,dimensionKeys:O,selected:T,offset:w,pageSize:y}),(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"horizontal",color:ne.w.KeylineGray,width:1},style:{marginBottom:-1},children:(0,I.jsx)(g.pm,{children:"Backfill history"})}),(0,I.jsx)(a.x,{margin:{bottom:20},children:(0,I.jsx)(Ke,{partitionSetName:n,repositorySelector:l,partitionNames:O,refetchCounter:1})})]})},Mn=function(e){var n=e.repositorySelector,t=e.dimensionKeys,r=e.dimensionName,i=e.selected,o=e.pageSize,s=e.partitionSetName,l=e.multidimensional,c=e.pipelineName,d=e.offset,u=Fn((0,In.T)({partitionSetName:s,partitionTagName:l?"".concat(le.H.Partition,"/").concat(r):le.H.Partition,partitionNames:t,repositorySelector:n,pageSize:o,runsFilter:[],jobName:c,offset:d,skipQuery:!r})),p=u.stepDurationData,h=u.runDurationData;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"horizontal",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(g.pm,{children:"Run duration"})}),(0,I.jsx)(a.x,{margin:24,children:(0,I.jsx)(kn,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,jobDataByPartition:h})}),(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"horizontal",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(g.pm,{children:"Step durations"})}),(0,I.jsx)(a.x,{margin:24,children:(0,I.jsx)(kn,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,stepDataByPartition:p})})]})},Bn=function(e){var n=e.repoAddress,t=(0,u.UO)(),r=t.pipelinePath,i=(0,C.p3)(r),o=i.pipelineName,s=(0,G.Ux)(n),c=null===s||void 0===s?void 0:s.repository.pipelines.find((function(e){return e.name===o})),p=!(null===c||void 0===c||!c.isJob),h=!(null===c||void 0===c||!c.isAssetJob);(0,U.b)(i,p),(0,C.Bj)(t);var x=function(e,n){var t=(0,m.a)(Te,{skip:!n,variables:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n}}).data;return d.useMemo((function(){return{partitionSet:"PartitionSets"===(null===t||void 0===t?void 0:t.partitionSetsOrError.__typename)?t.partitionSetsOrError.results[0]:void 0,partitionSetError:"PipelineNotFoundError"===(null===t||void 0===t?void 0:t.partitionSetsOrError.__typename)||"PythonError"===(null===t||void 0===t?void 0:t.partitionSetsOrError.__typename)?t.partitionSetsOrError:void 0}}),[t])}(n,o),f=x.partitionSet,g=x.partitionSetError;return f||g?g?(0,I.jsx)(a.x,{padding:{vertical:64},children:(0,I.jsx)(l.t,{icon:"error",title:"Partitions",description:g.message})}):f?h?(0,I.jsx)(Kn,{pipelineName:o,partitionSetName:f.name,repoAddress:n}):(0,I.jsx)(Tn,{partitionSetName:f.name,repoAddress:n}):(0,I.jsx)(a.x,{padding:{vertical:64},children:(0,I.jsx)(l.t,{icon:"error",title:"Partitions",description:(0,I.jsxs)("div",{children:["There are no partition sets defined for ",p?"job":"pipeline"," ",(0,I.jsx)("code",{children:o}),"."]})})}):(0,I.jsx)(Fe.T,{purpose:"page"})},Vn=function(e){var n=e.repoAddress,t=(0,u.TH)(),r=(0,u.UO)().pipelinePath,i=(0,C.p3)(r).pipelineName,o=(0,G.Ux)(n),s=(0,G.E8)(o,i),a=t.pathname,l=t.search,c=a.replace("/pipeline_or_job/",s?"/jobs/":"/pipelines/");return(0,I.jsx)(u.l_,{to:"".concat(c).concat(l)})},Wn=t(10893),Jn=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.k6)(),r=(0,u.TH)(),i=(0,u.UO)(),o=(0,C.p3)(i[0]),s=(0,G.Ux)(n),a=(0,G.E8)(s,o.pipelineName);(0,U.b)(o,a),(0,C.Bj)({pipelinePath:(0,C.gY)(o)});var l=d.useCallback((function(e,i){t[i]({search:r.search,pathname:(0,P.$U)(n,"/".concat(a?"jobs":"pipelines","/").concat((0,C.gY)(e)))})}),[t,r.search,n,a]),c=d.useCallback((function(e){e.jobName&&e.opNames.length&&e.repoAddress?t.replace({search:r.search,pathname:(0,P.$U)(e.repoAddress,"/jobs/".concat((0,C.gY)((0,Y.Z)((0,Y.Z)({},o),{},{opNames:[(0,ae.Je)(e.assetKey)],opsQuery:"",pipelineName:e.jobName}))))}):t.push((0,O.p)(e.assetKey,{view:"definition"}))}),[o,t,r.search]);return(0,I.jsx)(Wn.N9,{repoAddress:n,explorerPath:o,onChangeExplorerPath:l,onNavigateToSourceAssetNode:c})},Qn=t(76408),Yn=function(e){var n=e.repoAddress;return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,I.jsx)(Oe,{repoAddress:n}),(0,I.jsxs)(u.rs,{children:[(0,I.jsx)(u.AW,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,I.jsx)(Vn,{repoAddress:n})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,I.jsx)(J,{repoAddress:n})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,I.jsx)(K,{repoAddress:n})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,I.jsx)(_.H,{repoAddress:n})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,I.jsx)(u.l_,{to:"/runs/".concat(e.match.params.runId)})}}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,I.jsx)(Qn.G,{repoAddress:n})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,I.jsx)(Bn,{repoAddress:n})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,I.jsx)(u.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,I.jsx)(Jn,{repoAddress:n})})]})]})},Xn=t(86136),et=t(51737),nt=t(3245),tt=(t(23955),t(67888)),rt=t(57103),it=t(55849),ot=t(9759),st=t(82182),at=t(72691),lt=t(22260),ct=t(46860),dt=t(4774),ut=t(76413),pt=t(44099),ht=t(31173),mt=function(e){var n=e.tick,t=e.instigationSelector,r=e.onClose,i=(0,m.a)(jt,{variables:{instigationSelector:t,timestamp:n.timestamp},notifyOnNetworkStatusChange:!0}).data,o="InstigationState"===(null===i||void 0===i?void 0:i.instigationStateOrError.__typename)&&null!==i&&void 0!==i&&i.instigationStateOrError.tick?null===i||void 0===i?void 0:i.instigationStateOrError.tick.logEvents.events:void 0;return(0,I.jsxs)(te.Vq,{isOpen:!!o,onClose:r,style:{width:"70vw",display:"flex"},title:n?(0,I.jsx)(je.v,{timestamp:n.timestamp}):null,children:[(0,I.jsx)(te.a7,{children:o&&o.length?(0,I.jsx)(xt,{events:o}):(0,I.jsx)(a.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,color:ne.w.Gray600},children:"No logs available"})}),(0,I.jsx)(te.cN,{children:(0,I.jsx)(re.zx,{intent:"primary",onClick:r,children:"OK"})})]})},xt=function(e){var n=e.events;return(0,I.jsx)("div",{style:{overflow:"hidden",borderBottom:"0.5px solid #ececec",flex:1},children:(0,I.jsxs)(ht.bu,{onWidthsChanged:function(){},children:[(0,I.jsx)(ft,{}),n.map((function(e,n){return(0,I.jsx)(gt,{event:e},n)}))]})})},ft=function(){var e=d.useContext(ht.D7);return(0,I.jsxs)(ht.Cr,{children:[(0,I.jsx)(ht.h4,{width:e.eventType,onResize:function(n){return e.onChange((0,Y.Z)((0,Y.Z)({},e),{},{eventType:n}))},children:"Event Type"}),(0,I.jsx)(ht.gM,{style:{flex:1},children:"Info"}),(0,I.jsx)(ht.h4,{handleSide:"left",width:e.timestamp,onResize:function(n){return e.onChange((0,Y.Z)((0,Y.Z)({},e),{},{timestamp:n}))},children:"Timestamp"})]})},gt=function(e){var n=e.event;return(0,I.jsxs)(pt.X2,{level:n.level,highlighted:!1,children:[(0,I.jsx)(pt.qH,{children:(0,I.jsx)("span",{style:{marginLeft:8},children:n.level})}),(0,I.jsx)(a.x,{padding:{horizontal:12},style:{flex:1},children:n.message}),(0,I.jsx)(pt.pq,{time:n.timestamp})]})},jt=(0,h.Ps)(Zn||(Zn=(0,p.Z)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...TickLogEvent\n            }\n          }\n        }\n      }\n    }\n  }\n\n  fragment TickLogEvent on InstigationEvent {\n    message\n    timestamp\n    level\n  }\n"]))),yt=t(88508),vt=t(60929),St=(_n={},(0,hn.Z)(_n,xe.izS.SUCCESS,ne.w.Blue500),(0,hn.Z)(_n,xe.izS.FAILURE,ne.w.Red500),(0,hn.Z)(_n,xe.izS.STARTED,ne.w.Gray400),(0,hn.Z)(_n,xe.izS.SKIPPED,ne.w.Yellow500),_n),bt=function(e){var n=e.ticks,t=e.nextTick,r=e.onHoverTick,i=e.onSelectTick,o=d.useState(Date.now()),s=(0,$.Z)(o,2),a=s[0],l=s[1],c=d.useState(Date.now()),u=(0,$.Z)(c,2),p=u[0],h=u[1],m=d.useState(!1),x=(0,$.Z)(m,2),f=x[0],g=x[1];d.useEffect((function(){var e=setInterval((function(){!f&&l(Date.now())}),100);return function(){return clearInterval(e)}})),d.useEffect((function(){f||t&&!(a<1e3*t.timestamp)||h(a)}),[f,t,a]);var j=t&&1e3*t.timestamp<=a?4+Math.sin(2*Math.PI*(a%2e3)/2e3):3,y=n.map((function(e){return{x:1e3*e.timestamp,y:0}})),v=n.map((function(e){return St[e.status]})),S=Array(n.length).fill(3);t&&(y.push({x:1e3*t.timestamp,y:0}),v.push(ne.w.Gray200),S.push(j));var b={labels:["ticks"],datasets:[{label:"now",data:[{x:p-6e5,y:0},{x:p,y:0}],borderColor:ne.w.Gray100,borderWidth:1,pointBorderWidth:2,pointBorderColor:ne.w.Gray200,pointRadius:1,pointHoverRadius:1},{label:"ticks",data:y,borderColor:ne.w.Gray100,borderWidth:0,backgroundColor:"rgba(0,0,0,0)",pointBackgroundColor:"rgba(0,0,0,0)",pointBorderWidth:2,pointBorderColor:v,pointRadius:S,pointHoverBorderWidth:2,pointHoverRadius:5,pointHoverBorderColor:v}]},w={animation:{duration:0},scales:{y:{id:"y",display:!1,grid:{display:!1},title:{display:!1}},x:{id:"x",type:"time",title:{display:!1},grid:{display:!0},bounds:"ticks",min:p-3e5,max:p+6e4,time:{minUnit:"minute"}}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,callbacks:{label:function(e){var t;if(!e.datasetIndex)return"Current time";if(void 0===e.dataIndex)return"";if(e.dataIndex===n.length)return"";var r=n[e.dataIndex],i=r.cursor?"Cursor: ".concat(r.cursor,"\n"):"";return r.status===xe.izS.SKIPPED&&r.skipReason?i?[r.skipReason,i]:r.skipReason:r.status===xe.izS.SUCCESS&&r.runIds.length?i?[].concat((0,Ge.Z)(r.runIds),[i]):r.runIds:r.status===xe.izS.SUCCESS&&r.originRunIds?i?[].concat((0,Ge.Z)(r.originRunIds),[i]):r.originRunIds:r.status===xe.izS.FAILURE&&null!==(t=r.error)&&void 0!==t&&t.message?i?[r.error.message,i]:r.error.message:i}}}},onClick:function(e,t){if(t.length){var r=(0,$.Z)(t,1)[0];if(void 0!==r.datasetIndex&&void 0!==r.index){var o=n[r.index];i(o)}}},onHover:function(e,t){if((null===e||void 0===e?void 0:e.target)instanceof HTMLElement&&(e.target.style.cursor=t.length?"pointer":"default"),t.length&&!f){g(!0);var i=t.filter((function(e){return 1===e.datasetIndex&&void 0!==e.index&&e.index<n.length})),o=(0,$.Z)(i,1)[0];if(!o)return;var s=n[o.index];r(s)}else!t.length&&f&&(g(!1),r(void 0))},maintainAspectRatio:!1};return(0,I.jsx)(Cn.x1,{data:b,height:150,options:w},"100%")},wt=t(4537),Ct=function(e){var n=e.timestamp,t=e.instigationSelector,r=e.onClose,i=(0,m.a)(Nt,{variables:{instigationSelector:t,timestamp:n||0},skip:!n}).data,o="InstigationState"===(null===i||void 0===i?void 0:i.instigationStateOrError.__typename)?null===i||void 0===i?void 0:i.instigationStateOrError.tick:void 0;return(0,I.jsxs)(te.Vq,{isOpen:!!o,onClose:r,style:{width:o&&o.status===xe.izS.SKIPPED?"50vw":"90vw"},title:o?(0,I.jsx)(je.v,{timestamp:o.timestamp}):null,children:[o?(0,I.jsxs)(te.a7,{children:[o.status===xe.izS.SUCCESS?o.runIds.length?(0,I.jsx)(yt.i0,{runIds:o.runIds}):(0,I.jsx)(yt.lB,{originRunIds:o.originRunIds}):null,o.status===xe.izS.SKIPPED?(0,I.jsxs)(wt.Z,{direction:"row",spacing:16,children:[(0,I.jsx)(yt.TW,{tick:o}),(0,I.jsx)("span",{children:o.skipReason||"No skip reason provided"})]}):o.status===xe.izS.FAILURE&&o.error?(0,I.jsx)(We.T9,{error:o.error}):void 0]}):null,(0,I.jsxs)(te.cN,{children:[(0,I.jsx)(re.zx,{icon:(0,I.jsx)(Ve.JO,{name:"copy_to_clipboard"}),onClick:function(e){return(0,st.gs)(e,window.location.href)},children:"Copy Link"}),(0,I.jsx)(re.zx,{intent:"primary",onClick:r,children:"OK"})]})]})},Nt=(0,h.Ps)($n||($n=(0,p.Z)(["\n  query SelectedTickQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          status\n          timestamp\n          skipReason\n          runIds\n          originRunIds\n          error {\n            ...PythonErrorFragment\n          }\n          ...TickTagFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),L.B,yt.dY);it.kL.register(ot.ZP);var kt=(zn={},(0,hn.Z)(zn,xe.izS.SUCCESS,!0),(0,hn.Z)(zn,xe.izS.FAILURE,!0),(0,hn.Z)(zn,xe.izS.STARTED,!0),(0,hn.Z)(zn,xe.izS.SKIPPED,!1),zn),Pt=(Dn={},(0,hn.Z)(Dn,xe.izS.SUCCESS,"Requested"),(0,hn.Z)(Dn,xe.izS.FAILURE,"Failed"),(0,hn.Z)(Dn,xe.izS.STARTED,"Started"),(0,hn.Z)(Dn,xe.izS.SKIPPED,"Skipped"),Dn),Et=function(e){var n=e.name,t=e.repoAddress,r=e.tabs,i=(0,ct.q)({encode:function(e){var n={};return Object.keys(e).map((function(t){n[t.toLowerCase()]=String(e[t])})),n},decode:function(e){var n=(0,Y.Z)({},kt);return Object.keys(kt).forEach((function(t){t.toLowerCase()in e&&(n[t]=!("false"===e[t.toLowerCase()]))})),n}}),o=(0,$.Z)(i,2),s=o[0],c=o[1],u=(0,lt.m)(),p=(0,at.gV)().flagSensorScheduleLogging,h=(0,Y.Z)((0,Y.Z)({},(0,Ue.$)(t)),{},{name:n}),m=Object.keys(s).filter((function(e){return s[e]})).map((function(e){return e})),x=(0,dt.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:h,statuses:m},query:Wt,pageSize:25}),f=x.queryResult,g=x.paginationProps,j=d.useState(),y=(0,$.Z)(j,2),v=y[0],S=y[1],b=f.data;if(!b)return null;if("PythonError"===b.instigationStateOrError.__typename)return(0,I.jsx)(We.T9,{error:b.instigationStateOrError});if("InstigationStateNotFoundError"===b.instigationStateOrError.__typename)return(0,I.jsx)(a.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,I.jsx)(l.t,{icon:"no-results",title:"No ticks to display"})});var w=b.instigationStateOrError,C=w.ticks,N=w.instigationType;if(!C.length&&m.length===Object.keys(kt).length)return null;var k=function(e){var n=e.status;return(0,I.jsx)(Xe.X,{label:Pt[n],checked:s[n],onChange:function(e){c((0,Y.Z)((0,Y.Z)({},s),{},(0,hn.Z)({},n,e.target.checked)))}})};return(0,I.jsxs)(I.Fragment,{children:[v?(0,I.jsx)(mt,{tick:v,instigationSelector:h,onClose:function(){return S(void 0)}}):null,(0,I.jsx)(a.x,{margin:{vertical:8,horizontal:24},children:(0,I.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[r,(0,I.jsxs)(a.x,{flex:{direction:"row",gap:16},children:[(0,I.jsx)(k,{status:xe.izS.STARTED}),(0,I.jsx)(k,{status:xe.izS.SUCCESS}),(0,I.jsx)(k,{status:xe.izS.FAILURE}),(0,I.jsx)(k,{status:xe.izS.SKIPPED})]})]})}),C.length?(0,I.jsxs)(tt.i,{children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,I.jsx)("th",{style:{width:90},children:"Status"}),N===xe._5b.SENSOR?(0,I.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,I.jsx)("th",{style:{width:180},children:"Runs"}),p?(0,I.jsx)("th",{style:{width:180},children:"Logs"}):null,(0,I.jsx)("th",{style:{width:200},children:"Requests"})]})}),(0,I.jsx)("tbody",{children:C.map((function(e){return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:(0,I.jsx)(je.v,{timestamp:e.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,I.jsx)("td",{children:(0,I.jsx)(yt.TW,{tick:e})}),N===xe._5b.SENSOR?(0,I.jsx)("td",{style:{width:120},children:e.cursor?(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,I.jsx)("div",{style:{fontFamily:rt.b.monospace,fontSize:"16px"},children:(n=e.cursor||"",n.length>100?"".concat(n.slice(0,95),"\u2026"):n)}),(0,I.jsx)(Jt,{onClick:(0,Qe.Z)((0,Je.Z)().mark((function n(){return(0,Je.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(e.cursor||""),n.next=3,(0,st.B7)({message:(0,I.jsx)("div",{children:"Copied value"}),intent:"success"});case 3:case"end":return n.stop()}}),n)}))),children:(0,I.jsx)(Ve.JO,{name:"assignment"})})]}):(0,I.jsx)(I.Fragment,{children:"\u2014"})}):null,(0,I.jsx)("td",{children:e.runIds.length?e.runs.map((function(e){return(0,I.jsx)(d.Fragment,{children:(0,I.jsx)(vt.RX,{run:e})},e.id)})):(0,I.jsx)(I.Fragment,{children:"\u2014"})}),p?(0,I.jsx)("td",{children:e.logKey?(0,I.jsx)("a",{onClick:function(){return S(e)},children:"View logs"}):(0,I.jsx)(I.Fragment,{children:"\u2014"})}):null,(0,I.jsx)("td",{children:(0,I.jsx)(Rt,{requests:e.dynamicPartitionsRequestResults})})]},e.id);var n}))})]}):(0,I.jsx)(a.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,I.jsx)(l.t,{icon:"no-results",title:"No ticks to display"})}),C.length>0?(0,I.jsx)("div",{style:{marginTop:"16px"},children:(0,I.jsx)(He.pI,(0,Y.Z)({},g))}):null]})},At=function(e){var n=e.name,t=e.repoAddress,r=e.onHighlightRunIds,i=(0,ct.q)({encode:function(e){return{time:e}},decode:function(e){return e.time?Number(e.time):void 0}}),o=(0,$.Z)(i,2),s=o[0],l=o[1],c=d.useState(!1),u=(0,$.Z)(c,2),p=u[0],h=u[1],x=(0,Y.Z)((0,Y.Z)({},(0,Ue.$)(t)),{},{name:n}),f=(0,m.a)(Wt,{variables:{instigationSelector:x,limit:15},notifyOnNetworkStatusChange:!0});(0,me.C4)(f,p?me.hy:1e3);var j=f.data;if(!j)return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.x,{padding:{top:16,horizontal:24},border:{side:"bottom",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(g.pm,{children:"Recent ticks"})}),(0,I.jsx)(a.x,{padding:{vertical:64},children:(0,I.jsx)(Be.$,{purpose:"section"})})]});if("PythonError"===j.instigationStateOrError.__typename)return(0,I.jsx)(We.T9,{error:j.instigationStateOrError});if("InstigationStateNotFoundError"===j.instigationStateOrError.__typename)return null;var y=j.instigationStateOrError,v=y.ticks,S=y.nextTick,b=function(e){l(e?e.timestamp:void 0)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ct,{timestamp:s,instigationSelector:x,onClose:function(){return b(void 0)}}),(0,I.jsx)(a.x,{padding:{vertical:16,horizontal:24},children:(0,I.jsx)(g.pm,{children:"Recent ticks"})}),(0,I.jsx)(a.x,{border:{side:"top",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(bt,{ticks:v,nextTick:S,onHoverTick:function(e){e||h(!1),null!==e&&void 0!==e&&e.runIds&&(r&&r(e.runIds),h(!0))},onSelectTick:b})})]})};function Rt(e){var n=e.requests,t=d.useState(!1),r=(0,$.Z)(t,2),i=r[0],o=r[1],s=n.filter((function(e){var n;return null===(n=e.partitionKeys)||void 0===n?void 0:n.length}));return s.length?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(ee.Z,{onClick:function(){o(!0)},children:[s.length," dynamic partition change",1===s.length?"":"s"]}),(0,I.jsxs)(te.Vq,{isOpen:i,onClose:function(){o(!1)},style:{width:"60%",minWidth:"400px"},icon:"partition",title:"Dynamic partition changes",children:[(0,I.jsx)(ut.T,{includeTitle:!1,requests:s}),(0,I.jsx)(te.cN,{children:(0,I.jsx)(re.zx,{intent:"primary",onClick:function(){o(!1)},children:"Close"})})]})]}):null}var Ot,It,Tt,Ft,Zt,_t,$t,zt,Dt,Lt,Ut,Gt,Ht,qt,Kt,Mt,Bt,Vt,Wt=(0,h.Ps)(Ln||(Ln=(0,p.Z)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        nextTick {\n          ...NextTickForHistory\n        }\n        ticks(dayRange: $dayRange, limit: $limit, cursor: $cursor, statuses: $statuses) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment NextTickForHistory on DryRunInstigationTick {\n    timestamp\n  }\n\n  fragment HistoryTick on InstigationTick {\n    id\n    status\n    timestamp\n    cursor\n    skipReason\n    runIds\n    runs {\n      id\n      status\n      ...RunStatusFragment\n    }\n    originRunIds\n    error {\n      ...PythonErrorFragment\n    }\n    logKey\n    ...TickTagFragment\n    dynamicPartitionsRequestResults {\n      ...DynamicPartitionsRequestResultFragment\n    }\n  }\n\n  fragment DynamicPartitionsRequestResultFragment on DynamicPartitionsRequestResult {\n    partitionsDefName\n    partitionKeys\n    skippedPartitionKeys\n    type\n  }\n\n  ","\n  ","\n  ","\n"])),vt.S9,L.B,yt.dY),Jt=wn.ZP.button.withConfig({displayName:"TickHistory__CopyButton",componentId:"sc-1qfczm2-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}:hover ","{background-color:",";}:focus ","{background-color:",";}"],Ve.a1,ne.w.Gray600,Ve.a1,ne.w.Gray800,Ve.a1,ne.w.Link),Qt=t(8709),Yt=t(24265),Xt=t(73070),er=t(85357),nr=t(62122),tr=t(61442),rr=t(18659),ir=t(15527),or=navigator.language,sr=function(e){return(0,I.jsx)(te.Vq,(0,Y.Z)((0,Y.Z)({},e),{},{style:{width:"70vw",display:"flex"},title:(0,I.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,I.jsx)(Ve.JO,{name:"schedule"}),(0,I.jsx)("span",{children:e.name})]}),children:(0,I.jsx)(ar,(0,Y.Z)({},e))}))},ar=function(e){var n=e.repoAddress,t=e.name,r=e.onClose,i=e.jobName,o=d.useState(),s=(0,$.Z)(o,2),l=s[0],c=s[1],u=(0,m.a)(lr,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}).data,p=d.useContext(nr.JB),h=(0,$.Z)(p.timezone,1)[0],x=d.useState(!1),f=(0,$.Z)(x,2),g=f[0],j=f[1],y=d.useRef(null),v=(0,Ze.S)(),S=v.viewport,b=v.containerProps,w=d.useState(!1),C=(0,$.Z)(w,2),N=C[0],k=C[1],P=d.useMemo((function(){var e;if(N)return(0,I.jsx)(cr,{repoAddress:n,name:t,timestamp:y.current.ts,jobName:i});if(!u)return(0,I.jsx)(a.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,I.jsx)(Be.$,{purpose:"page"})});if("PythonError"===u.scheduleOrError.__typename)return(0,I.jsx)("div",{});if("ScheduleNotFoundError"===u.scheduleOrError.__typename)return(0,I.jsx)("div",{});var r=u.scheduleOrError.potentialTickTimestamps.map((function(e){return{ts:e,label:(0,tr.j)({timestamp:{unix:e},locale:or,timezone:h,timeFormat:{showTimezone:!0}})}}));return y.current=l||r[0]||null,(0,I.jsxs)(ur,{children:[(0,I.jsx)(hr,{children:"Select a mock evaluation time"}),(0,I.jsx)(Xt.J,{isOpen:g,position:"bottom-left",fill:!0,content:(0,I.jsx)(er.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(S.width,"px")},children:r.map((function(e){return(0,I.jsx)(er.sN,{text:(0,I.jsx)("div",{"data-testid":(0,xn.N)("tick-".concat(e.ts)),children:e.label}),onClick:function(){c(e),j(!1)}},e.ts)}))}),children:(0,I.jsx)("div",(0,Y.Z)((0,Y.Z)({},b),{},{children:(0,I.jsx)(re.zx,{style:{flex:1},rightIcon:(0,I.jsx)(Ve.JO,{name:"arrow_drop_down"}),onClick:function(){return j((function(e){return!e}))},"data-testid":(0,xn.N)("tick-selection"),children:null===(e=y.current)||void 0===e?void 0:e.label})}))})]})}),[l,b,u,g,i,t,n,N,h,S.width]),E=d.useMemo((function(){return N?(0,I.jsx)(re.zx,{onClick:r,children:"Close"}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(re.zx,{onClick:r,children:"Cancel"}),(0,I.jsx)(re.zx,{"data-testid":(0,xn.N)("evaluate"),intent:"primary",onClick:function(){k(!0)},children:"Evaluate"})]})}),[r,N]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(te.a7,{children:(0,I.jsx)("div",{style:{minHeight:"300px"},children:P})}),E?(0,I.jsx)(te.cN,{topBorder:!0,children:E}):null]})},lr=(0,h.Ps)(Ot||(Ot=(0,p.Z)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]))),cr=function(e){var n,t,r,i=e.repoAddress,o=e.name,s=e.timestamp,c=e.jobName,u=d.useContext(nr.JB),p=(0,$.Z)(u.timezone,1)[0],h=(0,Ye.D)(dr,d.useMemo((function(){var e=(0,Ue.$)(i);return{variables:{selectorData:(0,Y.Z)((0,Y.Z)({},e),{},{scheduleName:o}),timestamp:s}}}),[o,i,s])),m=(0,$.Z)(h,1)[0],x=d.useState(null),f=(0,$.Z)(x,2),j=f[0],v=f[1];if(d.useEffect((function(){m().then((function(e){v((function(){return e}))}))}),[m]),!j||!j.data)return(0,I.jsx)(a.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,I.jsx)(Be.$,{purpose:"page"})});var S="DryRunInstigationTick"===(null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.scheduleDryRun.__typename)?null===j||void 0===j||null===(t=j.data)||void 0===t?void 0:t.scheduleDryRun.evaluationResult:null,b=null===S||void 0===S||null===(r=S.runRequests)||void 0===r?void 0:r.length,w=null===S||void 0===S?void 0:S.error;return(0,I.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,I.jsx)(a.x,{children:(0,I.jsxs)(pr,{children:[(0,I.jsxs)("div",{children:[(0,I.jsx)(g.pm,{children:"Result"}),(0,I.jsx)(a.x,{flex:{grow:1,alignItems:"center"},children:(0,I.jsx)("div",{children:w?(0,I.jsx)(y.V,{intent:"danger",children:"Failed"}):b?(0,I.jsxs)(y.V,{intent:"success",children:[b," run requests"]}):(0,I.jsx)(y.V,{intent:"warning",children:"Skipped"})})})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)(g.pm,{children:"Tick"}),(0,I.jsx)(a.x,{flex:{grow:1,alignItems:"center"},children:(0,I.jsx)(g.fv,{children:(0,tr.j)({timestamp:{unix:s},locale:or,timezone:p,timeFormat:{showTimezone:!0}})})})]})]})}),function(){var e;return j.data&&S?S.error?(0,I.jsx)(We.T9,{error:S.error}):null!==(e=S.runRequests)&&void 0!==e&&e.length?(0,I.jsx)(rr.k,{runRequests:S.runRequests,repoAddress:i,isJob:!0,jobName:c,name:o}):(0,I.jsxs)("div",{children:[(0,I.jsx)(g.pm,{children:"Skip Reason"}),(0,I.jsx)("div",{children:(null===S||void 0===S?void 0:S.skipReason)||"No skip reason was output"})]}):(0,I.jsx)(l.t,{title:"An unknown error occurred",description:(0,I.jsxs)("span",{children:["File an issue on"," ",(0,I.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})}()]})},dr=(0,h.Ps)(It||(It=(0,p.Z)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"])),L.B,ir.s),ur=wn.ZP.div.withConfig({displayName:"EvaluateScheduleDialog__SelectWrapper",componentId:"sc-m0gaz0-0"})(["button{width:100%;display:flex;justify-content:space-between;}"]),pr=wn.ZP.div.withConfig({displayName:"EvaluateScheduleDialog__Grid",componentId:"sc-m0gaz0-1"})(["display:grid;grid-template-columns:repeat(2,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],ne.w.KeylineGray,g.pm),hr=wn.ZP.div.withConfig({displayName:"EvaluateScheduleDialog__ScheduleDescriptor",componentId:"sc-m0gaz0-2"})(["padding-bottom:2px;"]),mr=t(44719),xr=["Succeeded","Failed","Missing","Pending"],fr=d.memo((function(e){var n=e.repoAddress,t=e.schedule,r=(0,G.Ux)(n),i=t.name,o=t.partitionSet,s=t.pipelineName,a=null===o||void 0===o?void 0:o.name,l=(0,G.E8)(r,s),c=d.useMemo((function(){var e=a?W().stringify({partitionSet:a},{addQueryPrefix:!0}):"";return"/".concat(l?"jobs":"pipelines","/").concat(s,"/partitions").concat(e)}),[a,l,s]),u=(0,P.$U)(n,c),p=(0,mr.t)(jr,{variables:{scheduleSelector:{scheduleName:i,repositoryName:n.name,repositoryLocationName:n.location}}}),h=(0,$.Z)(p,2),m=h[0],x=h[1],f=x.data,j=x.loading,y=d.useCallback((function(){return m()}),[m]);return(0,I.jsxs)(wt.Z,{direction:"column",spacing:4,children:[(0,I.jsx)(se.rU,{to:u,children:a}),function(){if(j)return(0,I.jsx)(g.YS,{style:{color:ne.w.Gray400},children:"Loading\u2026"});if(!f)return(0,I.jsx)(ee.Z,{onClick:y,children:(0,I.jsx)(g.YS,{children:"Show coverage"})});var e=f.scheduleOrError;return"Schedule"===e.__typename?(0,I.jsx)(gr,{schedule:e,partitionURL:u}):(0,I.jsx)(g.YS,{style:{color:ne.w.Red700},children:"Partition set not found!"})}()]})})),gr=function(e){var n=e.schedule,t=e.partitionURL,r=n.partitionSet;if(!r||"PartitionStatuses"!==r.partitionStatusesOrError.__typename)return(0,I.jsx)("span",{style:{color:ne.w.Gray300},children:"None"});var i=r.partitionStatusesOrError.results,o={};return i.forEach((function(e){var n=function(e){switch(e.runStatus){case null:return"Missing";case xe.VOA.SUCCESS:return"Succeeded";case xe.VOA.FAILURE:case xe.VOA.CANCELED:case xe.VOA.CANCELING:return"Failed";case xe.VOA.MANAGED:case xe.VOA.QUEUED:case xe.VOA.NOT_STARTED:case xe.VOA.STARTED:case xe.VOA.STARTING:return"Pending";default:return(0,Nn.UT)(e.runStatus)}}(e);o[n]=[].concat((0,Ge.Z)(o[n]||[]),[e])})),(0,I.jsx)(vt.Jy,{children:(0,I.jsx)("tbody",{children:xr.map((function(e){return e in o?(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{style:{width:"100px"},children:e}),(0,I.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,I.jsx)(se.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:ne.w.Gray900},children:o[e].length}):o[e].length})]},e):null}))})})},jr=(0,h.Ps)(Tt||(Tt=(0,p.Z)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]))),yr=t(65033),vr={showSeconds:!1,showTimezone:!0},Sr=function(e){var n=e.repoAddress,t=e.schedule,r=e.refreshState,i=t.cronSchedule,o=t.executionTimezone,s=t.futureTicks,l=t.name,c=t.partitionSet,u=t.pipelineName,p=(0,lt.m)(),h=(0,G.Ux)(n),m=(0,G.E8)(h,u),x=d.useState("Click to copy"),j=(0,$.Z)(x,2),v=j[0],S=j[1];d.useEffect((function(){var e;return"Copied!"===v&&(e=setTimeout((function(){S("Click to copy")}),2e3)),function(){e&&clearTimeout(e)}}),[v]);var b=t.scheduleState,C=b.status,N=b.id,k=b.ticks,P=k.length>0?k[0]:null,E=C===xe.ynu.RUNNING,A=d.useState(!1),R=(0,$.Z)(A,2),O=R[0],T=R[1];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.m,{title:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,I.jsx)(g.X6,{children:l}),(0,I.jsx)(de.M,{repoAddress:n,schedule:t})]}),tags:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(y.V,{icon:"schedule",children:["Schedule in ",(0,I.jsx)(w.b,{repoAddress:n})]}),s.results[0]&&E?(0,I.jsxs)(y.V,{icon:"timer",children:["Next tick:"," ",(0,I.jsx)(je.v,{timestamp:s.results[0].timestamp,timezone:o,timeFormat:vr})]}):null,(0,I.jsx)(a.x,{flex:{display:"inline-flex"},margin:{top:2},children:(0,I.jsx)(X.u,{content:v,children:(0,I.jsx)(ee.Z,{color:{link:ne.w.Gray400,hover:ne.w.Gray600},onClick:function(){p(N),S("Copied!")},children:(0,I.jsx)(g.fv,{children:"id: ".concat(N.slice(0,8))})})})})]}),right:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,I.jsx)(me.xi,{refreshState:r}),(0,I.jsx)(re.zx,{onClick:function(){T(!0)},children:"Test Schedule"})]})}),(0,I.jsx)(sr,{isOpen:O,onClose:function(){T(!1)},name:t.name,repoAddress:n,jobName:u},O?"1":"0"),(0,I.jsx)(he.fJ,{children:(0,I.jsxs)("tbody",{children:[t.description?(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:"Description"}),(0,I.jsx)("td",{children:t.description})]}):null,(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:"Latest tick"}),(0,I.jsx)("td",{children:P?(0,I.jsxs)(wt.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,I.jsx)(je.v,{timestamp:P.timestamp,timezone:o,timeFormat:vr}),(0,I.jsx)(yt.TW,{tick:P,instigationType:xe._5b.SCHEDULE})]}):"Schedule has never run"})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:m?"Job":"Pipeline"}),(0,I.jsx)("td",{children:(0,I.jsx)(Yt.h,{pipelineName:u,pipelineHrefContext:n,isJob:m})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:"Partition set"}),(0,I.jsx)("td",{children:c?(0,I.jsx)(fr,{schedule:t,repoAddress:n}):"None"})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:"Schedule"}),(0,I.jsx)("td",{children:i?(0,I.jsxs)(wt.Z,{direction:"row",spacing:8,children:[(0,I.jsx)("span",{children:(0,yr.A)(i,o||"UTC")}),(0,I.jsxs)(g.EK,{children:["(",i,")"]})]}):(0,I.jsx)("div",{children:"\u2014"})})]}),o?(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:"Execution timezone"}),(0,I.jsx)("td",{children:o})]}):null]})})]})},br=(0,h.Ps)(Ft||(Ft=(0,p.Z)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"])),vt.ai),wr=t(33654),Cr=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)().scheduleName;(0,b.j)("Schedule: ".concat(t));var r=(0,Y.Z)((0,Y.Z)({},(0,Ue.$)(n)),{},{scheduleName:t}),i=d.useState("ticks"),o=(0,$.Z)(i,2),s=o[0],a=o[1],l=(0,m.a)(kr,{variables:{scheduleSelector:r},notifyOnNetworkStatusChange:!0}),c=(0,me.C4)(l,me.dT),p=(0,I.jsxs)(j.mQ,{selectedTabId:s,onChange:a,children:[(0,I.jsx)(j.OK,{id:"ticks",title:"Tick history"}),(0,I.jsx)(j.OK,{id:"runs",title:"Run history"})]});return(0,I.jsx)(Fe.g,{queryResult:l,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,r=e.instance;if("Schedule"!==t.__typename)return null;var i=!r.daemonHealth.daemonStatus.healthy;return(0,I.jsxs)(x.T,{children:[(0,I.jsx)(Sr,{repoAddress:n,schedule:t,refreshState:c}),i?(0,I.jsx)(wr.K,{daemonHealth:r.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,I.jsx)(Et,{tabs:p,repoAddress:n,name:t.name}):(0,I.jsx)(Nr,{repoAddress:n,schedule:t,tabs:p})]})}})},Nr=function(e){var n=e.schedule,t=e.highlightedIds,r=e.tabs,i=(0,m.a)(Pr,{variables:{limit:20,filter:{pipelineName:n.pipelineName,tags:[{key:le.H.ScheduleName,value:n.name}]}},notifyOnNetworkStatusChange:!0});(0,me.C4)(i,me.dT);var o=i.data;if(!o)return null;if("Runs"!==o.pipelineRunsOrError.__typename)return(0,I.jsx)(l.t,{icon:"error",title:"Query Error",description:o.pipelineRunsOrError.message});var s=null===o||void 0===o?void 0:o.pipelineRunsOrError.results;return(0,I.jsx)(Qt.A,{actionBarComponents:r,runs:s,highlightedIds:t,hideCreatedBy:!0})},kr=(0,h.Ps)(Zt||(Zt=(0,p.Z)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"])),br,L.B,nt.O),Pr=(0,h.Ps)(_t||(_t=(0,p.Z)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"])),Qt.Z),Er=t(45865),Ar=(0,h.Ps)($t||($t=(0,p.Z)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"])),vt.ai),Rr=t(75428),Or=function(e){var n,t=e.sensor,r=e.highlightedIds,i=e.tabs,o=(0,m.a)(Ir,{variables:{limit:20,filter:{pipelineName:1===(null===(n=t.targets)||void 0===n?void 0:n.length)?t.targets[0].pipelineName:void 0,tags:[{key:le.H.SensorName,value:t.name}]}}}).data;if(!o||"Runs"!==o.pipelineRunsOrError.__typename)return null;var s=null===o||void 0===o?void 0:o.pipelineRunsOrError.results;return(0,I.jsx)(Qt.A,{actionBarComponents:i,runs:s,highlightedIds:r,hideCreatedBy:!0})},Ir=(0,h.Ps)(zt||(zt=(0,p.Z)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),Qt.Z),Tr=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,u.UO)().sensorName;(0,b.j)("Sensor: ".concat(t));var r=(0,Y.Z)((0,Y.Z)({},(0,Ue.$)(n)),{},{sensorName:t}),i=d.useState("ticks"),o=(0,$.Z)(i,2),s=o[0],c=o[1],p=(0,m.a)(Fr,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0}),h=(0,me.C4)(p,me.dT),f=(0,I.jsxs)(j.mQ,{selectedTabId:s,onChange:c,children:[(0,I.jsx)(j.OK,{id:"ticks",title:"Tick history"}),(0,I.jsx)(j.OK,{id:"runs",title:"Run history"})]});return(0,I.jsx)(Fe.g,{queryResult:p,allowStaleData:!0,children:function(e){var r=e.sensorOrError,i=e.instance;if("SensorNotFoundError"===r.__typename)return(0,I.jsx)(a.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,I.jsx)(l.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});if("PythonError"===r.__typename)return(0,I.jsx)(We.T9,{error:r});if("Sensor"!==r.__typename)return null;var o=!i.daemonHealth.daemonStatus.healthy;return(0,I.jsxs)(x.T,{children:[(0,I.jsx)(Er.e,{repoAddress:n,sensor:r,daemonHealth:i.daemonHealth.daemonStatus.healthy,refreshState:h}),o?(0,I.jsx)(Rr.F,{daemonHealth:i.daemonHealth,padding:{vertical:16,horizontal:24}}):null,(0,I.jsx)(At,{repoAddress:n,name:r.name}),"ticks"===s?(0,I.jsx)(Et,{tabs:f,repoAddress:n,name:r.name}):(0,I.jsx)(Or,{repoAddress:n,sensor:r,tabs:f})]})}})},Fr=(0,h.Ps)(Dt||(Dt=(0,p.Z)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"])),Ar,L.B,nt.O),Zr=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)(),r=(0,C.p3)(t[0]),i=r.opNames.length>1?r.opNames[r.opNames.length-2]:r.pipelineName;return(0,b.j)("Graph: ".concat(i)),(0,I.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,I.jsx)(f.m,{title:(0,I.jsx)(g.X6,{children:i}),tags:(0,I.jsxs)(y.V,{icon:"schema",children:["Graph in ",(0,I.jsx)(w.b,{repoAddress:n})]})}),(0,I.jsx)(a.x,{border:{side:"top",width:1,color:ne.w.KeylineGray},style:{minHeight:0,flex:1,display:"flex"},children:(0,I.jsx)(_r,{repoAddress:n})})]})},_r=function(e){var n=e.repoAddress,t=(0,u.UO)(),r=(0,C.p3)(t[0]),i=(0,u.k6)(),o=d.useState({explodeComposites:!1,preferAssetRendering:!0}),s=(0,$.Z)(o,2),a=s[0],c=s[1],p=r.opNames.slice(0,r.opNames.length-1),h=(0,m.a)($r,{variables:{graphSelector:{repositoryName:(null===n||void 0===n?void 0:n.name)||"",repositoryLocationName:(null===n||void 0===n?void 0:n.location)||"",graphName:r.pipelineName},rootHandleID:p.join("."),requestScopeHandleID:a.explodeComposites?void 0:p.join(".")}});return(0,I.jsx)(Fe.g,{queryResult:h,children:function(t){var o=t.graphOrError;if("GraphNotFoundError"===o.__typename)return(0,I.jsx)(l.t,{icon:"error",title:"Graph not found",description:o.message});if("PythonError"===o.__typename)return(0,I.jsx)(l.t,{icon:"error",title:"Query Error",description:o.message});var s=o.solidHandle,d=a.explodeComposites?(0,an.i)(o.solidHandles):o.solidHandles;return(0,I.jsx)(ln.m0,{options:a,setOptions:c,explorerPath:r,onChangeExplorerPath:function(n,t){var r=(0,P.$U)(e.repoAddress,"/graphs/".concat((0,C.gY)(n)));"push"===t?i.push(r):i.replace(r)},container:o,repoAddress:n,handles:d,parentHandle:s||void 0,isGraph:!0,getInvocations:function(e){return d.filter((function(n){return n.solid.definition.name===e})).map((function(e){return{handleID:e.handleID}}))}})}})},$r=(0,h.Ps)(Lt||(Lt=(0,p.Z)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),ln.Q,ln.Sm,L.B),zr=t(80923),Dr=t(4227),Lr=t(25626),Ur=t(33418),Gr=t(64960),Hr=t(79962),qr=t(93015),Kr=t(12453),Mr="UNGROUPED",Br=function(e){var n=e.repoAddress,t=e.assets,r=d.useRef(null),i=(0,pe.Uz)(n),o=Qr("".concat(i,"-").concat("assets-virtualized-expansion-state")),s=o.expandedKeys,a=o.onToggle,l=d.useMemo((function(){var e,n={},r=(0,pn.Z)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.groupName||Mr,s=n[o]||[];n[o]=[].concat((0,Ge.Z)(s),[i])}}catch(a){r.e(a)}finally{r.f()}return n}),[t]),c=d.useMemo((function(){var e=[];return Object.entries(l).forEach((function(n){var t=(0,$.Z)(n,2),r=t[0],i=t[1];e.push({type:"group",name:r,assetCount:i.length}),s.includes(r)&&i.forEach((function(n){e.push({type:"asset",id:n.id,definition:n})}))})),e}),[l,s]),u=(0,Lr.useVirtualizer)({count:c.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=c[e];return"group"===(null===n||void 0===n?void 0:n.type)?48:64},overscan:5}),p=u.getTotalSize(),h=u.getVirtualItems();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Kr.XC,{nameLabel:"Asset name"}),(0,I.jsx)("div",{style:{overflow:"hidden"},children:(0,I.jsx)(qr.W2,{ref:r,children:(0,I.jsx)(qr.Nh,{$totalHeight:p,children:h.map((function(e){var t=e.index,r=e.key,i=e.size,o=e.start,l=c[t];return"group"===l.type?(0,I.jsx)(Vr,{repoAddress:n,groupName:l.name,assetCount:l.assetCount,expanded:s.includes(l.name),height:i,start:o,onToggle:a},r):(0,I.jsx)(Kr.pN,{showCheckboxColumn:!1,definition:l.definition,path:l.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:i,start:o,checked:!1,onToggleChecked:function(){},onWipe:function(){}},r)}))})})})]})},Vr=function(e){var n=e.repoAddress,t=e.groupName,r=e.assetCount,i=e.expanded,o=e.height,s=e.start,l=e.onToggle;return(0,I.jsx)(Wr,{$height:o,$start:s,onClick:function(){return l(t)},$open:i,tabIndex:0,onKeyDown:function(e){"Space"!==e.code&&"Enter"!==e.code||(e.preventDefault(),l(t))},children:(0,I.jsxs)(a.x,{background:ne.w.Gray50,flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:{side:"bottom",width:1,color:ne.w.KeylineGray},style:{height:"100%"},children:[(0,I.jsxs)(a.x,{flex:{alignItems:"center",gap:8},children:[(0,I.jsx)(Ve.JO,{name:"asset_group"}),t===Mr?(0,I.jsx)("div",{children:"Ungrouped assets"}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("strong",{children:t}),t!==Mr?(0,I.jsx)(a.x,{margin:{left:12},children:(0,I.jsx)(se.rU,{to:(0,P.$U)(n,"/asset-groups/".concat(t)),children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,I.jsx)("span",{children:"View lineage"}),(0,I.jsx)(Ve.JO,{name:"open_in_new",size:16,color:ne.w.Link})]})})}):null]})]}),(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,I.jsx)(y.V,{children:1===r?"1 asset":"".concat(r," assets")}),(0,I.jsx)(Ve.JO,{name:"arrow_drop_down",size:20})]})]})})},Wr=(0,wn.ZP)(qr.X2).withConfig({displayName:"VirtualizedRepoAssetTable__ClickableRow",componentId:"sc-14n5qz5-0"})(["cursor:pointer;:focus,:active{outline:none;}",'[aria-label="arrow_drop_down"]{transition:transform 100ms linear;',"}"],Ve.a1,(function(e){return e.$open?null:"transform: rotate(-90deg);"})),Jr=function(e){return Array.isArray(e)?e:[]},Qr=function(e){var n=d.useContext(Ur.I).basePath,t=(0,Hr.U)("".concat(n,":dagit.").concat(e),Jr),r=(0,$.Z)(t,2),i=r[0],o=r[1],s=d.useCallback((function(e){o((function(n){var t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)}))}),[o]);return d.useMemo((function(){return{expandedKeys:i,onToggle:s}}),[i,s])},Yr=(0,h.Ps)(Ut||(Ut=(0,p.Z)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"])),Gr.s),Xr=t(66564),ei=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,pe.Uz)(n);(0,b.j)("Assets: ".concat(t));var r=(0,Ue.$)(n),i=(0,ct.q)({queryKey:"search",defaults:{search:""}}),o=(0,$.Z)(i,2),s=o[0],c=o[1],u=(0,m.a)(ni,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=u.data,h=u.loading,x=(0,me.C4)(u,me.dT),f=s.trim().toLocaleLowerCase().length>0,g=d.useMemo((function(){return"Repository"===(null===p||void 0===p?void 0:p.repositoryOrError.__typename)?p.repositoryOrError.assetNodes:[]}),[p]),j=(0,Dr.h)(s,g);return(0,I.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,I.jsx)(Xr.h,{repoAddress:n,tab:"assets",refreshState:x,queryData:u}),(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,I.jsx)(zr.oi,{icon:"search",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Filter by asset name\u2026",style:{width:"340px"}})}),h&&!p?(0,I.jsx)(a.x,{padding:64,children:(0,I.jsx)(Be.$,{purpose:"page"})}):h&&!p?(0,I.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,I.jsx)(Be.$,{purpose:"body-text"}),(0,I.jsx)("div",{style:{color:ne.w.Gray600},children:"Loading assets\u2026"})]})}):j.length?(0,I.jsx)(Br,{repoAddress:n,assets:j}):f?(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No matching assets",description:(0,I.jsxs)("div",{children:["No assets matching ",(0,I.jsx)("strong",{children:s})," were found in ",t]})})}):(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},ni=(0,h.Ps)(Gt||(Gt=(0,p.Z)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Yr,L.B),ti=t(54858),ri=function(e){var n=e.repoAddress,t=e.graphs,r=d.useRef(null),i=(0,Lr.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),o=i.getTotalSize(),s=i.getVirtualItems();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.x,{border:{side:"horizontal",width:1,color:ne.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"100%",height:"32px",fontSize:"12px",color:ne.w.Gray600},children:(0,I.jsx)(qr.qN,{children:"Graph"})}),(0,I.jsx)("div",{style:{overflow:"hidden"},children:(0,I.jsx)(qr.W2,{ref:r,children:(0,I.jsx)(qr.Nh,{$totalHeight:o,children:s.map((function(e){var r=e.index,i=e.key,o=e.size,s=e.start,a=t[r];return(0,I.jsx)(ii,{name:a.name,description:a.description,path:a.path,repoAddress:n,height:o,start:s},i)}))})})})]})},ii=function(e){var n=e.name,t=e.path,r=e.description,i=e.repoAddress,o=e.start,s=e.height,l=(0,mr.t)(si,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,graphName:n}}}),c=(0,$.Z)(l,2),u=c[0],p=c[1];(0,ti.v5)(u);var h=p.data,m=d.useMemo((function(){return r||("Graph"===(null===h||void 0===h?void 0:h.graphOrError.__typename)?h.graphOrError.description:null)}),[h,r]);return(0,I.jsx)(qr.X2,{$height:s,$start:o,children:(0,I.jsx)(oi,{border:{side:"bottom",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(qr.E5,{children:(0,I.jsxs)(a.x,{flex:{direction:"column"},children:[(0,I.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,I.jsx)(se.rU,{to:(0,P.$U)(i,t),children:n})}),m?(0,I.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,I.jsx)(g.YS,{style:{color:ne.w.Gray500,whiteSpace:"nowrap"},children:m})}):null]})})})})},oi=(0,wn.ZP)(a.x).withConfig({displayName:"VirtualizedGraphTable__RowGrid",componentId:"sc-msr1c1-0"})(["display:grid;grid-template-columns:100%;height:100%;"]),si=(0,h.Ps)(Ht||(Ht=(0,p.Z)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]))),ai=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,pe.Uz)(n);(0,b.j)("Graphs: ".concat(t));var r=(0,Ue.$)(n),i=(0,ct.q)({queryKey:"search",defaults:{search:""}}),o=(0,$.Z)(i,2),s=o[0],c=o[1],u=(0,m.a)(li,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=u.data,h=u.loading,x=(0,me.C4)(u,me.dT),f=s.trim().toLocaleLowerCase(),g=f.length>0,j=d.useMemo((function(){var e=null===p||void 0===p?void 0:p.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];var n=new Set(e.pipelines.filter((function(e){return e.isJob&&!(0,ae.pv)(e.name)})).map((function(e){return e.graphName}))),t=Array.from(n).map((function(e){return{name:e,path:"/graphs/".concat(e),description:null}}));return e.usedSolids.forEach((function(e){if("CompositeSolidDefinition"===e.definition.__typename){var n=e.invocations[0];n&&t.push({name:e.definition.name,path:"/graphs/".concat(n.pipeline.name,"/").concat(n.solidHandle.handleID,"/"),description:e.definition.description})}})),t.sort((function(e,n){return e.name.localeCompare(n.name)}))}),[p]),y=d.useMemo((function(){var e=f.toLocaleLowerCase();return j.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}),[j,f]);return(0,I.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,I.jsx)(Xr.h,{repoAddress:n,tab:"graphs",refreshState:x,queryData:u}),(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,I.jsx)(zr.oi,{icon:"search",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Filter by graph name\u2026",style:{width:"340px"}})}),h&&!p?(0,I.jsx)(a.x,{padding:64,children:(0,I.jsx)(Be.$,{purpose:"page"})}):h&&!p?(0,I.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,I.jsx)(Be.$,{purpose:"body-text"}),(0,I.jsx)("div",{style:{color:ne.w.Gray600},children:"Loading graphs\u2026"})]})}):y.length?(0,I.jsx)(ri,{repoAddress:n,graphs:y}):g?(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No matching graphs",description:(0,I.jsxs)("div",{children:["No graphs matching ",(0,I.jsx)("strong",{children:s})," were found in ",t]})})}):(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},li=(0,h.Ps)(qt||(qt=(0,p.Z)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),L.B),ci=t(53209),di=function(e){var n=e.repoAddress,t=e.jobs,r=d.useRef(null),i=(0,Lr.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),o=i.getTotalSize(),s=i.getVirtualItems();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ci.I,{}),(0,I.jsx)("div",{style:{overflow:"hidden"},children:(0,I.jsx)(qr.W2,{ref:r,children:(0,I.jsx)(qr.Nh,{$totalHeight:o,children:s.map((function(e){var r=e.index,i=e.key,o=e.size,s=e.start,a=t[r];return(0,I.jsx)(ci.b,{name:a.name,isJob:a.isJob,repoAddress:n,height:o,start:s},i)}))})})})]})},ui=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,pe.Uz)(n);(0,b.j)("Jobs: ".concat(t));var r=(0,Ue.$)(n),i=(0,ct.q)({queryKey:"search",defaults:{search:""}}),o=(0,$.Z)(i,2),s=o[0],c=o[1],u=(0,m.a)(pi,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=u.data,h=u.loading,x=(0,me.C4)(u,me.dT),f=s.trim().toLocaleLowerCase(),g=f.length>0,j=d.useMemo((function(){return"Repository"===(null===p||void 0===p?void 0:p.repositoryOrError.__typename)?p.repositoryOrError.pipelines:[]}),[p]),y=d.useMemo((function(){var e=f.toLocaleLowerCase();return j.filter((function(n){var t=n.name;return!(0,ae.pv)(t)&&t.toLocaleLowerCase().includes(e)}))}),[j,f]);return(0,I.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,I.jsx)(Xr.h,{repoAddress:n,tab:"jobs",refreshState:x,queryData:u}),(0,I.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,I.jsx)(zr.oi,{icon:"search",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})}),h&&!p?(0,I.jsx)(a.x,{padding:64,children:(0,I.jsx)(Be.$,{purpose:"page"})}):h&&!p?(0,I.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,I.jsx)(Be.$,{purpose:"body-text"}),(0,I.jsx)("div",{style:{color:ne.w.Gray600},children:"Loading jobs\u2026"})]})}):y.length?(0,I.jsx)(di,{repoAddress:n,jobs:y}):g?(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No matching jobs",description:(0,I.jsxs)("div",{children:["No jobs matching ",(0,I.jsx)("strong",{children:s})," were found in ",t]})})}):(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(t)})})]})},pi=(0,h.Ps)(Kt||(Kt=(0,p.Z)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),L.B),hi=t(29845),mi=t(84464),xi=t(97514),fi=t(68109),gi=t(83787),ji=t(21916),yi=function(e){var n=e.definition,t=n.name,r=n.inputDefinitions,i=n.outputDefinitions,o=(0,ji.og)({name:t,inputs:r.map((function(e){return{definition:e,dependsOn:[]}})),outputs:i.map((function(e){return{definition:e,dependedBy:[]}})),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,I.jsx)(a.x,{padding:24,children:(0,I.jsx)(Si,{style:{height:o.bounds.height},children:(0,I.jsx)(gi.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:o,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},vi=(0,h.Ps)(Mt||(Mt=(0,p.Z)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"])),gi.WH),Si=wn.ZP.div.withConfig({displayName:"OpCard__OpCardContainer",componentId:"sc-yeb4tc-0"})(["flex:1;max-width:450px;position:relative;"]),bi=function(e){var n=e.name,t=e.onClickInvocation,r=e.repoAddress,i=(0,Ue.$)(r),o=(0,m.a)(wi,{variables:{name:n,repositorySelector:i}});return(0,I.jsx)(Fe.g,{queryResult:o,children:function(e){var n=e.repositoryOrError;if("Repository"!==(null===n||void 0===n?void 0:n.__typename)||!n.usedSolid)return null;var r=n.usedSolid;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(yi,{definition:r.definition}),(0,I.jsx)(fi.I,{definition:r.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:function(){return r.invocations.map((function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}}))}})]})}})},wi=(0,h.Ps)(Bt||(Bt=(0,p.Z)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),vi,fi.u),Ci=wn.ZP.div.withConfig({displayName:"OpDetailsRoot__OpDetailScrollContainer",componentId:"sc-1p6pya6-0"})(["overflow:scroll;flex:1;"]),Ni=t(58606),ki=xi.qj,Pi=xi.Z8,Ei=xi.aV;function Ai(e){var n,t={},r=(0,pn.Z)(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,s=(0,pn.Z)(o);try{for(s.s();!(i=s.n()).done;){t[i.value]=!0}}catch(a){s.e(a)}finally{s.f()}}}catch(a){r.e(a)}finally{r.f()}return Object.keys(t).sort((function(e,n){return e.localeCompare(n)}))}var Ri,Oi,Ii=function(e){(0,v.Px)(),(0,b.j)("Ops");var n=(0,u.UO)().name,t=e.repoAddress,r=(0,Ue.$)(t),i=(0,m.a)(_i,{variables:{repositorySelector:r}});return(0,I.jsx)("div",{style:{height:"100%"},children:(0,I.jsx)(Fe.g,{queryResult:i,children:function(r){var i=r.repositoryOrError;return"Repository"===(null===i||void 0===i?void 0:i.__typename)&&i.usedSolids?(0,I.jsx)(Ti,(0,Y.Z)((0,Y.Z)({},e),{},{name:n,repoAddress:t,usedSolids:i.usedSolids})):null}})})},Ti=function(e){var n,t=e.name,r=e.repoAddress,i=e.usedSolids,o=(0,u.k6)(),s=(0,u.TH)(),c=W().parse(s.search,{ignoreQueryPrefix:!0}),p=c.q,h=c.typeExplorer,m=(n=i,[{token:"name",values:function(){return n.map((function(e){return e.definition.name}))}},{token:"job",values:function(){return Ai(n.map((function(e){return e.invocations.filter((function(e){return!e.pipeline.isJob})).map((function(e){return e.pipeline.name}))})))}},{token:"pipeline",values:function(){return Ai(n.map((function(e){return e.invocations.filter((function(e){return e.pipeline.isJob})).map((function(e){return e.pipeline.name}))})))}},{token:"input",values:function(){return Ai(n.map((function(e){return e.definition.inputDefinitions.map((function(e){return e.type.displayName}))})))}},{token:"output",values:function(){return Ai(n.map((function(e){return e.definition.outputDefinitions.map((function(e){return e.type.displayName}))})))}}]),x=(0,hi.HE)(p||"",m),f=function(e,n){return e.filter((function(e){var t,r=(0,pn.Z)(n);try{var i=function(){var n=t.value;return("name"!==n.token&&void 0!==n.token||e.definition.name.startsWith(n.value))&&("pipeline"!==n.token&&"job"!==n.token||e.invocations.some((function(e){return e.pipeline.name===n.value})))&&("input"!==n.token||e.definition.inputDefinitions.some((function(e){return e.type.displayName.startsWith(n.value)})))&&("output"!==n.token||e.definition.outputDefinitions.some((function(e){return e.type.displayName.startsWith(n.value)})))?void 0:{v:!1}};for(r.s();!(t=r.n()).done;){var o=i();if("object"===typeof o)return o.v}}catch(s){r.e(s)}finally{r.f()}return!0}))}(i,x),g=i.find((function(e){return e.definition.name===t})),j=function(e){o.replace({search:"?".concat(W().stringify({q:(0,hi.jP)(e)}))})},y=function(e){o.replace((0,P.$U)(r,"/ops/".concat(e,"?").concat(W().stringify({q:p}))))};d.useEffect((function(){1!==f.length||g&&f[0]===g||y(f[0].definition.name),"string"===typeof h&&j([].concat((0,Ge.Z)(x),[{token:"input",value:h}]))}));var v=d.useCallback((function(e){var n=e.pipelineName,t=e.handleID;o.push((0,P.$U)(r,"/pipeline_or_job/".concat(n,"/").concat(t.split(".").join("/"))))}),[o,r]);return(0,I.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,I.jsx)(mi.OS,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,I.jsxs)(Di,{children:[(0,I.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:{side:"bottom",width:1,color:ne.w.KeylineGray},children:(0,I.jsx)(hi.Gf,{values:x,onChange:function(e){return j(e)},suggestionProviders:m,placeholder:"Filter by name or input/output type..."})}),(0,I.jsx)("div",{style:{flex:1},children:(0,I.jsx)(ki,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,t=e.width;return(0,I.jsx)(Fi,{height:n,width:t,selected:g,onClickOp:y,items:f.sort((function(e,n){return e.definition.name.localeCompare(n.definition.name)}))})}})})]}),second:g?(0,I.jsx)(Ci,{children:(0,I.jsx)(bi,{name:g.definition.name,onClickInvocation:v,repoAddress:r})}):(0,I.jsx)(a.x,{padding:{vertical:64},children:(0,I.jsx)(l.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},Fi=function(e){var n=e.items,t=e.selected,r=d.useRef(new xi.t1({defaultHeight:60,fixedWidth:!0})),i=d.useRef(e.width);e.width!==i.current&&(r.current.clearAll(),i.current=e.width);var o=t?n.findIndex((function(e){return e===t})):void 0;return(0,I.jsx)(Zi,{children:(0,I.jsx)(Ei,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:r.current.rowHeight,scrollToIndex:o,className:"solids-list",rowRenderer:function(n){var t=n.parent,i=n.index,o=n.key,s=n.style,a=e.items[i];return(0,I.jsx)(Pi,{cache:r.current,index:i,parent:t,children:(0,I.jsxs)($i,{style:s,selected:a===e.selected,onClick:function(){return e.onClickOp(a.definition.name)},children:[(0,I.jsx)(zi,{children:a.definition.name}),(0,I.jsx)(Ni.z,{definition:a.definition})]})},o)},overscanRowCount:10})})},Zi=wn.ZP.div.withConfig({displayName:"OpsRoot__Container",componentId:"sc-1mzv72b-0"})([".solids-list:focus{outline:none;}"]),_i=(0,h.Ps)(Vt||(Vt=(0,p.Z)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"])),Ni.C),$i=wn.ZP.div.withConfig({displayName:"OpsRoot__OpListItem",componentId:"sc-1mzv72b-1"})(["background:",";box-shadow:"," 4px 0 0 inset,"," 0 -1px 0 inset;color:",";cursor:pointer;font-size:14px;display:flex;flex-direction:column;padding:12px 24px;user-select:none;& > code.bp4-code{color:",";background:transparent;font-family:",";padding:5px 0 0 0;}"],(function(e){return e.selected?ne.w.Gray100:ne.w.White}),(function(e){return e.selected?ne.w.HighlightGreen:"transparent"}),ne.w.KeylineGray,ne.w.Gray800,ne.w.Gray800,rt.b.monospace),zi=wn.ZP.div.withConfig({displayName:"OpsRoot__OpName",componentId:"sc-1mzv72b-2"})(["flex:1;font-weight:600;"]),Di=wn.ZP.div.withConfig({displayName:"OpsRoot__OpListColumnContainer",componentId:"sc-1mzv72b-3"})(["display:flex;flex-direction:column;height:100%;"]),Li=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,pe.Uz)(n);return(0,b.j)("Ops: ".concat(t)),(0,I.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,I.jsx)(Xr.h,{repoAddress:n,tab:"ops"}),(0,I.jsx)(Ii,{repoAddress:n})]})},Ui=t(97734),Gi=t(65606),Hi=t(99786),qi=t(18786),Ki=t(81815),Mi=t(37200),Bi=t(67035),Vi=t(75763),Wi=t(159),Ji=function(e){var n=e.repoAddress,t=e.schedules,r=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,s=d.useRef(null),a=(0,Lr.useVirtualizer)({count:t.length,getScrollElement:function(){return s.current},estimateSize:function(){return 64},overscan:10}),l=a.getTotalSize(),c=a.getVirtualItems();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Wi.o,{checkbox:r}),(0,I.jsx)("div",{style:{overflow:"hidden"},children:(0,I.jsx)(qr.W2,{ref:s,children:(0,I.jsx)(qr.Nh,{$totalHeight:l,children:c.map((function(e){var s=e.index,a=e.key,l=e.size,c=e.start,d=t[s],u=(0,Ki.g)(n,d.name);return(0,I.jsx)(Wi.i,{name:d.name,repoAddress:n,scheduleState:d.scheduleState,checked:i.has(u),showCheckboxColumn:!!r,onToggleChecked:o(u),height:l,start:c},a)}))})})})]})},Qi=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,pe.Uz)(n);(0,b.j)("Schedules: ".concat(t));var r=(0,Ue.$)(n),i=(0,ct.q)({queryKey:"search",defaults:{search:""}}),o=(0,$.Z)(i,2),s=o[0],c=o[1],u=(0,Vi.g)(),p=d.useMemo((function(){return[u]}),[u]),h=(0,Bi.m)({filters:p}),x=h.button,f=h.activeFiltersJsx,g=(0,m.a)(Yi,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,y=g.loading,S=(0,me.C4)(g,me.dT),w=s.trim().toLocaleLowerCase(),C=w.length>0,N=d.useMemo((function(){return"Repository"===(null===j||void 0===j?void 0:j.repositoryOrError.__typename)?j.repositoryOrError.schedules:[]}),[j]),k=u.state,P=d.useMemo((function(){return k.size?N.filter((function(e){var n=e.scheduleState;return k.has(n.status)})):N}),[N,k]),E=d.useMemo((function(){var e=w.toLocaleLowerCase();return P.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}),[P,w]),A=E.length>0,R=d.useMemo((function(){return E.filter((function(e){var n=e.scheduleState;return(0,Gi.i)(n)}))}),[E]),O=d.useMemo((function(){return R.map((function(e){var t=e.name;return(0,Ki.g)(n,t)}))}),[R,n]),T=(0,Ui.a)(O),F=(0,$.Z)(T,2),Z=F[0].checkedIds,_=F[1],z=_.onToggleFactory,D=_.onToggleAll,L=d.useMemo((function(){return R.filter((function(e){var t=e.name;return Z.has((0,Ki.g)(n,t))})).map((function(e){var t=e.name,r=e.scheduleState;return{repoAddress:n,scheduleName:t,scheduleState:r}}))}),[R,Z,n]),U=O.length,G=Z.size,H=O.length>0;return(0,I.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,I.jsx)(Xr.h,{repoAddress:n,tab:"schedules",refreshState:S,queryData:g}),(0,I.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,I.jsxs)(a.x,{flex:{direction:"row",gap:12},children:[x,(0,I.jsx)(zr.oi,{icon:"search",value:s,onChange:function(e){c(e.target.value),D(!1)},placeholder:"Filter by schedule name\u2026",style:{width:"340px"}})]}),(0,I.jsx)(X.u,{content:"You do not have permission to start or stop these schedules",canShow:A&&!H,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,I.jsx)(qi._,{schedules:L,onDone:function(){return S.refetch()}})})]}),f.length?(0,I.jsx)(a.x,{padding:{vertical:8,horizontal:24},border:{side:"horizontal",width:1,color:ne.w.KeylineGray},flex:{direction:"row",gap:8},children:f}):null,y&&!j?(0,I.jsx)(a.x,{padding:64,children:(0,I.jsx)(Be.$,{purpose:"page"})}):y&&!j?(0,I.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,I.jsx)(Be.$,{purpose:"body-text"}),(0,I.jsx)("div",{style:{color:ne.w.Gray600},children:"Loading schedules\u2026"})]})}):E.length?(0,I.jsx)(Ji,{repoAddress:n,schedules:E,headerCheckbox:H?(0,I.jsx)(Mi.W,{checkedCount:G,totalCount:U,onToggleAll:D}):void 0,checkedKeys:Z,onToggleCheckFactory:z}):C?(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No matching schedules",description:(0,I.jsxs)("div",{children:["No schedules matching ",(0,I.jsx)("strong",{children:s})," were found in ",t]})})}):(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(t)})})]})},Yi=(0,h.Ps)(Ri||(Ri=(0,p.Z)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Hi.i,L.B),Xi=t(20460),eo=t(93548),no=t(4116),to=function(e){var n=e.repoAddress,t=e.sensors,r=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,s=d.useRef(null),a=(0,Lr.useVirtualizer)({count:t.length,getScrollElement:function(){return s.current},estimateSize:function(){return 64},overscan:10}),l=a.getTotalSize(),c=a.getVirtualItems();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(no.K,{checkbox:r}),(0,I.jsx)("div",{style:{overflow:"hidden"},children:(0,I.jsx)(qr.W2,{ref:s,children:(0,I.jsx)(qr.Nh,{$totalHeight:l,children:c.map((function(e){var s=e.index,a=e.key,l=e.size,c=e.start,d=t[s],u=(0,eo.x)(n,d.name);return(0,I.jsx)(no.R,{name:d.name,repoAddress:n,sensorState:d.sensorState,checked:i.has(u),showCheckboxColumn:!!r,onToggleChecked:o(u),height:l,start:c},a)}))})})})]})},ro=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,pe.Uz)(n);(0,b.j)("Sensors: ".concat(t));var r=(0,Ue.$)(n),i=(0,ct.q)({queryKey:"search",defaults:{search:""}}),o=(0,$.Z)(i,2),s=o[0],c=o[1],u=(0,Vi.g)(),p=d.useMemo((function(){return[u]}),[u]),h=(0,Bi.m)({filters:p}),x=h.button,f=h.activeFiltersJsx,g=(0,m.a)(io,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,y=g.loading,S=(0,me.C4)(g,me.dT),w=s.trim().toLocaleLowerCase(),C=w.length>0,N=d.useMemo((function(){return"Repository"===(null===j||void 0===j?void 0:j.repositoryOrError.__typename)?j.repositoryOrError.sensors:[]}),[j]),k=u.state,P=d.useMemo((function(){return k.size?N.filter((function(e){var n=e.sensorState;return k.has(n.status)})):N}),[N,k]),E=d.useMemo((function(){var e=w.toLocaleLowerCase();return P.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}),[P,w]),A=E.length>0,R=d.useMemo((function(){return E.filter((function(e){var n=e.sensorState;return(0,Gi.i)(n)}))}),[E]),O=d.useMemo((function(){return R.map((function(e){var t=e.name;return(0,eo.x)(n,t)}))}),[R,n]),T=(0,Ui.a)(O),F=(0,$.Z)(T,2),Z=F[0].checkedIds,_=F[1],z=_.onToggleFactory,D=_.onToggleAll,L=d.useMemo((function(){return R.filter((function(e){var t=e.name;return Z.has((0,eo.x)(n,t))})).map((function(e){var t=e.name,r=e.sensorState;return{repoAddress:n,sensorName:t,sensorState:r}}))}),[R,Z,n]),U=O.length,G=Z.size,H=O.length>0;return(0,I.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,I.jsx)(Xr.h,{repoAddress:n,tab:"sensors",refreshState:S,queryData:g}),(0,I.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,I.jsxs)(a.x,{flex:{direction:"row",gap:12},children:[x,(0,I.jsx)(zr.oi,{icon:"search",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Filter by sensor name\u2026",style:{width:"340px"}})]}),(0,I.jsx)(X.u,{content:"You do not have permission to start or stop these sensors",canShow:A&&!H,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,I.jsx)(Xi.b,{sensors:L,onDone:function(){return S.refetch()}})})]}),f.length?(0,I.jsx)(a.x,{padding:{vertical:8,horizontal:24},border:{side:"horizontal",width:1,color:ne.w.KeylineGray},flex:{direction:"row",gap:8},children:f}):null,y&&!j?(0,I.jsx)(a.x,{padding:64,children:(0,I.jsx)(Be.$,{purpose:"page"})}):y&&!j?(0,I.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,I.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,I.jsx)(Be.$,{purpose:"body-text"}),(0,I.jsx)("div",{style:{color:ne.w.Gray600},children:"Loading sensors\u2026"})]})}):E.length?(0,I.jsx)(to,{repoAddress:n,sensors:E,headerCheckbox:H?(0,I.jsx)(Mi.W,{checkedCount:G,totalCount:U,onToggleAll:D}):void 0,checkedKeys:Z,onToggleCheckFactory:z}):C?(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No matching sensors",description:(0,I.jsxs)("div",{children:["No sensors matching ",(0,I.jsx)("strong",{children:s})," were found in ",t]})})}):(0,I.jsx)(a.x,{padding:{top:20},children:(0,I.jsx)(l.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(t)})})]})},io=(0,h.Ps)(Oi||(Oi=(0,p.Z)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Hi.i,L.B),oo=t(98599),so=function(){var e=(0,u.UO)().repoPath,n=d.useContext(G.C5),t=(0,oo.g)(e);return t?n.loading?(0,I.jsx)("div",{}):n.allRepos.find((function(e){return e.repository.name===t.name&&e.repositoryLocation.name===t.location}))?(0,I.jsxs)(u.rs,{children:[(0,I.jsx)(u.AW,{path:"/locations/:repoPath/resources",exact:!0,children:(0,I.jsx)(et.g,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/assets",exact:!0,children:(0,I.jsx)(ei,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,I.jsx)(ui,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,I.jsx)(Qi,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,I.jsx)(ro,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,I.jsx)(ai,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,I.jsx)(Li,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,I.jsx)(Zr,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,I.jsx)(Yn,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,I.jsx)(Cr,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,I.jsx)(Tr,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/resources/:resourceName",children:(0,I.jsx)(Xn.r,{repoAddress:t})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,I.jsx)(T,{repoAddress:t,tab:"list"})}),(0,I.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,I.jsx)(T,{repoAddress:t,tab:"lineage"})}),(0,I.jsx)(u.AW,{path:"/locations/:repoPath/*",children:(0,I.jsx)(u.l_,{to:(0,P.$U)(t,"/assets")})})]}):(0,I.jsx)(a.x,{padding:{vertical:64},children:(0,I.jsx)(l.t,{icon:"error",title:"Unknown code location",description:(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:(0,I.jsx)("strong",{children:(0,pe.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,I.jsx)(a.x,{padding:{vertical:64},children:(0,I.jsx)(l.t,{icon:"error",title:"Invalid code location path",description:(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:(0,I.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},ao=function(){return(0,I.jsx)(c.M,{children:(0,I.jsx)(u.rs,{children:(0,I.jsx)(u.AW,{path:"/locations/:repoPath",children:(0,I.jsx)(so,{})})})})},lo=ao}}]);
//# sourceMappingURL=741.0b09ef1f.chunk.js.map
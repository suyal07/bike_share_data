(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[921],{74492:function(e,n,t){"use strict";t.d(n,{m:function(){return v}});var r=t(96234),i=t(3077),o=t(47515),u=t(32667),s=t(67888),a=t(45519),c=t(95714),l=t(92555),d=t(61623),f=t(78193),p=t(97412),h=t(20822),x=t(85514),m=t(35936),v=f.memo((function(e){var n=e.assetKeys,t=e.useTags,v=e.modalTitle,g=void 0===v?"Assets in Run":v,y=f.useState(!1),j=(0,r.Z)(y,2),w=j[0],S=j[1];if(!n||!n.length)return null;var b=n.length,I=b<=3?n:[],T=b-I.length,k=T>0?(0,m.jsxs)(i.Vq,{title:g,onClose:function(){return S(!1)},style:{minWidth:"400px",maxWidth:"80vw",maxHeight:"70vh"},isOpen:w,children:[w?(0,m.jsx)(o.x,{padding:{bottom:12},border:{side:"bottom",color:u.w.KeylineGray,width:1},style:{overflowY:"auto"},background:u.w.White,children:(0,m.jsxs)(s.i,{children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:(0,m.jsx)("th",{children:"Asset key"})})}),(0,m.jsx)("tbody",{children:n.map((function(e,n){return(0,m.jsx)("tr",{children:(0,m.jsx)("td",{children:(0,m.jsx)(p.rU,{to:(0,x.p)(e),children:(0,h.ll)(e)},(0,h.Je)(e))})},"".concat((0,h.Je)(e),"-").concat(n))}))})]})}):null,(0,m.jsx)(i.cN,{children:(0,m.jsx)(a.zx,{intent:"primary",autoFocus:!0,onClick:function(){return S(!1)},children:"OK"})})]}):void 0;return t?(0,m.jsxs)(m.Fragment,{children:[I.map((function(e,n){return(0,m.jsx)(p.rU,{to:(0,x.p)(e),children:(0,m.jsx)(c.V,{intent:"none",interactive:!0,icon:"asset",children:(0,h.ll)(e)})},"".concat((0,h.Je)(e),"-").concat(n))})),T>0&&(0,m.jsx)(l.Z,{onClick:function(){return S(!0)},children:(0,m.jsxs)(c.V,{intent:"none",icon:"asset",children:[T," assets"]})}),k]}):(0,m.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,m.jsx)(d.JO,{color:u.w.Gray400,name:"asset",size:16,style:{marginTop:2}}),(0,m.jsxs)(o.x,{style:{flex:1},flex:{wrap:"wrap",display:"inline-flex"},children:[I.map((function(e,n){return(0,m.jsx)(p.rU,{to:(0,x.p)(e),style:{marginRight:4},children:"".concat((0,h.ll)(e)).concat(n<I.length-1?",":"")},(0,h.Je)(e))})),T>0&&I.length>0?(0,m.jsx)(l.Z,{onClick:function(){return S(!0)},children:" + ".concat(T," more")}):T>0?(0,m.jsx)(l.Z,{onClick:function(){return S(!0)},children:"".concat(T," assets")}):void 0]}),k]})}))},82193:function(e,n,t){"use strict";t.r(n),t.d(n,{RunRoot:function(){return oe},default:function(){return ue}});var r,i=t(71171),o=t(90239),u=t(31623),s=t(47515),a=t(20356),c=t(83473),l=t(57103),d=t(95714),f=t(73070),p=t(67445),h=t(78193),x=t(50032),m=t(88949),v=t(74894),g=t(20822),y=t(67099),j=t(24265),w=t(46856),S=t(92761),b=t(66708),I=t(80500),T=t(74492),k=t(68079),F=t(33028),A=t(96234),O=t(60319),R=t(17868),E=t(84464),K=t(80005),C=t(62709),Z=t(92014),N=t(99641),L=t(92764),_=t(23555),V=t(46860),q=t(75418),U=t(68365),J=t(33657),z=t(26390),Q=t(20317),D=t(90039),P=t(86252),W=t(70037),M=t(90986),G=t(41084),B=t(75731),H=t(50466),X=t(35936),$=function(e){var n,t=e.run,r=e.runId,i=(0,H.Bz)(),o=(0,A.Z)(i,2),u=o[0],s=o[1],a=(0,V.q)({queryKey:"selection",defaults:{selection:""}}),c=(0,A.Z)(a,2),l=c[0],d=c[1];n=t?function(e){switch(e){case _.VOA.FAILURE:return"/favicon-run-failed.svg";case _.VOA.SUCCESS:return"/favicon-run-success.svg";case _.VOA.STARTING:case _.VOA.STARTED:case _.VOA.CANCELING:return"/favicon-run-pending.svg";default:return"/favicon.svg"}}(t.status):"/favicon.svg",h.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,y.j)(t?"".concat((0,g.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var f=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,K._)({body:(0,X.jsx)(Z.T9,{error:t})})},p=function(e){d(e),s((0,F.Z)((0,F.Z)({},u),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,X.jsx)(W.A.Provider,{value:t,children:(0,X.jsx)(z.C,{runId:r,children:function(e){return(0,X.jsx)(M.jp,{logs:e,children:function(n){return(0,X.jsx)(Y,{run:t,runId:r,logs:e,logsFilter:u,metadata:n,selectionQuery:l,onSetLogsFilter:s,onSetSelectionQuery:p,onShowStateDetails:f})}})}},r)})},Y=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,u=e.selectionQuery,a=e.onSetLogsFilter,c=e.onSetSelectionQuery,l=(0,B.W)(n),d=h.createRef(),f=(0,V.q)({queryKey:"logType",defaults:{logType:"structured"}}),x=(0,A.Z)(f,2),m=x[0],v=x[1],g=function(e){switch(e){case"stdout":return D.hi.stdout;case"stderr":return D.hi.stderr;default:return D.hi.structured}}(m),y=h.useState(null),j=(0,A.Z)(y,2),w=j[0],S=j[1],b=JSON.stringify(Object.keys(o.steps).sort()),I=h.useMemo((function(){return JSON.parse(b)}),[b]),T=(null===n||void 0===n?void 0:n.executionPlan)&&(0,L.J)(null===n||void 0===n?void 0:n.executionPlan,o.steps),F=h.useMemo((function(){return T&&u&&"*"!==u?(0,C.V)(T,u).all.map((function(e){return e.name})):[]}),[T,u]),O=(0,q.a)(),K=(0,G.r)({stepKeys:I,selectionStepKeys:F,metadata:o}),Z=K.logCaptureInfo,_=K.computeLogFileKey,z=K.setComputeLogFileKey,W=T?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,k.Z)(e),(0,k.Z)((0,C.V)(T,n.value).all.map((function(e){return e.name}))))}),[]):[],M=function(e,n){var t,r=F.indexOf(e),i='"'.concat(e,'"');if(n.shiftKey)t=(0,k.Z)(F.map((function(e){return u.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(i);else if(1===F.length&&-1!==r)t=[];else{t=[i];var s=(0,G.c)(o.logCaptureSteps,e);s&&z(s)}c(t.join(", ")||"*")};return(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(E.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,X.jsx)(N.Fu,{run:n}):n.executionPlan&&T?(0,X.jsx)(R.S,{region:"gantt chart",children:(0,X.jsx)(N.hj,{options:{mode:N.hS.WATERFALL_TIMED},toolbarActions:(0,X.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,X.jsx)(E.jo,{axis:"vertical",container:d}),(0,X.jsx)(P.NX,{run:n,onLaunch:l,graph:T,metadata:e,selection:{query:u,keys:F}})]}),runId:t,graph:T,metadata:e,selection:{query:u,keys:F},onClickStep:M,onSetSelection:c,focusedTime:i.focusedTime})}):(0,X.jsx)(p.t,{icon:"error",title:"Unable to build execution plan"}):(0,X.jsx)(N.ZW,{runId:t})}(o),second:(0,X.jsx)(R.S,{region:"logs",children:(0,X.jsxs)(ee,{children:[(0,X.jsx)(D.KZ,{logType:g,onSetLogType:function(e){return v(D.hi[e])},filter:i,onSetFilter:a,steps:I,metadata:o,computeLogFileKey:_,onSetComputeLogKey:z,computeLogUrl:w,counts:r.counts}),g!==D.hi.structured?O?(0,X.jsx)(U.h,{logKey:_?[t,"compute_logs",_]:[],logCaptureInfo:Z,visibleIOType:D.hi[g],onSetDownloadUrl:S}):(0,X.jsx)(J.K,{runId:t,computeLogFileKey:I.length?_:void 0,ioType:D.hi[g],setComputeLogUrl:S}):(0,X.jsx)(Q.S,{logs:r,filter:i,filterStepKeys:W,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})})},ee=O.ZP.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1l2e0ac-0"})(["display:flex;flex-direction:column;height:100%;"]),ne=t(24138),te=t(42236),re=t(25465),ie=t(89622),oe=function(){(0,v.Px)();var e=(0,x.UO)().runId;(0,y.j)(e?"Run ".concat(e.slice(0,8)):"Run");var n=(0,o.a)(ae,{variables:{runId:e}}),t=n.data,r=n.loading,i="Run"===(null===t||void 0===t?void 0:t.pipelineRunOrError.__typename)?t.pipelineRunOrError:null,u=null===i||void 0===i?void 0:i.pipelineSnapshotId,p=(0,I.n)(i),k=null!==p&&void 0!==p&&p.match?(0,b.kQ)(p.match.repository.name,p.match.repositoryLocation.name):null,F=h.useMemo((function(){return!!(i&&p&&(0,S.E8)(p.match,i.pipelineName))}),[i,p]);return(0,X.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,X.jsx)(s.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,X.jsx)(a.m,{title:(0,X.jsx)(c.X6,{style:{fontFamily:l.b.monospace,fontSize:"20px"},children:e.slice(0,8)}),tags:i?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(re.KG,{status:i.status}),(0,g.pv)(i.pipelineName)?(0,X.jsx)(T.m,{assetKeys:(0,ie.Bo)(i),useTags:!0}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(d.V,{icon:"run",children:["Run of"," ",(0,X.jsx)(j.h,{pipelineName:null===i||void 0===i?void 0:i.pipelineName,pipelineHrefContext:k||"repo-unknown",snapshotId:u,size:"small",isJob:F})]}),(0,X.jsx)(T.m,{assetKeys:i.assets.map((function(e){return e.key})),useTags:!0})]}),(0,X.jsxs)(s.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==i&&void 0!==i&&i.startTime?(0,X.jsx)(f.J,{interactionKind:"hover",placement:"bottom",content:(0,X.jsx)(s.x,{padding:16,children:(0,X.jsx)(ne.lc,{run:i,loading:r})}),children:(0,X.jsx)(d.V,{icon:"schedule",children:(0,X.jsx)(w.v,{timestamp:i.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):i.updateTime?(0,X.jsx)(d.V,{icon:"schedule",children:(0,X.jsx)(w.v,{timestamp:i.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==i&&void 0!==i&&i.startTime&&null!==i&&void 0!==i&&i.endTime?(0,X.jsx)(f.J,{interactionKind:"hover",placement:"bottom",content:(0,X.jsx)(s.x,{padding:16,children:(0,X.jsx)(ne.lc,{run:i,loading:r})}),children:(0,X.jsx)(d.V,{icon:"timer",children:(0,X.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==i&&void 0!==i&&i.startTime?(0,m.fv)((1e3*(null===i||void 0===i?void 0:i.endTime)||Date.now())-1e3*(null===i||void 0===i?void 0:i.startTime)):"\u2013"})})}):null]})]}):null,right:i?(0,X.jsx)(ne.Up,{run:i,isJob:F}):null})}),(0,X.jsx)(se,{data:t,runId:e})]})},ue=oe,se=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,X.jsx)(s.x,{padding:{vertical:64},children:(0,X.jsx)(p.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,X.jsx)($,{run:n.pipelineRunOrError,runId:t}):(0,X.jsx)($,{run:void 0,runId:t})},ae=(0,u.Ps)(r||(r=(0,i.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ","\n"])),te.tQ)},75731:function(e,n,t){"use strict";t.d(n,{W:function(){return f}});var r=t(32723),i=t(34795),o=t(96234),u=t(15541),s=t(78193),a=t(50032),c=t(93809),l=t(80500),d=t(89622),f=function(e){var n=(0,a.k6)(),t=(0,u.D)(d.kO),f=(0,o.Z)(t,1)[0],p=(0,l.n)(e);return s.useCallback(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o,u,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.pipelineSnapshotId&&p){t.next=2;break}return t.abrupt("return");case 2:return o=(0,d.kz)({run:e,style:i,repositoryLocationName:p.match.repositoryLocation.name,repositoryName:p.match.repository.name}),t.prev=3,t.next=6,f({variables:o});case 6:s=t.sent,(0,d.lF)(e.pipelineName,null===(u=s.data)||void 0===u?void 0:u.launchPipelineReexecution,n,{preserveQuerystring:!0,behavior:"open"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,c.t)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[n,f,p,e])}},48652:function(e,n,t){var r=t(39865),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function u(){var e=new Set,n=new Set,t=0;return{next:r,cancel:r,clearAll:function(){e.clear(),n.clear(),cancelAnimationFrame(t),t=0}};function r(e){n.add(e),t||(t=requestAnimationFrame(i))}function i(){t=0;var r=n;n=e,(e=r).forEach((function(e){e()})),e.clear()}}e.exports=function(e,n,t){var r=Object.create(null),u=Object.create(null),s="function"===typeof(t=t||{}).easing?t.easing:i[t.easing];s||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),s=i.ease);var a="function"===typeof t.step?t.step:o,c="function"===typeof t.done?t.done:o,l=function(e){if(!e){return"undefined"!==typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),d=Object.keys(n);d.forEach((function(t){r[t]=e[t],u[t]=n[t]-e[t]}));var f,p="number"===typeof t.duration?t.duration:400,h=Math.max(1,.06*p),x=0;return f=l.next((function n(){var t=s(x/h);x+=1,m(t),x<=h?(f=l.next(n),a(e)):(f=0,setTimeout((function(){c(e)}),0))})),{cancel:function(){l.cancel(f),f=0}};function m(n){d.forEach((function(t){e[t]=u[t]*n+r[t]}))}},e.exports.makeAggregateRaf=u,e.exports.sharedScheduler=u()},39865:function(e){var n=.1,t="function"===typeof Float32Array;function r(e,n){return 1-3*n+3*e}function i(e,n){return 3*n-6*e}function o(e){return 3*e}function u(e,n,t){return((r(n,t)*e+i(n,t))*e+o(n))*e}function s(e,n,t){return 3*r(n,t)*e*e+2*i(n,t)*e+o(n)}function a(e){return e}e.exports=function(e,r,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&i===o)return a;for(var c=t?new Float32Array(11):new Array(11),l=0;l<11;++l)c[l]=u(l*n,e,i);function d(t){for(var r=0,o=1;10!==o&&c[o]<=t;++o)r+=n;--o;var a=r+(t-c[o])/(c[o+1]-c[o])*n,l=s(a,e,i);return l>=.001?function(e,n,t,r){for(var i=0;i<4;++i){var o=s(n,t,r);if(0===o)return n;n-=(u(n,t,r)-e)/o}return n}(t,a,e,i):0===l?a:function(e,n,t,r,i){var o,s,a=0;do{(o=u(s=n+(t-n)/2,r,i)-e)>0?t=s:n=s}while(Math.abs(o)>1e-7&&++a<10);return s}(t,r,r+n,e,i)}return function(e){return 0===e?0:1===e?1:u(d(e),r,o)}}},86357:function(e,n,t){var r=t(10243);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},93550:function(e){e.exports=function(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}},14269:function(e){e.exports=function(e,n,t,r){for(var i=e.length,o=t+(r?1:-1);r?o--:++o<i;)if(n(e[o],o,e))return o;return-1}},10243:function(e,n,t){var r=t(14269),i=t(71427),o=t(84751);e.exports=function(e,n,t){return n===n?o(e,n,t):r(e,i,t)}},71427:function(e){e.exports=function(e){return e!==e}},57491:function(e,n,t){var r=t(67268),i=t(86357),o=t(93550),u=t(59390),s=t(28809),a=t(27525);e.exports=function(e,n,t){var c=-1,l=i,d=e.length,f=!0,p=[],h=p;if(t)f=!1,l=o;else if(d>=200){var x=n?null:s(e);if(x)return a(x);f=!1,l=u,h=new r}else h=n?[]:p;e:for(;++c<d;){var m=e[c],v=n?n(m):m;if(m=t||0!==m?m:0,f&&v===v){for(var g=h.length;g--;)if(h[g]===v)continue e;n&&h.push(v),p.push(m)}else l(h,v,t)||(h!==p&&h.push(v),p.push(m))}return p}},28809:function(e,n,t){var r=t(66938),i=t(14669),o=t(27525),u=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=u},84751:function(e){e.exports=function(e,n,t){for(var r=t-1,i=e.length;++r<i;)if(e[r]===n)return r;return-1}},14669:function(e){e.exports=function(){}},23662:function(e,n,t){var r=t(57491);e.exports=function(e){return e&&e.length?r(e):[]}}}]);
//# sourceMappingURL=921.8068d4a0.chunk.js.map